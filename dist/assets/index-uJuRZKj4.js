(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function km(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _m(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var _d={exports:{}},_a={},jd={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=Symbol.for("react.element"),jm=Symbol.for("react.portal"),Nm=Symbol.for("react.fragment"),Sm=Symbol.for("react.strict_mode"),zm=Symbol.for("react.profiler"),Em=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),Tm=Symbol.for("react.forward_ref"),Pm=Symbol.for("react.suspense"),Am=Symbol.for("react.memo"),Dm=Symbol.for("react.lazy"),Bc=Symbol.iterator;function Rm(e){return e===null||typeof e!="object"?null:(e=Bc&&e[Bc]||e["@@iterator"],typeof e=="function"?e:null)}var Nd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sd=Object.assign,zd={};function ns(e,t,r){this.props=e,this.context=t,this.refs=zd,this.updater=r||Nd}ns.prototype.isReactComponent={};ns.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ns.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ed(){}Ed.prototype=ns.prototype;function Oo(e,t,r){this.props=e,this.context=t,this.refs=zd,this.updater=r||Nd}var $o=Oo.prototype=new Ed;$o.constructor=Oo;Sd($o,ns.prototype);$o.isPureReactComponent=!0;var qc=Array.isArray,Cd=Object.prototype.hasOwnProperty,Io={current:null},Td={key:!0,ref:!0,__self:!0,__source:!0};function Pd(e,t,r){var n,s={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Cd.call(t,n)&&!Td.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:ri,type:e,key:a,ref:l,props:s,_owner:Io.current}}function Lm(e,t){return{$$typeof:ri,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Uo(e){return typeof e=="object"&&e!==null&&e.$$typeof===ri}function Om(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Hc=/\/+/g;function Wa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Om(""+e.key):t.toString(36)}function Ai(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ri:case jm:l=!0}}if(l)return l=e,s=s(l),e=n===""?"."+Wa(l,0):n,qc(s)?(r="",e!=null&&(r=e.replace(Hc,"$&/")+"/"),Ai(s,t,r,"",function(u){return u})):s!=null&&(Uo(s)&&(s=Lm(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Hc,"$&/")+"/")+e)),t.push(s)),1;if(l=0,n=n===""?".":n+":",qc(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+Wa(a,o);l+=Ai(a,t,r,c,s)}else if(c=Rm(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+Wa(a,o++),l+=Ai(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function di(e,t,r){if(e==null)return e;var n=[],s=0;return Ai(e,n,"","",function(a){return t.call(r,a,s++)}),n}function $m(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yt={current:null},Di={transition:null},Im={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:Di,ReactCurrentOwner:Io};function Ad(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:di,forEach:function(e,t,r){di(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return di(e,function(){t++}),t},toArray:function(e){return di(e,function(t){return t})||[]},only:function(e){if(!Uo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=ns;me.Fragment=Nm;me.Profiler=zm;me.PureComponent=Oo;me.StrictMode=Sm;me.Suspense=Pm;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Im;me.act=Ad;me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Sd({},e.props),s=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Io.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Cd.call(t,c)&&!Td.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:ri,type:e.type,key:s,ref:a,props:n,_owner:l}};me.createContext=function(e){return e={$$typeof:Cm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Em,_context:e},e.Consumer=e};me.createElement=Pd;me.createFactory=function(e){var t=Pd.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:Tm,render:e}};me.isValidElement=Uo;me.lazy=function(e){return{$$typeof:Dm,_payload:{_status:-1,_result:e},_init:$m}};me.memo=function(e,t){return{$$typeof:Am,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=Di.transition;Di.transition={};try{e()}finally{Di.transition=t}};me.unstable_act=Ad;me.useCallback=function(e,t){return yt.current.useCallback(e,t)};me.useContext=function(e){return yt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return yt.current.useDeferredValue(e)};me.useEffect=function(e,t){return yt.current.useEffect(e,t)};me.useId=function(){return yt.current.useId()};me.useImperativeHandle=function(e,t,r){return yt.current.useImperativeHandle(e,t,r)};me.useInsertionEffect=function(e,t){return yt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return yt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return yt.current.useMemo(e,t)};me.useReducer=function(e,t,r){return yt.current.useReducer(e,t,r)};me.useRef=function(e){return yt.current.useRef(e)};me.useState=function(e){return yt.current.useState(e)};me.useSyncExternalStore=function(e,t,r){return yt.current.useSyncExternalStore(e,t,r)};me.useTransition=function(){return yt.current.useTransition()};me.version="18.3.1";jd.exports=me;var b=jd.exports;const Um=km(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=b,Fm=Symbol.for("react.element"),Bm=Symbol.for("react.fragment"),qm=Object.prototype.hasOwnProperty,Hm=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wm={key:!0,ref:!0,__self:!0,__source:!0};function Dd(e,t,r){var n,s={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)qm.call(t,n)&&!Wm.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Fm,type:e,key:a,ref:l,props:s,_owner:Hm.current}}_a.Fragment=Bm;_a.jsx=Dd;_a.jsxs=Dd;_d.exports=_a;var i=_d.exports,Rd={exports:{}},Rt={},Ld={exports:{}},Od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,X){var N=L.length;L.push(X);e:for(;0<N;){var U=N-1>>>1,B=L[U];if(0<s(B,X))L[U]=X,L[N]=B,N=U;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var X=L[0],N=L.pop();if(N!==X){L[0]=N;e:for(var U=0,B=L.length,re=B>>>1;U<re;){var W=2*(U+1)-1,de=L[W],je=W+1,ce=L[je];if(0>s(de,N))je<B&&0>s(ce,de)?(L[U]=ce,L[je]=N,U=je):(L[U]=de,L[W]=N,U=W);else if(je<B&&0>s(ce,N))L[U]=ce,L[je]=N,U=je;else break e}}return X}function s(L,X){var N=L.sortIndex-X.sortIndex;return N!==0?N:L.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,h=null,m=3,g=!1,y=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(L){for(var X=r(u);X!==null;){if(X.callback===null)n(u);else if(X.startTime<=L)n(u),X.sortIndex=X.expirationTime,t(c,X);else break;X=r(u)}}function w(L){if(S=!1,p(L),!y)if(r(c)!==null)y=!0,bt(C);else{var X=r(u);X!==null&&Ze(w,X.startTime-L)}}function C(L,X){y=!1,S&&(S=!1,x(j),j=-1),g=!0;var N=m;try{for(p(X),h=r(c);h!==null&&(!(h.expirationTime>X)||L&&!Q());){var U=h.callback;if(typeof U=="function"){h.callback=null,m=h.priorityLevel;var B=U(h.expirationTime<=X);X=e.unstable_now(),typeof B=="function"?h.callback=B:h===r(c)&&n(c),p(X)}else n(c);h=r(c)}if(h!==null)var re=!0;else{var W=r(u);W!==null&&Ze(w,W.startTime-X),re=!1}return re}finally{h=null,m=N,g=!1}}var k=!1,v=null,j=-1,R=5,P=-1;function Q(){return!(e.unstable_now()-P<R)}function F(){if(v!==null){var L=e.unstable_now();P=L;var X=!0;try{X=v(!0,L)}finally{X?q():(k=!1,v=null)}}else k=!1}var q;if(typeof f=="function")q=function(){f(F)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Se=ae.port2;ae.port1.onmessage=F,q=function(){Se.postMessage(null)}}else q=function(){A(F,0)};function bt(L){v=L,k||(k=!0,q())}function Ze(L,X){j=A(function(){L(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){y||g||(y=!0,bt(C))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var N=m;m=X;try{return L()}finally{m=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,X){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var N=m;m=L;try{return X()}finally{m=N}},e.unstable_scheduleCallback=function(L,X,N){var U=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?U+N:U):N=U,L){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=N+B,L={id:d++,callback:X,priorityLevel:L,startTime:N,expirationTime:B,sortIndex:-1},N>U?(L.sortIndex=N,t(u,L),r(c)===null&&L===r(u)&&(S?(x(j),j=-1):S=!0,Ze(w,N-U))):(L.sortIndex=B,t(c,L),y||g||(y=!0,bt(C))),L},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(L){var X=m;return function(){var N=m;m=X;try{return L.apply(this,arguments)}finally{m=N}}}})(Od);Ld.exports=Od;var Gm=Ld.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=b,Dt=Gm;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $d=new Set,Os={};function yn(e,t){Yn(e,t),Yn(e+"Capture",t)}function Yn(e,t){for(Os[e]=t,e=0;e<t.length;e++)$d.add(t[e])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nl=Object.prototype.hasOwnProperty,Km=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wc={},Gc={};function Ym(e){return Nl.call(Gc,e)?!0:Nl.call(Wc,e)?!1:Km.test(e)?Gc[e]=!0:(Wc[e]=!0,!1)}function Qm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jm(e,t,r,n){if(t===null||typeof t>"u"||Qm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vt(e,t,r,n,s,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){at[e]=new vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];at[t]=new vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){at[e]=new vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){at[e]=new vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){at[e]=new vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){at[e]=new vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){at[e]=new vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){at[e]=new vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){at[e]=new vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mo=/[\-:]([a-z])/g;function Fo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mo,Fo);at[t]=new vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mo,Fo);at[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mo,Fo);at[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){at[e]=new vt(e,1,!1,e.toLowerCase(),null,!1,!1)});at.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){at[e]=new vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bo(e,t,r,n){var s=at.hasOwnProperty(t)?at[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jm(t,r,s,n)&&(r=null),n||s===null?Ym(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Nr=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hi=Symbol.for("react.element"),Pn=Symbol.for("react.portal"),An=Symbol.for("react.fragment"),qo=Symbol.for("react.strict_mode"),Sl=Symbol.for("react.profiler"),Id=Symbol.for("react.provider"),Ud=Symbol.for("react.context"),Ho=Symbol.for("react.forward_ref"),zl=Symbol.for("react.suspense"),El=Symbol.for("react.suspense_list"),Wo=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),Md=Symbol.for("react.offscreen"),Vc=Symbol.iterator;function us(e){return e===null||typeof e!="object"?null:(e=Vc&&e[Vc]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,Ga;function vs(e){if(Ga===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ga=t&&t[1]||""}return`
`+Ga+e}var Va=!1;function Ka(e,t){if(!e||Va)return"";Va=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),l=s.length-1,o=a.length-1;1<=l&&0<=o&&s[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(s[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||s[l]!==a[o]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Va=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?vs(e):""}function Xm(e){switch(e.tag){case 5:return vs(e.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 2:case 15:return e=Ka(e.type,!1),e;case 11:return e=Ka(e.type.render,!1),e;case 1:return e=Ka(e.type,!0),e;default:return""}}function Cl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case An:return"Fragment";case Pn:return"Portal";case Sl:return"Profiler";case qo:return"StrictMode";case zl:return"Suspense";case El:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ud:return(e.displayName||"Context")+".Consumer";case Id:return(e._context.displayName||"Context")+".Provider";case Ho:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wo:return t=e.displayName||null,t!==null?t:Cl(e.type)||"Memo";case Ar:t=e._payload,e=e._init;try{return Cl(e(t))}catch{}}return null}function Zm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cl(t);case 8:return t===qo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ep(e){var t=Fd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fi(e){e._valueTracker||(e._valueTracker=ep(e))}function Bd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Fd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Wi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tl(e,t){var r=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qd(e,t){t=t.checked,t!=null&&Bo(e,"checked",t,!1)}function Pl(e,t){qd(e,t);var r=Vr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Al(e,t.type,r):t.hasOwnProperty("defaultValue")&&Al(e,t.type,Vr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Al(e,t,r){(t!=="number"||Wi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bs=Array.isArray;function qn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Dl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(D(92));if(bs(r)){if(1<r.length)throw Error(D(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vr(r)}}function Hd(e,t){var r=Vr(t.value),n=Vr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Jc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mi,Gd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mi=mi||document.createElement("div"),mi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $s(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tp=["Webkit","ms","Moz","O"];Object.keys(js).forEach(function(e){tp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),js[t]=js[e]})});function Vd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||js.hasOwnProperty(e)&&js[e]?(""+t).trim():t+"px"}function Kd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Vd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var rp=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ll(e,t){if(t){if(rp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Ol(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $l=null;function Go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Il=null,Hn=null,Wn=null;function Xc(e){if(e=ii(e)){if(typeof Il!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Ea(t),Il(e.stateNode,e.type,t))}}function Yd(e){Hn?Wn?Wn.push(e):Wn=[e]:Hn=e}function Qd(){if(Hn){var e=Hn,t=Wn;if(Wn=Hn=null,Xc(e),t)for(e=0;e<t.length;e++)Xc(t[e])}}function Jd(e,t){return e(t)}function Xd(){}var Ya=!1;function Zd(e,t,r){if(Ya)return e(t,r);Ya=!0;try{return Jd(e,t,r)}finally{Ya=!1,(Hn!==null||Wn!==null)&&(Xd(),Qd())}}function Is(e,t){var r=e.stateNode;if(r===null)return null;var n=Ea(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(D(231,t,typeof r));return r}var Ul=!1;if(wr)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Ul=!1}function np(e,t,r,n,s,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ns=!1,Gi=null,Vi=!1,Ml=null,sp={onError:function(e){Ns=!0,Gi=e}};function ip(e,t,r,n,s,a,l,o,c){Ns=!1,Gi=null,np.apply(sp,arguments)}function ap(e,t,r,n,s,a,l,o,c){if(ip.apply(this,arguments),Ns){if(Ns){var u=Gi;Ns=!1,Gi=null}else throw Error(D(198));Vi||(Vi=!0,Ml=u)}}function vn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function eh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zc(e){if(vn(e)!==e)throw Error(D(188))}function lp(e){var t=e.alternate;if(!t){if(t=vn(e),t===null)throw Error(D(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Zc(s),e;if(a===n)return Zc(s),t;a=a.sibling}throw Error(D(188))}if(r.return!==n.return)r=s,n=a;else{for(var l=!1,o=s.child;o;){if(o===r){l=!0,r=s,n=a;break}if(o===n){l=!0,n=s,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,n=s;break}if(o===n){l=!0,n=a,r=s;break}o=o.sibling}if(!l)throw Error(D(189))}}if(r.alternate!==n)throw Error(D(190))}if(r.tag!==3)throw Error(D(188));return r.stateNode.current===r?e:t}function th(e){return e=lp(e),e!==null?rh(e):null}function rh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rh(e);if(t!==null)return t;e=e.sibling}return null}var nh=Dt.unstable_scheduleCallback,eu=Dt.unstable_cancelCallback,op=Dt.unstable_shouldYield,cp=Dt.unstable_requestPaint,Fe=Dt.unstable_now,up=Dt.unstable_getCurrentPriorityLevel,Vo=Dt.unstable_ImmediatePriority,sh=Dt.unstable_UserBlockingPriority,Ki=Dt.unstable_NormalPriority,dp=Dt.unstable_LowPriority,ih=Dt.unstable_IdlePriority,ja=null,or=null;function hp(e){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(ja,e,void 0,(e.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:pp,fp=Math.log,mp=Math.LN2;function pp(e){return e>>>=0,e===0?32:31-(fp(e)/mp|0)|0}var pi=64,gi=4194304;function ws(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~s;o!==0?n=ws(o):(a&=l,a!==0&&(n=ws(a)))}else l=r&~s,l!==0?n=ws(l):a!==0&&(n=ws(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-tr(t),s=1<<r,n|=e[r],t&=~s;return n}function gp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-tr(a),o=1<<l,c=s[l];c===-1?(!(o&r)||o&n)&&(s[l]=gp(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Fl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ah(){var e=pi;return pi<<=1,!(pi&4194240)&&(pi=64),e}function Qa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ni(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tr(t),e[t]=r}function yp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-tr(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function Ko(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-tr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var _e=0;function lh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var oh,Yo,ch,uh,dh,Bl=!1,xi=[],Ur=null,Mr=null,Fr=null,Us=new Map,Ms=new Map,Rr=[],vp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tu(e,t){switch(e){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(t.pointerId)}}function hs(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=ii(t),t!==null&&Yo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function bp(e,t,r,n,s){switch(t){case"focusin":return Ur=hs(Ur,e,t,r,n,s),!0;case"dragenter":return Mr=hs(Mr,e,t,r,n,s),!0;case"mouseover":return Fr=hs(Fr,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Us.set(a,hs(Us.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Ms.set(a,hs(Ms.get(a)||null,e,t,r,n,s)),!0}return!1}function hh(e){var t=ln(e.target);if(t!==null){var r=vn(t);if(r!==null){if(t=r.tag,t===13){if(t=eh(r),t!==null){e.blockedOn=t,dh(e.priority,function(){ch(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ri(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ql(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$l=n,r.target.dispatchEvent(n),$l=null}else return t=ii(r),t!==null&&Yo(t),e.blockedOn=r,!1;t.shift()}return!0}function ru(e,t,r){Ri(e)&&r.delete(t)}function wp(){Bl=!1,Ur!==null&&Ri(Ur)&&(Ur=null),Mr!==null&&Ri(Mr)&&(Mr=null),Fr!==null&&Ri(Fr)&&(Fr=null),Us.forEach(ru),Ms.forEach(ru)}function fs(e,t){e.blockedOn===t&&(e.blockedOn=null,Bl||(Bl=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,wp)))}function Fs(e){function t(s){return fs(s,e)}if(0<xi.length){fs(xi[0],e);for(var r=1;r<xi.length;r++){var n=xi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ur!==null&&fs(Ur,e),Mr!==null&&fs(Mr,e),Fr!==null&&fs(Fr,e),Us.forEach(t),Ms.forEach(t),r=0;r<Rr.length;r++)n=Rr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Rr.length&&(r=Rr[0],r.blockedOn===null);)hh(r),r.blockedOn===null&&Rr.shift()}var Gn=Nr.ReactCurrentBatchConfig,Qi=!0;function kp(e,t,r,n){var s=_e,a=Gn.transition;Gn.transition=null;try{_e=1,Qo(e,t,r,n)}finally{_e=s,Gn.transition=a}}function _p(e,t,r,n){var s=_e,a=Gn.transition;Gn.transition=null;try{_e=4,Qo(e,t,r,n)}finally{_e=s,Gn.transition=a}}function Qo(e,t,r,n){if(Qi){var s=ql(e,t,r,n);if(s===null)al(e,t,n,Ji,r),tu(e,n);else if(bp(s,e,t,r,n))n.stopPropagation();else if(tu(e,n),t&4&&-1<vp.indexOf(e)){for(;s!==null;){var a=ii(s);if(a!==null&&oh(a),a=ql(e,t,r,n),a===null&&al(e,t,n,Ji,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else al(e,t,n,null,r)}}var Ji=null;function ql(e,t,r,n){if(Ji=null,e=Go(n),e=ln(e),e!==null)if(t=vn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=eh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ji=e,null}function fh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(up()){case Vo:return 1;case sh:return 4;case Ki:case dp:return 16;case ih:return 536870912;default:return 16}default:return 16}}var $r=null,Jo=null,Li=null;function mh(){if(Li)return Li;var e,t=Jo,r=t.length,n,s="value"in $r?$r.value:$r.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===s[a-n];n++);return Li=s.slice(e,1<n?1-n:void 0)}function Oi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yi(){return!0}function nu(){return!1}function Lt(e){function t(r,n,s,a,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?yi:nu,this.isPropagationStopped=nu,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),t}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=Lt(ss),si=Ue({},ss,{view:0,detail:0}),jp=Lt(si),Ja,Xa,ms,Na=Ue({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ms&&(ms&&e.type==="mousemove"?(Ja=e.screenX-ms.screenX,Xa=e.screenY-ms.screenY):Xa=Ja=0,ms=e),Ja)},movementY:function(e){return"movementY"in e?e.movementY:Xa}}),su=Lt(Na),Np=Ue({},Na,{dataTransfer:0}),Sp=Lt(Np),zp=Ue({},si,{relatedTarget:0}),Za=Lt(zp),Ep=Ue({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),Cp=Lt(Ep),Tp=Ue({},ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pp=Lt(Tp),Ap=Ue({},ss,{data:0}),iu=Lt(Ap),Dp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Op(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lp[e])?!!t[e]:!1}function Zo(){return Op}var $p=Ue({},si,{key:function(e){if(e.key){var t=Dp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Oi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zo,charCode:function(e){return e.type==="keypress"?Oi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ip=Lt($p),Up=Ue({},Na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=Lt(Up),Mp=Ue({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zo}),Fp=Lt(Mp),Bp=Ue({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),qp=Lt(Bp),Hp=Ue({},Na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wp=Lt(Hp),Gp=[9,13,27,32],ec=wr&&"CompositionEvent"in window,Ss=null;wr&&"documentMode"in document&&(Ss=document.documentMode);var Vp=wr&&"TextEvent"in window&&!Ss,ph=wr&&(!ec||Ss&&8<Ss&&11>=Ss),lu=" ",ou=!1;function gh(e,t){switch(e){case"keyup":return Gp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dn=!1;function Kp(e,t){switch(e){case"compositionend":return xh(t);case"keypress":return t.which!==32?null:(ou=!0,lu);case"textInput":return e=t.data,e===lu&&ou?null:e;default:return null}}function Yp(e,t){if(Dn)return e==="compositionend"||!ec&&gh(e,t)?(e=mh(),Li=Jo=$r=null,Dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ph&&t.locale!=="ko"?null:t.data;default:return null}}var Qp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qp[e.type]:t==="textarea"}function yh(e,t,r,n){Yd(n),t=Xi(t,"onChange"),0<t.length&&(r=new Xo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var zs=null,Bs=null;function Jp(e){Ch(e,0)}function Sa(e){var t=On(e);if(Bd(t))return e}function Xp(e,t){if(e==="change")return t}var vh=!1;if(wr){var el;if(wr){var tl="oninput"in document;if(!tl){var uu=document.createElement("div");uu.setAttribute("oninput","return;"),tl=typeof uu.oninput=="function"}el=tl}else el=!1;vh=el&&(!document.documentMode||9<document.documentMode)}function du(){zs&&(zs.detachEvent("onpropertychange",bh),Bs=zs=null)}function bh(e){if(e.propertyName==="value"&&Sa(Bs)){var t=[];yh(t,Bs,e,Go(e)),Zd(Jp,t)}}function Zp(e,t,r){e==="focusin"?(du(),zs=t,Bs=r,zs.attachEvent("onpropertychange",bh)):e==="focusout"&&du()}function e0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sa(Bs)}function t0(e,t){if(e==="click")return Sa(t)}function r0(e,t){if(e==="input"||e==="change")return Sa(t)}function n0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nr=typeof Object.is=="function"?Object.is:n0;function qs(e,t){if(nr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Nl.call(t,s)||!nr(e[s],t[s]))return!1}return!0}function hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fu(e,t){var r=hu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hu(r)}}function wh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kh(){for(var e=window,t=Wi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wi(e.document)}return t}function tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function s0(e){var t=kh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&wh(r.ownerDocument.documentElement,r)){if(n!==null&&tc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=fu(r,a);var l=fu(r,n);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var i0=wr&&"documentMode"in document&&11>=document.documentMode,Rn=null,Hl=null,Es=null,Wl=!1;function mu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wl||Rn==null||Rn!==Wi(n)||(n=Rn,"selectionStart"in n&&tc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Es&&qs(Es,n)||(Es=n,n=Xi(Hl,"onSelect"),0<n.length&&(t=new Xo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Rn)))}function vi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ln={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionend:vi("Transition","TransitionEnd")},rl={},_h={};wr&&(_h=document.createElement("div").style,"AnimationEvent"in window||(delete Ln.animationend.animation,delete Ln.animationiteration.animation,delete Ln.animationstart.animation),"TransitionEvent"in window||delete Ln.transitionend.transition);function za(e){if(rl[e])return rl[e];if(!Ln[e])return e;var t=Ln[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _h)return rl[e]=t[r];return e}var jh=za("animationend"),Nh=za("animationiteration"),Sh=za("animationstart"),zh=za("transitionend"),Eh=new Map,pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(e,t){Eh.set(e,t),yn(t,[e])}for(var nl=0;nl<pu.length;nl++){var sl=pu[nl],a0=sl.toLowerCase(),l0=sl[0].toUpperCase()+sl.slice(1);Yr(a0,"on"+l0)}Yr(jh,"onAnimationEnd");Yr(Nh,"onAnimationIteration");Yr(Sh,"onAnimationStart");Yr("dblclick","onDoubleClick");Yr("focusin","onFocus");Yr("focusout","onBlur");Yr(zh,"onTransitionEnd");Yn("onMouseEnter",["mouseout","mouseover"]);Yn("onMouseLeave",["mouseout","mouseover"]);Yn("onPointerEnter",["pointerout","pointerover"]);Yn("onPointerLeave",["pointerout","pointerover"]);yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yn("onBeforeInput",["compositionend","keypress","textInput","paste"]);yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function gu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ap(n,t,void 0,e),e.currentTarget=null}function Ch(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&s.isPropagationStopped())break e;gu(s,o,u),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&s.isPropagationStopped())break e;gu(s,o,u),a=c}}}if(Vi)throw e=Ml,Vi=!1,Ml=null,e}function Te(e,t){var r=t[Ql];r===void 0&&(r=t[Ql]=new Set);var n=e+"__bubble";r.has(n)||(Th(t,e,2,!1),r.add(n))}function il(e,t,r){var n=0;t&&(n|=4),Th(r,e,n,t)}var bi="_reactListening"+Math.random().toString(36).slice(2);function Hs(e){if(!e[bi]){e[bi]=!0,$d.forEach(function(r){r!=="selectionchange"&&(o0.has(r)||il(r,!1,e),il(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bi]||(t[bi]=!0,il("selectionchange",!1,t))}}function Th(e,t,r,n){switch(fh(t)){case 1:var s=kp;break;case 4:s=_p;break;default:s=Qo}r=s.bind(null,t,r,e),s=void 0,!Ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function al(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;o!==null;){if(l=ln(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}Zd(function(){var u=a,d=Go(r),h=[];e:{var m=Eh.get(e);if(m!==void 0){var g=Xo,y=e;switch(e){case"keypress":if(Oi(r)===0)break e;case"keydown":case"keyup":g=Ip;break;case"focusin":y="focus",g=Za;break;case"focusout":y="blur",g=Za;break;case"beforeblur":case"afterblur":g=Za;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=su;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Sp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Fp;break;case jh:case Nh:case Sh:g=Cp;break;case zh:g=qp;break;case"scroll":g=jp;break;case"wheel":g=Wp;break;case"copy":case"cut":case"paste":g=Pp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=au}var S=(t&4)!==0,A=!S&&e==="scroll",x=S?m!==null?m+"Capture":null:m;S=[];for(var f=u,p;f!==null;){p=f;var w=p.stateNode;if(p.tag===5&&w!==null&&(p=w,x!==null&&(w=Is(f,x),w!=null&&S.push(Ws(f,w,p)))),A)break;f=f.return}0<S.length&&(m=new g(m,y,null,r,d),h.push({event:m,listeners:S}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&r!==$l&&(y=r.relatedTarget||r.fromElement)&&(ln(y)||y[kr]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(y=r.relatedTarget||r.toElement,g=u,y=y?ln(y):null,y!==null&&(A=vn(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(S=su,w="onMouseLeave",x="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(S=au,w="onPointerLeave",x="onPointerEnter",f="pointer"),A=g==null?m:On(g),p=y==null?m:On(y),m=new S(w,f+"leave",g,r,d),m.target=A,m.relatedTarget=p,w=null,ln(d)===u&&(S=new S(x,f+"enter",y,r,d),S.target=p,S.relatedTarget=A,w=S),A=w,g&&y)t:{for(S=g,x=y,f=0,p=S;p;p=_n(p))f++;for(p=0,w=x;w;w=_n(w))p++;for(;0<f-p;)S=_n(S),f--;for(;0<p-f;)x=_n(x),p--;for(;f--;){if(S===x||x!==null&&S===x.alternate)break t;S=_n(S),x=_n(x)}S=null}else S=null;g!==null&&xu(h,m,g,S,!1),y!==null&&A!==null&&xu(h,A,y,S,!0)}}e:{if(m=u?On(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var C=Xp;else if(cu(m))if(vh)C=r0;else{C=e0;var k=Zp}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=t0);if(C&&(C=C(e,u))){yh(h,C,r,d);break e}k&&k(e,m,u),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Al(m,"number",m.value)}switch(k=u?On(u):window,e){case"focusin":(cu(k)||k.contentEditable==="true")&&(Rn=k,Hl=u,Es=null);break;case"focusout":Es=Hl=Rn=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,mu(h,r,d);break;case"selectionchange":if(i0)break;case"keydown":case"keyup":mu(h,r,d)}var v;if(ec)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Dn?gh(e,r)&&(j="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(ph&&r.locale!=="ko"&&(Dn||j!=="onCompositionStart"?j==="onCompositionEnd"&&Dn&&(v=mh()):($r=d,Jo="value"in $r?$r.value:$r.textContent,Dn=!0)),k=Xi(u,j),0<k.length&&(j=new iu(j,e,null,r,d),h.push({event:j,listeners:k}),v?j.data=v:(v=xh(r),v!==null&&(j.data=v)))),(v=Vp?Kp(e,r):Yp(e,r))&&(u=Xi(u,"onBeforeInput"),0<u.length&&(d=new iu("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=v))}Ch(h,t)})}function Ws(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Is(e,r),a!=null&&n.unshift(Ws(e,a,s)),a=Is(e,t),a!=null&&n.push(Ws(e,a,s))),e=e.return}return n}function _n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xu(e,t,r,n,s){for(var a=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,s?(c=Is(r,a),c!=null&&l.unshift(Ws(r,c,o))):s||(c=Is(r,a),c!=null&&l.push(Ws(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var c0=/\r\n?/g,u0=/\u0000|\uFFFD/g;function yu(e){return(typeof e=="string"?e:""+e).replace(c0,`
`).replace(u0,"")}function wi(e,t,r){if(t=yu(t),yu(e)!==t&&r)throw Error(D(425))}function Zi(){}var Gl=null,Vl=null;function Kl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yl=typeof setTimeout=="function"?setTimeout:void 0,d0=typeof clearTimeout=="function"?clearTimeout:void 0,vu=typeof Promise=="function"?Promise:void 0,h0=typeof queueMicrotask=="function"?queueMicrotask:typeof vu<"u"?function(e){return vu.resolve(null).then(e).catch(f0)}:Yl;function f0(e){setTimeout(function(){throw e})}function ll(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Fs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Fs(t)}function Br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var is=Math.random().toString(36).slice(2),lr="__reactFiber$"+is,Gs="__reactProps$"+is,kr="__reactContainer$"+is,Ql="__reactEvents$"+is,m0="__reactListeners$"+is,p0="__reactHandles$"+is;function ln(e){var t=e[lr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[kr]||r[lr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=bu(e);e!==null;){if(r=e[lr])return r;e=bu(e)}return t}e=r,r=e.parentNode}return null}function ii(e){return e=e[lr]||e[kr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function On(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Ea(e){return e[Gs]||null}var Jl=[],$n=-1;function Qr(e){return{current:e}}function Pe(e){0>$n||(e.current=Jl[$n],Jl[$n]=null,$n--)}function Ce(e,t){$n++,Jl[$n]=e.current,e.current=t}var Kr={},ht=Qr(Kr),jt=Qr(!1),hn=Kr;function Qn(e,t){var r=e.type.contextTypes;if(!r)return Kr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(e){return e=e.childContextTypes,e!=null}function ea(){Pe(jt),Pe(ht)}function wu(e,t,r){if(ht.current!==Kr)throw Error(D(168));Ce(ht,t),Ce(jt,r)}function Ph(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(D(108,Zm(e)||"Unknown",s));return Ue({},r,n)}function ta(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kr,hn=ht.current,Ce(ht,e),Ce(jt,jt.current),!0}function ku(e,t,r){var n=e.stateNode;if(!n)throw Error(D(169));r?(e=Ph(e,t,hn),n.__reactInternalMemoizedMergedChildContext=e,Pe(jt),Pe(ht),Ce(ht,e)):Pe(jt),Ce(jt,r)}var pr=null,Ca=!1,ol=!1;function Ah(e){pr===null?pr=[e]:pr.push(e)}function g0(e){Ca=!0,Ah(e)}function Jr(){if(!ol&&pr!==null){ol=!0;var e=0,t=_e;try{var r=pr;for(_e=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}pr=null,Ca=!1}catch(s){throw pr!==null&&(pr=pr.slice(e+1)),nh(Vo,Jr),s}finally{_e=t,ol=!1}}return null}var In=[],Un=0,ra=null,na=0,It=[],Ut=0,fn=null,gr=1,xr="";function rn(e,t){In[Un++]=na,In[Un++]=ra,ra=e,na=t}function Dh(e,t,r){It[Ut++]=gr,It[Ut++]=xr,It[Ut++]=fn,fn=e;var n=gr;e=xr;var s=32-tr(n)-1;n&=~(1<<s),r+=1;var a=32-tr(t)+s;if(30<a){var l=s-s%5;a=(n&(1<<l)-1).toString(32),n>>=l,s-=l,gr=1<<32-tr(t)+s|r<<s|n,xr=a+e}else gr=1<<a|r<<s|n,xr=e}function rc(e){e.return!==null&&(rn(e,1),Dh(e,1,0))}function nc(e){for(;e===ra;)ra=In[--Un],In[Un]=null,na=In[--Un],In[Un]=null;for(;e===fn;)fn=It[--Ut],It[Ut]=null,xr=It[--Ut],It[Ut]=null,gr=It[--Ut],It[Ut]=null}var At=null,Pt=null,Le=!1,er=null;function Rh(e,t){var r=Mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _u(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,Pt=Br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=fn!==null?{id:gr,overflow:xr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,At=e,Pt=null,!0):!1;default:return!1}}function Xl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zl(e){if(Le){var t=Pt;if(t){var r=t;if(!_u(e,t)){if(Xl(e))throw Error(D(418));t=Br(r.nextSibling);var n=At;t&&_u(e,t)?Rh(n,r):(e.flags=e.flags&-4097|2,Le=!1,At=e)}}else{if(Xl(e))throw Error(D(418));e.flags=e.flags&-4097|2,Le=!1,At=e}}}function ju(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function ki(e){if(e!==At)return!1;if(!Le)return ju(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Kl(e.type,e.memoizedProps)),t&&(t=Pt)){if(Xl(e))throw Lh(),Error(D(418));for(;t;)Rh(e,t),t=Br(t.nextSibling)}if(ju(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Pt=Br(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=At?Br(e.stateNode.nextSibling):null;return!0}function Lh(){for(var e=Pt;e;)e=Br(e.nextSibling)}function Jn(){Pt=At=null,Le=!1}function sc(e){er===null?er=[e]:er.push(e)}var x0=Nr.ReactCurrentBatchConfig;function ps(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(D(309));var n=r.stateNode}if(!n)throw Error(D(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=s.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(D(284));if(!r._owner)throw Error(D(290,e))}return e}function _i(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nu(e){var t=e._init;return t(e._payload)}function Oh(e){function t(x,f){if(e){var p=x.deletions;p===null?(x.deletions=[f],x.flags|=16):p.push(f)}}function r(x,f){if(!e)return null;for(;f!==null;)t(x,f),f=f.sibling;return null}function n(x,f){for(x=new Map;f!==null;)f.key!==null?x.set(f.key,f):x.set(f.index,f),f=f.sibling;return x}function s(x,f){return x=Gr(x,f),x.index=0,x.sibling=null,x}function a(x,f,p){return x.index=p,e?(p=x.alternate,p!==null?(p=p.index,p<f?(x.flags|=2,f):p):(x.flags|=2,f)):(x.flags|=1048576,f)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,f,p,w){return f===null||f.tag!==6?(f=pl(p,x.mode,w),f.return=x,f):(f=s(f,p),f.return=x,f)}function c(x,f,p,w){var C=p.type;return C===An?d(x,f,p.props.children,w,p.key):f!==null&&(f.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ar&&Nu(C)===f.type)?(w=s(f,p.props),w.ref=ps(x,f,p),w.return=x,w):(w=qi(p.type,p.key,p.props,null,x.mode,w),w.ref=ps(x,f,p),w.return=x,w)}function u(x,f,p,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=gl(p,x.mode,w),f.return=x,f):(f=s(f,p.children||[]),f.return=x,f)}function d(x,f,p,w,C){return f===null||f.tag!==7?(f=dn(p,x.mode,w,C),f.return=x,f):(f=s(f,p),f.return=x,f)}function h(x,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=pl(""+f,x.mode,p),f.return=x,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case hi:return p=qi(f.type,f.key,f.props,null,x.mode,p),p.ref=ps(x,null,f),p.return=x,p;case Pn:return f=gl(f,x.mode,p),f.return=x,f;case Ar:var w=f._init;return h(x,w(f._payload),p)}if(bs(f)||us(f))return f=dn(f,x.mode,p,null),f.return=x,f;_i(x,f)}return null}function m(x,f,p,w){var C=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:o(x,f,""+p,w);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case hi:return p.key===C?c(x,f,p,w):null;case Pn:return p.key===C?u(x,f,p,w):null;case Ar:return C=p._init,m(x,f,C(p._payload),w)}if(bs(p)||us(p))return C!==null?null:d(x,f,p,w,null);_i(x,p)}return null}function g(x,f,p,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(p)||null,o(f,x,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hi:return x=x.get(w.key===null?p:w.key)||null,c(f,x,w,C);case Pn:return x=x.get(w.key===null?p:w.key)||null,u(f,x,w,C);case Ar:var k=w._init;return g(x,f,p,k(w._payload),C)}if(bs(w)||us(w))return x=x.get(p)||null,d(f,x,w,C,null);_i(f,w)}return null}function y(x,f,p,w){for(var C=null,k=null,v=f,j=f=0,R=null;v!==null&&j<p.length;j++){v.index>j?(R=v,v=null):R=v.sibling;var P=m(x,v,p[j],w);if(P===null){v===null&&(v=R);break}e&&v&&P.alternate===null&&t(x,v),f=a(P,f,j),k===null?C=P:k.sibling=P,k=P,v=R}if(j===p.length)return r(x,v),Le&&rn(x,j),C;if(v===null){for(;j<p.length;j++)v=h(x,p[j],w),v!==null&&(f=a(v,f,j),k===null?C=v:k.sibling=v,k=v);return Le&&rn(x,j),C}for(v=n(x,v);j<p.length;j++)R=g(v,x,j,p[j],w),R!==null&&(e&&R.alternate!==null&&v.delete(R.key===null?j:R.key),f=a(R,f,j),k===null?C=R:k.sibling=R,k=R);return e&&v.forEach(function(Q){return t(x,Q)}),Le&&rn(x,j),C}function S(x,f,p,w){var C=us(p);if(typeof C!="function")throw Error(D(150));if(p=C.call(p),p==null)throw Error(D(151));for(var k=C=null,v=f,j=f=0,R=null,P=p.next();v!==null&&!P.done;j++,P=p.next()){v.index>j?(R=v,v=null):R=v.sibling;var Q=m(x,v,P.value,w);if(Q===null){v===null&&(v=R);break}e&&v&&Q.alternate===null&&t(x,v),f=a(Q,f,j),k===null?C=Q:k.sibling=Q,k=Q,v=R}if(P.done)return r(x,v),Le&&rn(x,j),C;if(v===null){for(;!P.done;j++,P=p.next())P=h(x,P.value,w),P!==null&&(f=a(P,f,j),k===null?C=P:k.sibling=P,k=P);return Le&&rn(x,j),C}for(v=n(x,v);!P.done;j++,P=p.next())P=g(v,x,j,P.value,w),P!==null&&(e&&P.alternate!==null&&v.delete(P.key===null?j:P.key),f=a(P,f,j),k===null?C=P:k.sibling=P,k=P);return e&&v.forEach(function(F){return t(x,F)}),Le&&rn(x,j),C}function A(x,f,p,w){if(typeof p=="object"&&p!==null&&p.type===An&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case hi:e:{for(var C=p.key,k=f;k!==null;){if(k.key===C){if(C=p.type,C===An){if(k.tag===7){r(x,k.sibling),f=s(k,p.props.children),f.return=x,x=f;break e}}else if(k.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ar&&Nu(C)===k.type){r(x,k.sibling),f=s(k,p.props),f.ref=ps(x,k,p),f.return=x,x=f;break e}r(x,k);break}else t(x,k);k=k.sibling}p.type===An?(f=dn(p.props.children,x.mode,w,p.key),f.return=x,x=f):(w=qi(p.type,p.key,p.props,null,x.mode,w),w.ref=ps(x,f,p),w.return=x,x=w)}return l(x);case Pn:e:{for(k=p.key;f!==null;){if(f.key===k)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){r(x,f.sibling),f=s(f,p.children||[]),f.return=x,x=f;break e}else{r(x,f);break}else t(x,f);f=f.sibling}f=gl(p,x.mode,w),f.return=x,x=f}return l(x);case Ar:return k=p._init,A(x,f,k(p._payload),w)}if(bs(p))return y(x,f,p,w);if(us(p))return S(x,f,p,w);_i(x,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(r(x,f.sibling),f=s(f,p),f.return=x,x=f):(r(x,f),f=pl(p,x.mode,w),f.return=x,x=f),l(x)):r(x,f)}return A}var Xn=Oh(!0),$h=Oh(!1),sa=Qr(null),ia=null,Mn=null,ic=null;function ac(){ic=Mn=ia=null}function lc(e){var t=sa.current;Pe(sa),e._currentValue=t}function eo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Vn(e,t){ia=e,ic=Mn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_t=!0),e.firstContext=null)}function Wt(e){var t=e._currentValue;if(ic!==e)if(e={context:e,memoizedValue:t,next:null},Mn===null){if(ia===null)throw Error(D(308));Mn=e,ia.dependencies={lanes:0,firstContext:e}}else Mn=Mn.next=e;return t}var on=null;function oc(e){on===null?on=[e]:on.push(e)}function Ih(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,oc(t)):(r.next=s.next,s.next=r),t.interleaved=r,_r(e,n)}function _r(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Dr=!1;function cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ye&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,_r(e,r)}return s=n.interleaved,s===null?(t.next=t,oc(n)):(t.next=s.next,s.next=t),n.interleaved=t,_r(e,r)}function $i(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ko(e,r)}}function Su(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function aa(e,t,r,n){var s=e.updateQueue;Dr=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==l&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;l=0,d=u=c=null,o=a;do{var m=o.lane,g=o.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,S=o;switch(m=t,g=r,S.tag){case 1:if(y=S.payload,typeof y=="function"){h=y.call(g,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,m=typeof y=="function"?y.call(g,h,m):y,m==null)break e;h=Ue({},h,m);break e;case 2:Dr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,l|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);pn|=l,e.lanes=l,e.memoizedState=h}}function zu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(D(191,s));s.call(n)}}}var ai={},cr=Qr(ai),Vs=Qr(ai),Ks=Qr(ai);function cn(e){if(e===ai)throw Error(D(174));return e}function uc(e,t){switch(Ce(Ks,t),Ce(Vs,e),Ce(cr,ai),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Rl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Rl(t,e)}Pe(cr),Ce(cr,t)}function Zn(){Pe(cr),Pe(Vs),Pe(Ks)}function Mh(e){cn(Ks.current);var t=cn(cr.current),r=Rl(t,e.type);t!==r&&(Ce(Vs,e),Ce(cr,r))}function dc(e){Vs.current===e&&(Pe(cr),Pe(Vs))}var $e=Qr(0);function la(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cl=[];function hc(){for(var e=0;e<cl.length;e++)cl[e]._workInProgressVersionPrimary=null;cl.length=0}var Ii=Nr.ReactCurrentDispatcher,ul=Nr.ReactCurrentBatchConfig,mn=0,Ie=null,Ye=null,et=null,oa=!1,Cs=!1,Ys=0,y0=0;function ct(){throw Error(D(321))}function fc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!nr(e[r],t[r]))return!1;return!0}function mc(e,t,r,n,s,a){if(mn=a,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ii.current=e===null||e.memoizedState===null?k0:_0,e=r(n,s),Cs){a=0;do{if(Cs=!1,Ys=0,25<=a)throw Error(D(301));a+=1,et=Ye=null,t.updateQueue=null,Ii.current=j0,e=r(n,s)}while(Cs)}if(Ii.current=ca,t=Ye!==null&&Ye.next!==null,mn=0,et=Ye=Ie=null,oa=!1,t)throw Error(D(300));return e}function pc(){var e=Ys!==0;return Ys=0,e}function ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ie.memoizedState=et=e:et=et.next=e,et}function Gt(){if(Ye===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=et===null?Ie.memoizedState:et.next;if(t!==null)et=t,Ye=e;else{if(e===null)throw Error(D(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Ie.memoizedState=et=e:et=et.next=e}return et}function Qs(e,t){return typeof t=="function"?t(e):t}function dl(e){var t=Gt(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=Ye,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var o=l=null,c=null,u=a;do{var d=u.lane;if((mn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,Ie.lanes|=d,pn|=d}u=u.next}while(u!==null&&u!==a);c===null?l=n:c.next=o,nr(n,t.memoizedState)||(_t=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,Ie.lanes|=a,pn|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function hl(e){var t=Gt(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do a=e(a,l.action),l=l.next;while(l!==s);nr(a,t.memoizedState)||(_t=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Fh(){}function Bh(e,t){var r=Ie,n=Gt(),s=t(),a=!nr(n.memoizedState,s);if(a&&(n.memoizedState=s,_t=!0),n=n.queue,gc(Wh.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||et!==null&&et.memoizedState.tag&1){if(r.flags|=2048,Js(9,Hh.bind(null,r,n,s,t),void 0,null),tt===null)throw Error(D(349));mn&30||qh(r,t,s)}return s}function qh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Hh(e,t,r,n){t.value=r,t.getSnapshot=n,Gh(t)&&Vh(e)}function Wh(e,t,r){return r(function(){Gh(t)&&Vh(e)})}function Gh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!nr(e,r)}catch{return!0}}function Vh(e){var t=_r(e,1);t!==null&&rr(t,e,1,-1)}function Eu(e){var t=ir();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},t.queue=e,e=e.dispatch=w0.bind(null,Ie,e),[t.memoizedState,e]}function Js(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Kh(){return Gt().memoizedState}function Ui(e,t,r,n){var s=ir();Ie.flags|=e,s.memoizedState=Js(1|t,r,void 0,n===void 0?null:n)}function Ta(e,t,r,n){var s=Gt();n=n===void 0?null:n;var a=void 0;if(Ye!==null){var l=Ye.memoizedState;if(a=l.destroy,n!==null&&fc(n,l.deps)){s.memoizedState=Js(t,r,a,n);return}}Ie.flags|=e,s.memoizedState=Js(1|t,r,a,n)}function Cu(e,t){return Ui(8390656,8,e,t)}function gc(e,t){return Ta(2048,8,e,t)}function Yh(e,t){return Ta(4,2,e,t)}function Qh(e,t){return Ta(4,4,e,t)}function Jh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xh(e,t,r){return r=r!=null?r.concat([e]):null,Ta(4,4,Jh.bind(null,t,e),r)}function xc(){}function Zh(e,t){var r=Gt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ef(e,t){var r=Gt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function tf(e,t,r){return mn&21?(nr(r,t)||(r=ah(),Ie.lanes|=r,pn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_t=!0),e.memoizedState=r)}function v0(e,t){var r=_e;_e=r!==0&&4>r?r:4,e(!0);var n=ul.transition;ul.transition={};try{e(!1),t()}finally{_e=r,ul.transition=n}}function rf(){return Gt().memoizedState}function b0(e,t,r){var n=Wr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},nf(e))sf(t,r);else if(r=Ih(e,t,r,n),r!==null){var s=xt();rr(r,e,n,s),af(r,t,n)}}function w0(e,t,r){var n=Wr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(nf(e))sf(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(s.hasEagerState=!0,s.eagerState=o,nr(o,l)){var c=t.interleaved;c===null?(s.next=s,oc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Ih(e,t,s,n),r!==null&&(s=xt(),rr(r,e,n,s),af(r,t,n))}}function nf(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function sf(e,t){Cs=oa=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function af(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ko(e,r)}}var ca={readContext:Wt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},k0={readContext:Wt,useCallback:function(e,t){return ir().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:Cu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ui(4194308,4,Jh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ui(4,2,e,t)},useMemo:function(e,t){var r=ir();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ir();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=b0.bind(null,Ie,e),[n.memoizedState,e]},useRef:function(e){var t=ir();return e={current:e},t.memoizedState=e},useState:Eu,useDebugValue:xc,useDeferredValue:function(e){return ir().memoizedState=e},useTransition:function(){var e=Eu(!1),t=e[0];return e=v0.bind(null,e[1]),ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ie,s=ir();if(Le){if(r===void 0)throw Error(D(407));r=r()}else{if(r=t(),tt===null)throw Error(D(349));mn&30||qh(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Cu(Wh.bind(null,n,a,e),[e]),n.flags|=2048,Js(9,Hh.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ir(),t=tt.identifierPrefix;if(Le){var r=xr,n=gr;r=(n&~(1<<32-tr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ys++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=y0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_0={readContext:Wt,useCallback:Zh,useContext:Wt,useEffect:gc,useImperativeHandle:Xh,useInsertionEffect:Yh,useLayoutEffect:Qh,useMemo:ef,useReducer:dl,useRef:Kh,useState:function(){return dl(Qs)},useDebugValue:xc,useDeferredValue:function(e){var t=Gt();return tf(t,Ye.memoizedState,e)},useTransition:function(){var e=dl(Qs)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Fh,useSyncExternalStore:Bh,useId:rf,unstable_isNewReconciler:!1},j0={readContext:Wt,useCallback:Zh,useContext:Wt,useEffect:gc,useImperativeHandle:Xh,useInsertionEffect:Yh,useLayoutEffect:Qh,useMemo:ef,useReducer:hl,useRef:Kh,useState:function(){return hl(Qs)},useDebugValue:xc,useDeferredValue:function(e){var t=Gt();return Ye===null?t.memoizedState=e:tf(t,Ye.memoizedState,e)},useTransition:function(){var e=hl(Qs)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Fh,useSyncExternalStore:Bh,useId:rf,unstable_isNewReconciler:!1};function Jt(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function to(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ue({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Pa={isMounted:function(e){return(e=e._reactInternals)?vn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xt(),s=Wr(e),a=yr(n,s);a.payload=t,r!=null&&(a.callback=r),t=qr(e,a,s),t!==null&&(rr(t,e,s,n),$i(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xt(),s=Wr(e),a=yr(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=qr(e,a,s),t!==null&&(rr(t,e,s,n),$i(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xt(),n=Wr(e),s=yr(r,n);s.tag=2,t!=null&&(s.callback=t),t=qr(e,s,n),t!==null&&(rr(t,e,n,r),$i(t,e,n))}};function Tu(e,t,r,n,s,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!qs(r,n)||!qs(s,a):!0}function lf(e,t,r){var n=!1,s=Kr,a=t.contextType;return typeof a=="object"&&a!==null?a=Wt(a):(s=Nt(t)?hn:ht.current,n=t.contextTypes,a=(n=n!=null)?Qn(e,s):Kr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pa,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Pu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Pa.enqueueReplaceState(t,t.state,null)}function ro(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},cc(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Wt(a):(a=Nt(t)?hn:ht.current,s.context=Qn(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(to(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Pa.enqueueReplaceState(s,s.state,null),aa(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function es(e,t){try{var r="",n=t;do r+=Xm(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function fl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function no(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var N0=typeof WeakMap=="function"?WeakMap:Map;function of(e,t,r){r=yr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){da||(da=!0,mo=n),no(e,t)},r}function cf(e,t,r){r=yr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){no(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){no(e,t),typeof n!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Au(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new N0;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=U0.bind(null,e,t,r),t.then(e,e))}function Du(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ru(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=yr(-1,1),t.tag=2,qr(r,t,1))),r.lanes|=1),e)}var S0=Nr.ReactCurrentOwner,_t=!1;function gt(e,t,r,n){t.child=e===null?$h(t,null,r,n):Xn(t,e.child,r,n)}function Lu(e,t,r,n,s){r=r.render;var a=t.ref;return Vn(t,s),n=mc(e,t,r,n,a,s),r=pc(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jr(e,t,s)):(Le&&r&&rc(t),t.flags|=1,gt(e,t,n,s),t.child)}function Ou(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!Nc(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,uf(e,t,a,n,s)):(e=qi(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:qs,r(l,n)&&e.ref===t.ref)return jr(e,t,s)}return t.flags|=1,e=Gr(a,n),e.ref=t.ref,e.return=t,t.child=e}function uf(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(qs(a,n)&&e.ref===t.ref)if(_t=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(_t=!0);else return t.lanes=e.lanes,jr(e,t,s)}return so(e,t,r,n,s)}function df(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Bn,Tt),Tt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(Bn,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ce(Bn,Tt),Tt|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ce(Bn,Tt),Tt|=n;return gt(e,t,s,r),t.child}function hf(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function so(e,t,r,n,s){var a=Nt(r)?hn:ht.current;return a=Qn(t,a),Vn(t,s),r=mc(e,t,r,n,a,s),n=pc(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jr(e,t,s)):(Le&&n&&rc(t),t.flags|=1,gt(e,t,r,s),t.child)}function $u(e,t,r,n,s){if(Nt(r)){var a=!0;ta(t)}else a=!1;if(Vn(t,s),t.stateNode===null)Mi(e,t),lf(t,r,n),ro(t,r,n,s),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=Wt(u):(u=Nt(r)?hn:ht.current,u=Qn(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Pu(t,l,n,u),Dr=!1;var m=t.memoizedState;l.state=m,aa(t,n,l,s),c=t.memoizedState,o!==n||m!==c||jt.current||Dr?(typeof d=="function"&&(to(t,r,d,n),c=t.memoizedState),(o=Dr||Tu(t,r,o,n,m,c,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=u,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Uh(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Jt(t.type,o),l.props=u,h=t.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Wt(c):(c=Nt(r)?hn:ht.current,c=Qn(t,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||m!==c)&&Pu(t,l,n,c),Dr=!1,m=t.memoizedState,l.state=m,aa(t,n,l,s);var y=t.memoizedState;o!==h||m!==y||jt.current||Dr?(typeof g=="function"&&(to(t,r,g,n),y=t.memoizedState),(u=Dr||Tu(t,r,u,n,m,y,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),l.props=n,l.state=y,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return io(e,t,r,n,a,s)}function io(e,t,r,n,s,a){hf(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return s&&ku(t,r,!1),jr(e,t,a);n=t.stateNode,S0.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=Xn(t,e.child,null,a),t.child=Xn(t,null,o,a)):gt(e,t,o,a),t.memoizedState=n.state,s&&ku(t,r,!0),t.child}function ff(e){var t=e.stateNode;t.pendingContext?wu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wu(e,t.context,!1),uc(e,t.containerInfo)}function Iu(e,t,r,n,s){return Jn(),sc(s),t.flags|=256,gt(e,t,r,n),t.child}var ao={dehydrated:null,treeContext:null,retryLane:0};function lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function mf(e,t,r){var n=t.pendingProps,s=$e.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ce($e,s&1),e===null)return Zl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Ra(l,n,0,null),e=dn(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=lo(r),t.memoizedState=ao,e):yc(t,l));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return z0(e,t,l,n,o,s,r);if(a){a=n.fallback,l=t.mode,s=e.child,o=s.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Gr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?a=Gr(o,a):(a=dn(a,l,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=e.child.memoizedState,l=l===null?lo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=ao,n}return a=e.child,e=a.sibling,n=Gr(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function yc(e,t){return t=Ra({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ji(e,t,r,n){return n!==null&&sc(n),Xn(t,e.child,null,r),e=yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function z0(e,t,r,n,s,a,l){if(r)return t.flags&256?(t.flags&=-257,n=fl(Error(D(422))),ji(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Ra({mode:"visible",children:n.children},s,0,null),a=dn(a,s,l,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Xn(t,e.child,null,l),t.child.memoizedState=lo(l),t.memoizedState=ao,a);if(!(t.mode&1))return ji(e,t,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(D(419)),n=fl(a,n,void 0),ji(e,t,l,n)}if(o=(l&e.childLanes)!==0,_t||o){if(n=tt,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,_r(e,s),rr(n,e,s,-1))}return jc(),n=fl(Error(D(421))),ji(e,t,l,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=M0.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Pt=Br(s.nextSibling),At=t,Le=!0,er=null,e!==null&&(It[Ut++]=gr,It[Ut++]=xr,It[Ut++]=fn,gr=e.id,xr=e.overflow,fn=t),t=yc(t,n.children),t.flags|=4096,t)}function Uu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),eo(e.return,t,r)}function ml(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function pf(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(gt(e,t,n.children,r),n=$e.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uu(e,r,t);else if(e.tag===19)Uu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ce($e,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&la(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ml(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&la(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ml(t,!0,r,null,a);break;case"together":ml(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,r=Gr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Gr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function E0(e,t,r){switch(t.tag){case 3:ff(t),Jn();break;case 5:Mh(t);break;case 1:Nt(t.type)&&ta(t);break;case 4:uc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ce(sa,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ce($e,$e.current&1),t.flags|=128,null):r&t.child.childLanes?mf(e,t,r):(Ce($e,$e.current&1),e=jr(e,t,r),e!==null?e.sibling:null);Ce($e,$e.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return pf(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce($e,$e.current),n)break;return null;case 22:case 23:return t.lanes=0,df(e,t,r)}return jr(e,t,r)}var gf,oo,xf,yf;gf=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};oo=function(){};xf=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,cn(cr.current);var a=null;switch(r){case"input":s=Tl(e,s),n=Tl(e,n),a=[];break;case"select":s=Ue({},s,{value:void 0}),n=Ue({},n,{value:void 0}),a=[];break;case"textarea":s=Dl(e,s),n=Dl(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Zi)}Ll(r,n);var l;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Os.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Os.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Te("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};yf=function(e,t,r,n){r!==n&&(t.flags|=4)};function gs(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function C0(e,t,r){var n=t.pendingProps;switch(nc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Nt(t.type)&&ea(),ut(t),null;case 3:return n=t.stateNode,Zn(),Pe(jt),Pe(ht),hc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ki(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,er!==null&&(xo(er),er=null))),oo(e,t),ut(t),null;case 5:dc(t);var s=cn(Ks.current);if(r=t.type,e!==null&&t.stateNode!=null)xf(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(D(166));return ut(t),null}if(e=cn(cr.current),ki(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[lr]=t,n[Gs]=a,e=(t.mode&1)!==0,r){case"dialog":Te("cancel",n),Te("close",n);break;case"iframe":case"object":case"embed":Te("load",n);break;case"video":case"audio":for(s=0;s<ks.length;s++)Te(ks[s],n);break;case"source":Te("error",n);break;case"img":case"image":case"link":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"input":Kc(n,a),Te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Te("invalid",n);break;case"textarea":Qc(n,a),Te("invalid",n)}Ll(r,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&wi(n.textContent,o,e),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&wi(n.textContent,o,e),s=["children",""+o]):Os.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Te("scroll",n)}switch(r){case"input":fi(n),Yc(n,a,!0);break;case"textarea":fi(n),Jc(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Zi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[lr]=t,e[Gs]=n,gf(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ol(r,n),r){case"dialog":Te("cancel",e),Te("close",e),s=n;break;case"iframe":case"object":case"embed":Te("load",e),s=n;break;case"video":case"audio":for(s=0;s<ks.length;s++)Te(ks[s],e);s=n;break;case"source":Te("error",e),s=n;break;case"img":case"image":case"link":Te("error",e),Te("load",e),s=n;break;case"details":Te("toggle",e),s=n;break;case"input":Kc(e,n),s=Tl(e,n),Te("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ue({},n,{value:void 0}),Te("invalid",e);break;case"textarea":Qc(e,n),s=Dl(e,n),Te("invalid",e);break;default:s=n}Ll(r,s),o=s;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Kd(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Gd(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&$s(e,c):typeof c=="number"&&$s(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Os.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Te("scroll",e):c!=null&&Bo(e,a,c,l))}switch(r){case"input":fi(e),Yc(e,n,!1);break;case"textarea":fi(e),Jc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vr(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?qn(e,!!n.multiple,a,!1):n.defaultValue!=null&&qn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Zi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)yf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(D(166));if(r=cn(Ks.current),cn(cr.current),ki(t)){if(n=t.stateNode,r=t.memoizedProps,n[lr]=t,(a=n.nodeValue!==r)&&(e=At,e!==null))switch(e.tag){case 3:wi(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wi(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[lr]=t,t.stateNode=n}return ut(t),null;case 13:if(Pe($e),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&Pt!==null&&t.mode&1&&!(t.flags&128))Lh(),Jn(),t.flags|=98560,a=!1;else if(a=ki(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(D(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(D(317));a[lr]=t}else Jn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),a=!1}else er!==null&&(xo(er),er=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||$e.current&1?Je===0&&(Je=3):jc())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return Zn(),oo(e,t),e===null&&Hs(t.stateNode.containerInfo),ut(t),null;case 10:return lc(t.type._context),ut(t),null;case 17:return Nt(t.type)&&ea(),ut(t),null;case 19:if(Pe($e),a=t.memoizedState,a===null)return ut(t),null;if(n=(t.flags&128)!==0,l=a.rendering,l===null)if(n)gs(a,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=la(e),l!==null){for(t.flags|=128,gs(a,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ce($e,$e.current&1|2),t.child}e=e.sibling}a.tail!==null&&Fe()>ts&&(t.flags|=128,n=!0,gs(a,!1),t.lanes=4194304)}else{if(!n)if(e=la(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),gs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Le)return ut(t),null}else 2*Fe()-a.renderingStartTime>ts&&r!==1073741824&&(t.flags|=128,n=!0,gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Fe(),t.sibling=null,r=$e.current,Ce($e,n?r&1|2:r&1),t):(ut(t),null);case 22:case 23:return _c(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Tt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function T0(e,t){switch(nc(t),t.tag){case 1:return Nt(t.type)&&ea(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zn(),Pe(jt),Pe(ht),hc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dc(t),null;case 13:if(Pe($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Jn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe($e),null;case 4:return Zn(),null;case 10:return lc(t.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var Ni=!1,dt=!1,P0=typeof WeakSet=="function"?WeakSet:Set,H=null;function Fn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Me(e,t,n)}else r.current=null}function co(e,t,r){try{r()}catch(n){Me(e,t,n)}}var Mu=!1;function A0(e,t){if(Gl=Qi,e=kh(),tc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var g;h!==r||s!==0&&h.nodeType!==3||(o=l+s),h!==a||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===r&&++u===s&&(o=l),m===a&&++d===n&&(c=l),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vl={focusedElem:e,selectionRange:r},Qi=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,A=y.memoizedState,x=t.stateNode,f=x.getSnapshotBeforeUpdate(t.elementType===t.type?S:Jt(t.type,S),A);x.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(w){Me(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return y=Mu,Mu=!1,y}function Ts(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&co(t,r,a)}s=s.next}while(s!==n)}}function Aa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function uo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function vf(e){var t=e.alternate;t!==null&&(e.alternate=null,vf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lr],delete t[Gs],delete t[Ql],delete t[m0],delete t[p0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bf(e){return e.tag===5||e.tag===3||e.tag===4}function Fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ho(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zi));else if(n!==4&&(e=e.child,e!==null))for(ho(e,t,r),e=e.sibling;e!==null;)ho(e,t,r),e=e.sibling}function fo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(fo(e,t,r),e=e.sibling;e!==null;)fo(e,t,r),e=e.sibling}var nt=null,Xt=!1;function Cr(e,t,r){for(r=r.child;r!==null;)wf(e,t,r),r=r.sibling}function wf(e,t,r){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(ja,r)}catch{}switch(r.tag){case 5:dt||Fn(r,t);case 6:var n=nt,s=Xt;nt=null,Cr(e,t,r),nt=n,Xt=s,nt!==null&&(Xt?(e=nt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):nt.removeChild(r.stateNode));break;case 18:nt!==null&&(Xt?(e=nt,r=r.stateNode,e.nodeType===8?ll(e.parentNode,r):e.nodeType===1&&ll(e,r),Fs(e)):ll(nt,r.stateNode));break;case 4:n=nt,s=Xt,nt=r.stateNode.containerInfo,Xt=!0,Cr(e,t,r),nt=n,Xt=s;break;case 0:case 11:case 14:case 15:if(!dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&co(r,t,l),s=s.next}while(s!==n)}Cr(e,t,r);break;case 1:if(!dt&&(Fn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Me(r,t,o)}Cr(e,t,r);break;case 21:Cr(e,t,r);break;case 22:r.mode&1?(dt=(n=dt)||r.memoizedState!==null,Cr(e,t,r),dt=n):Cr(e,t,r);break;default:Cr(e,t,r)}}function Bu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new P0),t.forEach(function(n){var s=F0.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Yt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:nt=o.stateNode,Xt=!1;break e;case 3:nt=o.stateNode.containerInfo,Xt=!0;break e;case 4:nt=o.stateNode.containerInfo,Xt=!0;break e}o=o.return}if(nt===null)throw Error(D(160));wf(a,l,s),nt=null,Xt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Me(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}function kf(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),sr(e),n&4){try{Ts(3,e,e.return),Aa(3,e)}catch(S){Me(e,e.return,S)}try{Ts(5,e,e.return)}catch(S){Me(e,e.return,S)}}break;case 1:Yt(t,e),sr(e),n&512&&r!==null&&Fn(r,r.return);break;case 5:if(Yt(t,e),sr(e),n&512&&r!==null&&Fn(r,r.return),e.flags&32){var s=e.stateNode;try{$s(s,"")}catch(S){Me(e,e.return,S)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&qd(s,a),Ol(o,l);var u=Ol(o,a);for(l=0;l<c.length;l+=2){var d=c[l],h=c[l+1];d==="style"?Kd(s,h):d==="dangerouslySetInnerHTML"?Gd(s,h):d==="children"?$s(s,h):Bo(s,d,h,u)}switch(o){case"input":Pl(s,a);break;case"textarea":Hd(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?qn(s,!!a.multiple,g,!1):m!==!!a.multiple&&(a.defaultValue!=null?qn(s,!!a.multiple,a.defaultValue,!0):qn(s,!!a.multiple,a.multiple?[]:"",!1))}s[Gs]=a}catch(S){Me(e,e.return,S)}}break;case 6:if(Yt(t,e),sr(e),n&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(S){Me(e,e.return,S)}}break;case 3:if(Yt(t,e),sr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Fs(t.containerInfo)}catch(S){Me(e,e.return,S)}break;case 4:Yt(t,e),sr(e);break;case 13:Yt(t,e),sr(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(wc=Fe())),n&4&&Bu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(dt=(u=dt)||d,Yt(t,e),dt=u):Yt(t,e),sr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(H=e,d=e.child;d!==null;){for(h=H=d;H!==null;){switch(m=H,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ts(4,m,m.return);break;case 1:Fn(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(S){Me(n,r,S)}}break;case 5:Fn(m,m.return);break;case 22:if(m.memoizedState!==null){Hu(h);continue}}g!==null?(g.return=m,H=g):Hu(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Vd("display",l))}catch(S){Me(e,e.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(S){Me(e,e.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yt(t,e),sr(e),n&4&&Bu(e);break;case 21:break;default:Yt(t,e),sr(e)}}function sr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(bf(r)){var n=r;break e}r=r.return}throw Error(D(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&($s(s,""),n.flags&=-33);var a=Fu(e);fo(e,a,s);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Fu(e);ho(e,o,l);break;default:throw Error(D(161))}}catch(c){Me(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function D0(e,t,r){H=e,_f(e)}function _f(e,t,r){for(var n=(e.mode&1)!==0;H!==null;){var s=H,a=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||Ni;if(!l){var o=s.alternate,c=o!==null&&o.memoizedState!==null||dt;o=Ni;var u=dt;if(Ni=l,(dt=c)&&!u)for(H=s;H!==null;)l=H,c=l.child,l.tag===22&&l.memoizedState!==null?Wu(s):c!==null?(c.return=l,H=c):Wu(s);for(;a!==null;)H=a,_f(a),a=a.sibling;H=s,Ni=o,dt=u}qu(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,H=a):qu(e)}}function qu(e){for(;H!==null;){var t=H;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||Aa(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Jt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&zu(t,a,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}zu(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}dt||t.flags&512&&uo(t)}catch(m){Me(t,t.return,m)}}if(t===e){H=null;break}if(r=t.sibling,r!==null){r.return=t.return,H=r;break}H=t.return}}function Hu(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var r=t.sibling;if(r!==null){r.return=t.return,H=r;break}H=t.return}}function Wu(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Aa(4,t)}catch(c){Me(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Me(t,s,c)}}var a=t.return;try{uo(t)}catch(c){Me(t,a,c)}break;case 5:var l=t.return;try{uo(t)}catch(c){Me(t,l,c)}}}catch(c){Me(t,t.return,c)}if(t===e){H=null;break}var o=t.sibling;if(o!==null){o.return=t.return,H=o;break}H=t.return}}var R0=Math.ceil,ua=Nr.ReactCurrentDispatcher,vc=Nr.ReactCurrentOwner,Ft=Nr.ReactCurrentBatchConfig,ye=0,tt=null,He=null,it=0,Tt=0,Bn=Qr(0),Je=0,Xs=null,pn=0,Da=0,bc=0,Ps=null,wt=null,wc=0,ts=1/0,fr=null,da=!1,mo=null,Hr=null,Si=!1,Ir=null,ha=0,As=0,po=null,Fi=-1,Bi=0;function xt(){return ye&6?Fe():Fi!==-1?Fi:Fi=Fe()}function Wr(e){return e.mode&1?ye&2&&it!==0?it&-it:x0.transition!==null?(Bi===0&&(Bi=ah()),Bi):(e=_e,e!==0||(e=window.event,e=e===void 0?16:fh(e.type)),e):1}function rr(e,t,r,n){if(50<As)throw As=0,po=null,Error(D(185));ni(e,r,n),(!(ye&2)||e!==tt)&&(e===tt&&(!(ye&2)&&(Da|=r),Je===4&&Lr(e,it)),St(e,n),r===1&&ye===0&&!(t.mode&1)&&(ts=Fe()+500,Ca&&Jr()))}function St(e,t){var r=e.callbackNode;xp(e,t);var n=Yi(e,e===tt?it:0);if(n===0)r!==null&&eu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&eu(r),t===1)e.tag===0?g0(Gu.bind(null,e)):Ah(Gu.bind(null,e)),h0(function(){!(ye&6)&&Jr()}),r=null;else{switch(lh(n)){case 1:r=Vo;break;case 4:r=sh;break;case 16:r=Ki;break;case 536870912:r=ih;break;default:r=Ki}r=Pf(r,jf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function jf(e,t){if(Fi=-1,Bi=0,ye&6)throw Error(D(327));var r=e.callbackNode;if(Kn()&&e.callbackNode!==r)return null;var n=Yi(e,e===tt?it:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=fa(e,n);else{t=n;var s=ye;ye|=2;var a=Sf();(tt!==e||it!==t)&&(fr=null,ts=Fe()+500,un(e,t));do try{$0();break}catch(o){Nf(e,o)}while(!0);ac(),ua.current=a,ye=s,He!==null?t=0:(tt=null,it=0,t=Je)}if(t!==0){if(t===2&&(s=Fl(e),s!==0&&(n=s,t=go(e,s))),t===1)throw r=Xs,un(e,0),Lr(e,n),St(e,Fe()),r;if(t===6)Lr(e,n);else{if(s=e.current.alternate,!(n&30)&&!L0(s)&&(t=fa(e,n),t===2&&(a=Fl(e),a!==0&&(n=a,t=go(e,a))),t===1))throw r=Xs,un(e,0),Lr(e,n),St(e,Fe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(D(345));case 2:nn(e,wt,fr);break;case 3:if(Lr(e,n),(n&130023424)===n&&(t=wc+500-Fe(),10<t)){if(Yi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){xt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yl(nn.bind(null,e,wt,fr),t);break}nn(e,wt,fr);break;case 4:if(Lr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-tr(n);a=1<<l,l=t[l],l>s&&(s=l),n&=~a}if(n=s,n=Fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*R0(n/1960))-n,10<n){e.timeoutHandle=Yl(nn.bind(null,e,wt,fr),n);break}nn(e,wt,fr);break;case 5:nn(e,wt,fr);break;default:throw Error(D(329))}}}return St(e,Fe()),e.callbackNode===r?jf.bind(null,e):null}function go(e,t){var r=Ps;return e.current.memoizedState.isDehydrated&&(un(e,t).flags|=256),e=fa(e,t),e!==2&&(t=wt,wt=r,t!==null&&xo(t)),e}function xo(e){wt===null?wt=e:wt.push.apply(wt,e)}function L0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!nr(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lr(e,t){for(t&=~bc,t&=~Da,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tr(t),n=1<<r;e[r]=-1,t&=~n}}function Gu(e){if(ye&6)throw Error(D(327));Kn();var t=Yi(e,0);if(!(t&1))return St(e,Fe()),null;var r=fa(e,t);if(e.tag!==0&&r===2){var n=Fl(e);n!==0&&(t=n,r=go(e,n))}if(r===1)throw r=Xs,un(e,0),Lr(e,t),St(e,Fe()),r;if(r===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nn(e,wt,fr),St(e,Fe()),null}function kc(e,t){var r=ye;ye|=1;try{return e(t)}finally{ye=r,ye===0&&(ts=Fe()+500,Ca&&Jr())}}function gn(e){Ir!==null&&Ir.tag===0&&!(ye&6)&&Kn();var t=ye;ye|=1;var r=Ft.transition,n=_e;try{if(Ft.transition=null,_e=1,e)return e()}finally{_e=n,Ft.transition=r,ye=t,!(ye&6)&&Jr()}}function _c(){Tt=Bn.current,Pe(Bn)}function un(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,d0(r)),He!==null)for(r=He.return;r!==null;){var n=r;switch(nc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ea();break;case 3:Zn(),Pe(jt),Pe(ht),hc();break;case 5:dc(n);break;case 4:Zn();break;case 13:Pe($e);break;case 19:Pe($e);break;case 10:lc(n.type._context);break;case 22:case 23:_c()}r=r.return}if(tt=e,He=e=Gr(e.current,null),it=Tt=t,Je=0,Xs=null,bc=Da=pn=0,wt=Ps=null,on!==null){for(t=0;t<on.length;t++)if(r=on[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var l=a.next;a.next=s,n.next=l}r.pending=n}on=null}return e}function Nf(e,t){do{var r=He;try{if(ac(),Ii.current=ca,oa){for(var n=Ie.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}oa=!1}if(mn=0,et=Ye=Ie=null,Cs=!1,Ys=0,vc.current=null,r===null||r.return===null){Je=1,Xs=t,He=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=it,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Du(l);if(g!==null){g.flags&=-257,Ru(g,l,o,a,t),g.mode&1&&Au(a,u,t),t=g,c=u;var y=t.updateQueue;if(y===null){var S=new Set;S.add(c),t.updateQueue=S}else y.add(c);break e}else{if(!(t&1)){Au(a,u,t),jc();break e}c=Error(D(426))}}else if(Le&&o.mode&1){var A=Du(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ru(A,l,o,a,t),sc(es(c,o));break e}}a=c=es(c,o),Je!==4&&(Je=2),Ps===null?Ps=[a]:Ps.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=of(a,c,t);Su(a,x);break e;case 1:o=c;var f=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Hr===null||!Hr.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var w=cf(a,o,t);Su(a,w);break e}}a=a.return}while(a!==null)}Ef(r)}catch(C){t=C,He===r&&r!==null&&(He=r=r.return);continue}break}while(!0)}function Sf(){var e=ua.current;return ua.current=ca,e===null?ca:e}function jc(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||!(pn&268435455)&&!(Da&268435455)||Lr(tt,it)}function fa(e,t){var r=ye;ye|=2;var n=Sf();(tt!==e||it!==t)&&(fr=null,un(e,t));do try{O0();break}catch(s){Nf(e,s)}while(!0);if(ac(),ye=r,ua.current=n,He!==null)throw Error(D(261));return tt=null,it=0,Je}function O0(){for(;He!==null;)zf(He)}function $0(){for(;He!==null&&!op();)zf(He)}function zf(e){var t=Tf(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?Ef(e):He=t,vc.current=null}function Ef(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=T0(r,t),r!==null){r.flags&=32767,He=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,He=null;return}}else if(r=C0(r,t,Tt),r!==null){He=r;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);Je===0&&(Je=5)}function nn(e,t,r){var n=_e,s=Ft.transition;try{Ft.transition=null,_e=1,I0(e,t,r,n)}finally{Ft.transition=s,_e=n}return null}function I0(e,t,r,n){do Kn();while(Ir!==null);if(ye&6)throw Error(D(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(yp(e,a),e===tt&&(He=tt=null,it=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Si||(Si=!0,Pf(Ki,function(){return Kn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ft.transition,Ft.transition=null;var l=_e;_e=1;var o=ye;ye|=4,vc.current=null,A0(e,r),kf(r,e),s0(Vl),Qi=!!Gl,Vl=Gl=null,e.current=r,D0(r),cp(),ye=o,_e=l,Ft.transition=a}else e.current=r;if(Si&&(Si=!1,Ir=e,ha=s),a=e.pendingLanes,a===0&&(Hr=null),hp(r.stateNode),St(e,Fe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(da)throw da=!1,e=mo,mo=null,e;return ha&1&&e.tag!==0&&Kn(),a=e.pendingLanes,a&1?e===po?As++:(As=0,po=e):As=0,Jr(),null}function Kn(){if(Ir!==null){var e=lh(ha),t=Ft.transition,r=_e;try{if(Ft.transition=null,_e=16>e?16:e,Ir===null)var n=!1;else{if(e=Ir,Ir=null,ha=0,ye&6)throw Error(D(331));var s=ye;for(ye|=4,H=e.current;H!==null;){var a=H,l=a.child;if(H.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(H=u;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:Ts(8,d,a)}var h=d.child;if(h!==null)h.return=d,H=h;else for(;H!==null;){d=H;var m=d.sibling,g=d.return;if(vf(d),d===u){H=null;break}if(m!==null){m.return=g,H=m;break}H=g}}}var y=a.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var A=S.sibling;S.sibling=null,S=A}while(S!==null)}}H=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,H=l;else e:for(;H!==null;){if(a=H,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ts(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,H=x;break e}H=a.return}}var f=e.current;for(H=f;H!==null;){l=H;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,H=p;else e:for(l=f;H!==null;){if(o=H,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Aa(9,o)}}catch(C){Me(o,o.return,C)}if(o===l){H=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,H=w;break e}H=o.return}}if(ye=s,Jr(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(ja,e)}catch{}n=!0}return n}finally{_e=r,Ft.transition=t}}return!1}function Vu(e,t,r){t=es(r,t),t=of(e,t,1),e=qr(e,t,1),t=xt(),e!==null&&(ni(e,1,t),St(e,t))}function Me(e,t,r){if(e.tag===3)Vu(e,e,r);else for(;t!==null;){if(t.tag===3){Vu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hr===null||!Hr.has(n))){e=es(r,e),e=cf(t,e,1),t=qr(t,e,1),e=xt(),t!==null&&(ni(t,1,e),St(t,e));break}}t=t.return}}function U0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&r,tt===e&&(it&r)===r&&(Je===4||Je===3&&(it&130023424)===it&&500>Fe()-wc?un(e,0):bc|=r),St(e,t)}function Cf(e,t){t===0&&(e.mode&1?(t=gi,gi<<=1,!(gi&130023424)&&(gi=4194304)):t=1);var r=xt();e=_r(e,t),e!==null&&(ni(e,t,r),St(e,r))}function M0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Cf(e,r)}function F0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(D(314))}n!==null&&n.delete(t),Cf(e,r)}var Tf;Tf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)_t=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return _t=!1,E0(e,t,r);_t=!!(e.flags&131072)}else _t=!1,Le&&t.flags&1048576&&Dh(t,na,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Mi(e,t),e=t.pendingProps;var s=Qn(t,ht.current);Vn(t,r),s=mc(null,t,n,e,s,r);var a=pc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(n)?(a=!0,ta(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cc(t),s.updater=Pa,t.stateNode=s,s._reactInternals=t,ro(t,n,e,r),t=io(null,t,n,!0,a,r)):(t.tag=0,Le&&a&&rc(t),gt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Mi(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=q0(n),e=Jt(n,e),s){case 0:t=so(null,t,n,e,r);break e;case 1:t=$u(null,t,n,e,r);break e;case 11:t=Lu(null,t,n,e,r);break e;case 14:t=Ou(null,t,n,Jt(n.type,e),r);break e}throw Error(D(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Jt(n,s),so(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Jt(n,s),$u(e,t,n,s,r);case 3:e:{if(ff(t),e===null)throw Error(D(387));n=t.pendingProps,a=t.memoizedState,s=a.element,Uh(e,t),aa(t,n,null,r);var l=t.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=es(Error(D(423)),t),t=Iu(e,t,n,r,s);break e}else if(n!==s){s=es(Error(D(424)),t),t=Iu(e,t,n,r,s);break e}else for(Pt=Br(t.stateNode.containerInfo.firstChild),At=t,Le=!0,er=null,r=$h(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Jn(),n===s){t=jr(e,t,r);break e}gt(e,t,n,r)}t=t.child}return t;case 5:return Mh(t),e===null&&Zl(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,l=s.children,Kl(n,s)?l=null:a!==null&&Kl(n,a)&&(t.flags|=32),hf(e,t),gt(e,t,l,r),t.child;case 6:return e===null&&Zl(t),null;case 13:return mf(e,t,r);case 4:return uc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xn(t,null,n,r):gt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Jt(n,s),Lu(e,t,n,s,r);case 7:return gt(e,t,t.pendingProps,r),t.child;case 8:return gt(e,t,t.pendingProps.children,r),t.child;case 12:return gt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,l=s.value,Ce(sa,n._currentValue),n._currentValue=l,a!==null)if(nr(a.value,l)){if(a.children===s.children&&!jt.current){t=jr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=yr(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),eo(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(D(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),eo(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}gt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Vn(t,r),s=Wt(s),n=n(s),t.flags|=1,gt(e,t,n,r),t.child;case 14:return n=t.type,s=Jt(n,t.pendingProps),s=Jt(n.type,s),Ou(e,t,n,s,r);case 15:return uf(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Jt(n,s),Mi(e,t),t.tag=1,Nt(n)?(e=!0,ta(t)):e=!1,Vn(t,r),lf(t,n,s),ro(t,n,s,r),io(null,t,n,!0,e,r);case 19:return pf(e,t,r);case 22:return df(e,t,r)}throw Error(D(156,t.tag))};function Pf(e,t){return nh(e,t)}function B0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,r,n){return new B0(e,t,r,n)}function Nc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function q0(e){if(typeof e=="function")return Nc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ho)return 11;if(e===Wo)return 14}return 2}function Gr(e,t){var r=e.alternate;return r===null?(r=Mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function qi(e,t,r,n,s,a){var l=2;if(n=e,typeof e=="function")Nc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case An:return dn(r.children,s,a,t);case qo:l=8,s|=8;break;case Sl:return e=Mt(12,r,t,s|2),e.elementType=Sl,e.lanes=a,e;case zl:return e=Mt(13,r,t,s),e.elementType=zl,e.lanes=a,e;case El:return e=Mt(19,r,t,s),e.elementType=El,e.lanes=a,e;case Md:return Ra(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Id:l=10;break e;case Ud:l=9;break e;case Ho:l=11;break e;case Wo:l=14;break e;case Ar:l=16,n=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Mt(l,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function dn(e,t,r,n){return e=Mt(7,e,n,t),e.lanes=r,e}function Ra(e,t,r,n){return e=Mt(22,e,n,t),e.elementType=Md,e.lanes=r,e.stateNode={isHidden:!1},e}function pl(e,t,r){return e=Mt(6,e,null,t),e.lanes=r,e}function gl(e,t,r){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function H0(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qa(0),this.expirationTimes=Qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qa(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sc(e,t,r,n,s,a,l,o,c){return e=new H0(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Mt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(a),e}function W0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Af(e){if(!e)return Kr;e=e._reactInternals;e:{if(vn(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var r=e.type;if(Nt(r))return Ph(e,r,t)}return t}function Df(e,t,r,n,s,a,l,o,c){return e=Sc(r,n,!0,e,s,a,l,o,c),e.context=Af(null),r=e.current,n=xt(),s=Wr(r),a=yr(n,s),a.callback=t??null,qr(r,a,s),e.current.lanes=s,ni(e,s,n),St(e,n),e}function La(e,t,r,n){var s=t.current,a=xt(),l=Wr(s);return r=Af(r),t.context===null?t.context=r:t.pendingContext=r,t=yr(a,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=qr(s,t,l),e!==null&&(rr(e,s,l,a),$i(e,s,l)),l}function ma(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ku(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function zc(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}function G0(){return null}var Rf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ec(e){this._internalRoot=e}Oa.prototype.render=Ec.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));La(e,t,null,null)};Oa.prototype.unmount=Ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gn(function(){La(null,e,null,null)}),t[kr]=null}};function Oa(e){this._internalRoot=e}Oa.prototype.unstable_scheduleHydration=function(e){if(e){var t=uh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rr.length&&t!==0&&t<Rr[r].priority;r++);Rr.splice(r,0,e),r===0&&hh(e)}};function Cc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yu(){}function V0(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=ma(l);a.call(u)}}var l=Df(t,n,e,0,null,!1,!1,"",Yu);return e._reactRootContainer=l,e[kr]=l.current,Hs(e.nodeType===8?e.parentNode:e),gn(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var u=ma(c);o.call(u)}}var c=Sc(e,0,!1,null,null,!1,!1,"",Yu);return e._reactRootContainer=c,e[kr]=c.current,Hs(e.nodeType===8?e.parentNode:e),gn(function(){La(t,c,r,n)}),c}function Ia(e,t,r,n,s){var a=r._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var o=s;s=function(){var c=ma(l);o.call(c)}}La(t,l,e,s)}else l=V0(r,t,e,s,n);return ma(l)}oh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ws(t.pendingLanes);r!==0&&(Ko(t,r|1),St(t,Fe()),!(ye&6)&&(ts=Fe()+500,Jr()))}break;case 13:gn(function(){var n=_r(e,1);if(n!==null){var s=xt();rr(n,e,1,s)}}),zc(e,1)}};Yo=function(e){if(e.tag===13){var t=_r(e,134217728);if(t!==null){var r=xt();rr(t,e,134217728,r)}zc(e,134217728)}};ch=function(e){if(e.tag===13){var t=Wr(e),r=_r(e,t);if(r!==null){var n=xt();rr(r,e,t,n)}zc(e,t)}};uh=function(){return _e};dh=function(e,t){var r=_e;try{return _e=e,t()}finally{_e=r}};Il=function(e,t,r){switch(t){case"input":if(Pl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ea(n);if(!s)throw Error(D(90));Bd(n),Pl(n,s)}}}break;case"textarea":Hd(e,r);break;case"select":t=r.value,t!=null&&qn(e,!!r.multiple,t,!1)}};Jd=kc;Xd=gn;var K0={usingClientEntryPoint:!1,Events:[ii,On,Ea,Yd,Qd,kc]},xs={findFiberByHostInstance:ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y0={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=th(e),e===null?null:e.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||G0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zi.isDisabled&&zi.supportsFiber)try{ja=zi.inject(Y0),or=zi}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K0;Rt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cc(t))throw Error(D(200));return W0(e,t,null,r)};Rt.createRoot=function(e,t){if(!Cc(e))throw Error(D(299));var r=!1,n="",s=Rf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Sc(e,1,!1,null,null,r,!1,n,s),e[kr]=t.current,Hs(e.nodeType===8?e.parentNode:e),new Ec(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=th(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return gn(e)};Rt.hydrate=function(e,t,r){if(!$a(t))throw Error(D(200));return Ia(null,e,t,!0,r)};Rt.hydrateRoot=function(e,t,r){if(!Cc(e))throw Error(D(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",l=Rf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=Df(t,null,e,1,r??null,s,!1,a,l),e[kr]=t.current,Hs(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Oa(t)};Rt.render=function(e,t,r){if(!$a(t))throw Error(D(200));return Ia(null,e,t,!1,r)};Rt.unmountComponentAtNode=function(e){if(!$a(e))throw Error(D(40));return e._reactRootContainer?(gn(function(){Ia(null,null,e,!1,function(){e._reactRootContainer=null,e[kr]=null})}),!0):!1};Rt.unstable_batchedUpdates=kc;Rt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$a(r))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Ia(e,t,r,!1,n)};Rt.version="18.3.1-next-f1338f8080-20240426";function Lf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lf)}catch(e){console.error(e)}}Lf(),Rd.exports=Rt;var Q0=Rd.exports,Of,Qu=Q0;Of=Qu.createRoot,Qu.hydrateRoot;const J0="modulepreload",X0=function(e){return"/"+e},Ju={},li=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=X0(c),c in Ju)return;Ju[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":J0,u||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},Z0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>li(async()=>{const{default:n}=await Promise.resolve().then(()=>as);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Tc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class eg extends Tc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Xu extends Tc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Zu extends Tc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yo||(yo={}));var tg=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class rg{constructor(t,{headers:r={},customFetch:n,region:s=yo.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Z0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return tg(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:l}=r;let o={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(o["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(o["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(o["Content-Type"]="application/json",d=JSON.stringify(l)));const h=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:d}).catch(S=>{throw new eg(S)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new Xu(h);if(!h.ok)throw new Zu(h);let g=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield h.json():g==="application/octet-stream"?y=yield h.blob():g==="text/event-stream"?y=h:g==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Zu||s instanceof Xu?s.context:void 0}}})}}var kt={},Pc={},Ua={},oi={},Ma={},Fa={},ng=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rs=ng();const sg=rs.fetch,$f=rs.fetch.bind(rs),If=rs.Headers,ig=rs.Request,ag=rs.Response,as=Object.freeze(Object.defineProperty({__proto__:null,Headers:If,Request:ig,Response:ag,default:$f,fetch:sg},Symbol.toStringTag,{value:"Module"})),lg=_m(as);var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});let og=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ba.default=og;var Uf=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fa,"__esModule",{value:!0});const cg=Uf(lg),ug=Uf(Ba);let dg=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=cg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,o,c,u;let d=null,h=null,m=null,g=a.status,y=a.statusText;if(a.ok){if(this.method!=="HEAD"){const f=await a.text();f===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?h=f:h=JSON.parse(f))}const A=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");A&&x&&x.length>1&&(m=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,g=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const A=await a.text();try{d=JSON.parse(A),Array.isArray(d)&&a.status===404&&(h=[],d=null,g=200,y="OK")}catch{a.status===404&&A===""?(g=204,y="No Content"):d={message:A}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,y="OK"),d&&this.shouldThrowOnError)throw new ug.default(d)}return{error:d,data:h,count:m,status:g,statusText:y}});return this.shouldThrowOnError||(s=s.catch(a=>{var l,o,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Fa.default=dg;var hg=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ma,"__esModule",{value:!0});const fg=hg(Fa);let mg=class extends fg.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${u}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ma.default=mg;var pg=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oi,"__esModule",{value:!0});const gg=pg(Ma);let xg=class extends gg.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};oi.default=xg;var yg=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ua,"__esModule",{value:!0});const ys=yg(oi);let vg=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new ys.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new ys.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ys.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new ys.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ys.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ua.default=vg;var Mf=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pc,"__esModule",{value:!0});const bg=Mf(Ua),wg=Mf(oi);let kg=class Ff{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new bg.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ff(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){var l;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(o="POST",u=r);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new wg.default({method:o,url:c,headers:d,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Pc.default=kg;var ls=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kt,"__esModule",{value:!0});kt.PostgrestError=kt.PostgrestBuilder=kt.PostgrestTransformBuilder=kt.PostgrestFilterBuilder=kt.PostgrestQueryBuilder=kt.PostgrestClient=void 0;const Bf=ls(Pc);kt.PostgrestClient=Bf.default;const qf=ls(Ua);kt.PostgrestQueryBuilder=qf.default;const Hf=ls(oi);kt.PostgrestFilterBuilder=Hf.default;const Wf=ls(Ma);kt.PostgrestTransformBuilder=Wf.default;const Gf=ls(Fa);kt.PostgrestBuilder=Gf.default;const Vf=ls(Ba);kt.PostgrestError=Vf.default;var _g=kt.default={PostgrestClient:Bf.default,PostgrestQueryBuilder:qf.default,PostgrestFilterBuilder:Hf.default,PostgrestTransformBuilder:Wf.default,PostgrestBuilder:Gf.default,PostgrestError:Vf.default};const{PostgrestClient:jg,PostgrestQueryBuilder:Nv,PostgrestFilterBuilder:Sv,PostgrestTransformBuilder:zv,PostgrestBuilder:Ev,PostgrestError:Cv}=_g;class Ng{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Sg="2.15.5",zg=`realtime-js/${Sg}`,Eg="1.0.0",vo=1e4,Cg=1e3,Tg=100;var Ds;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ds||(Ds={}));var Ve;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ve||(Ve={}));var Zt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Zt||(Zt={}));var bo;(function(e){e.websocket="websocket"})(bo||(bo={}));var an;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(an||(an={}));class Pg{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+s));l=l+s;const c=n.decode(t.slice(l,l+a));l=l+a;const u=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class Kf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ee||(Ee={}));const ed=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,l)=>(a[l]=Ag(l,e,t,s),a),{})},Ag=(e,t,r,n)=>{const s=t.find(o=>o.name===e),a=s==null?void 0:s.type,l=r[e];return a&&!n.includes(a)?Yf(a,l):wo(l)},Yf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Og(t,r)}switch(e){case Ee.bool:return Dg(t);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return Rg(t);case Ee.json:case Ee.jsonb:return Lg(t);case Ee.timestamp:return $g(t);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return wo(t);default:return wo(t)}},wo=e=>e,Dg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Rg=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Lg=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Og=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>Yf(t,o))}return e},$g=e=>typeof e=="string"?e.replace(" ","T"):e,Qf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class xl{constructor(t,r,n={},s=vo){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var td;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(td||(td={}));class Rs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rs.syncState(this.state,s,a,l),this.pendingDiffs.forEach(c=>{this.state=Rs.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Rs.syncDiff(this.state,s,a,l),o())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(a,(u,d)=>{l[u]||(c[u]=d)}),this.map(l,(u,d)=>{const h=a[u];if(h){const m=d.map(A=>A.presence_ref),g=h.map(A=>A.presence_ref),y=d.filter(A=>g.indexOf(A.presence_ref)<0),S=h.filter(A=>m.indexOf(A.presence_ref)<0);y.length>0&&(o[u]=y),S.length>0&&(c[u]=S)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const h=t[o].map(g=>g.presence_ref),m=d.filter(g=>h.indexOf(g.presence_ref)<0);t[o].unshift(...m)}n(o,d,c)}),this.map(l,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[o]=u,s(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rd;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(rd||(rd={}));var Ls;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ls||(Ls={}));var mr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mr||(mr={}));class Ac{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xl(this,Zt.join,this.params,this.timeout),this.rejoinTimer=new Kf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Rs(this),this.broadcastEndpointURL=Qf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ls.PRESENCE]&&this.bindings[Ls.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},m={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(mr.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(mr.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket.setAuth(),g===void 0){t==null||t(mr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,A=(y=S==null?void 0:S.length)!==null&&y!==void 0?y:0,x=[];for(let f=0;f<A;f++){const p=S[f],{filter:{event:w,schema:C,table:k,filter:v}}=p,j=g&&g[f];if(j&&j.event===w&&j.schema===C&&j.table===k&&j.filter===v)x.push(Object.assign(Object.assign({},p),{id:j.id}));else{this.unsubscribe(),this.state=Ve.errored,t==null||t(mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(mr.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ve.errored,t==null||t(mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ve.joined&&t===Ls.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ve.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new xl(this,Zt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new xl(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Tg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=Zt;if(n&&[o,c,u,d].indexOf(l)>=0&&n!==this._joinRef())return;let m=this._onMessage(l,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var y,S,A;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((A=(S=g.filter)===null||S===void 0?void 0:S.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===l}).map(g=>g.callback(m,n)):(a=this.bindings[l])===null||a===void 0||a.filter(g=>{var y,S,A,x,f,p;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in g){const w=g.id,C=(y=g.filter)===null||y===void 0?void 0:y.event;return w&&((S=r.ids)===null||S===void 0?void 0:S.includes(w))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const w=(f=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return w==="*"||w===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===l}).map(g=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:S,table:A,commit_timestamp:x,type:f,errors:p}=y;m=Object.assign(Object.assign({},{schema:S,table:A,commit_timestamp:x,eventType:f,new:{},old:{},errors:p}),this._getPayloadRecords(y))}g.callback(m,n)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Ac.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Zt.close,{},t)}_onError(t){this._on(Zt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ed(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ed(t.columns,t.old_record)),r}}const yl=()=>{},Ei={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ig=[1e3,2e3,5e3,1e4],Ug=1e4,Mg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fg{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vo,this.transport=null,this.heartbeatIntervalMs=Ei.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yl,this.ref=0,this.reconnectTimer=null,this.logger=yl,this.conn=null,this.sendBuffer=[],this.serializer=new Pg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>li(async()=>{const{default:o}=await Promise.resolve().then(()=>as);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${bo.websocket}`,this.httpEndpoint=Qf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ng.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Eg}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ds.connecting:return an.Connecting;case Ds.open:return an.Open;case Ds.closing:return an.Closing;default:return an.Closed}}isConnected(){return this.connectionState()===an.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Ac(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Cg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ei.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:l}=r,o=l?`(${l})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Zt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Mg],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:zg};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Zt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Kf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ei.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,l,o,c,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:vo,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ei.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:yl,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>Ig[h-1]||Ug,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Dc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ke(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Bg extends Dc{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ko extends Dc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var qg=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Jf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>li(async()=>{const{default:n}=await Promise.resolve().then(()=>as);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Hg=()=>qg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield li(()=>Promise.resolve().then(()=>as),void 0)).Response:Response}),_o=e=>{if(Array.isArray(e))return e.map(r=>_o(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=_o(n)}),t},Wg=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var bn=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const vl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gg=(e,t,r)=>bn(void 0,void 0,void 0,function*(){const n=yield Hg();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,l=(s==null?void 0:s.statusCode)||a+"";t(new Bg(vl(s),a,l))}).catch(s=>{t(new ko(vl(s),s))}):t(new ko(vl(e),e))}),Vg=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Wg(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function ci(e,t,r,n,s,a){return bn(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,Vg(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Gg(c,o,n))})})}function pa(e,t,r,n){return bn(this,void 0,void 0,function*(){return ci(e,"GET",t,r,n)})}function ar(e,t,r,n,s){return bn(this,void 0,void 0,function*(){return ci(e,"POST",t,n,s,r)})}function jo(e,t,r,n,s){return bn(this,void 0,void 0,function*(){return ci(e,"PUT",t,n,s,r)})}function Kg(e,t,r,n){return bn(this,void 0,void 0,function*(){return ci(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Xf(e,t,r,n,s){return bn(this,void 0,void 0,function*(){return ci(e,"DELETE",t,n,s,r)})}var pt=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Yg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qg{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Jf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return pt(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},nd),s);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?jo:ar)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ke(a))return{data:null,error:a};throw a}})}upload(t,r,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return pt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:nd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield jo(this.fetch,o.toString(),c,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield ar(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new Dc("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}update(t,r,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return pt(this,void 0,void 0,function*(){try{return{data:yield ar(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}copy(t,r,n){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield ar(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return pt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield ar(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return pt(this,void 0,void 0,function*(){try{const s=yield ar(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}download(t,r){return pt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield pa(this.fetch,`${this.url}/${s}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}info(t){return pt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield pa(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:_o(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}exists(t){return pt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Kg(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n)&&n instanceof ko){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return pt(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}list(t,r,n){return pt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Yg),r),{prefix:t||""});return{data:yield ar(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}listV2(t,r){return pt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ar(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Jg="2.12.1",Xg={"X-Client-Info":`storage-js/${Jg}`};var jn=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class Zg{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Xg),r),this.fetch=Jf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return jn(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}getBucket(t){return jn(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return jn(this,void 0,void 0,function*(){try{return{data:yield ar(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return jn(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}emptyBucket(t){return jn(this,void 0,void 0,function*(){try{return{data:yield ar(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}deleteBucket(t){return jn(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}}class ex extends Zg{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new Qg(this.url,this.headers,t,this.fetch)}}const tx="2.57.4";let _s="";typeof Deno<"u"?_s="deno":typeof document<"u"?_s="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_s="react-native":_s="node";const rx={"X-Client-Info":`supabase-js-${_s}/${tx}`},nx={headers:rx},sx={schema:"public"},ix={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ax={};var lx=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const ox=e=>{let t;return e?t=e:typeof fetch>"u"?t=$f:t=fetch,(...r)=>t(...r)},cx=()=>typeof Headers>"u"?If:Headers,ux=(e,t,r)=>{const n=ox(r),s=cx();return(a,l)=>lx(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let u=new s(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},l),{headers:u}))})};var dx=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};function hx(e){return e.endsWith("/")?e:e+"/"}function fx(e,t){var r,n;const{db:s,auth:a,realtime:l,global:o}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),l),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>dx(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function mx(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hx(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Zf="2.71.1",Cn=30*1e3,No=3,bl=No*Cn,px="http://localhost:9999",gx="supabase.auth.token",xx={"X-Client-Info":`gotrue-js/${Zf}`},So="X-Supabase-Api-Version",em={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vx=10*60*1e3;class Rc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class bx extends Rc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function wx(e){return ue(e)&&e.name==="AuthApiError"}class tm extends Rc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Xr extends Rc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Pr extends Xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kx(e){return ue(e)&&e.name==="AuthSessionMissingError"}class Ci extends Xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ti extends Xr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Pi extends Xr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _x(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class sd extends Xr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zo extends Xr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function wl(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class id extends Xr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Eo extends Xr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ad=` 	
\r=`.split(""),jx=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ad.length;t+=1)e[ad[t].charCodeAt(0)]=-2;for(let t=0;t<ga.length;t+=1)e[ga[t].charCodeAt(0)]=t;return e})();function ld(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ga[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ga[n]),t.queuedBits-=6}}function rm(e,t,r){const n=jx[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function od(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{zx(l,n,r)};for(let l=0;l<e.length;l+=1)rm(e.charCodeAt(l),s,a);return t.join("")}function Nx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Sx(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Nx(n,t)}}function zx(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ex(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)rm(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Cx(e){const t=[];return Sx(e,r=>t.push(r)),new Uint8Array(t)}function Tx(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>ld(s,r,n)),ld(null,r,n),t.join("")}function Px(e){return Math.round(Date.now()/1e3)+e}function Ax(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Qt=()=>typeof window<"u"&&typeof document<"u",en={tested:!1,writable:!1},nm=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(en.tested)return en.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),en.tested=!0,en.writable=!0}catch{en.tested=!0,en.writable=!1}return en.writable};function Dx(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const sm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>li(async()=>{const{default:n}=await Promise.resolve().then(()=>as);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Rx=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Tn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},tn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Tr=async(e,t)=>{await e.removeItem(t)};class qa{constructor(){this.promise=new qa.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}qa.promiseConstructor=Promise;function kl(e){const t=e.split(".");if(t.length!==3)throw new Eo("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!yx.test(t[n]))throw new Eo("JWT not in base64url format");return{header:JSON.parse(od(t[0])),payload:JSON.parse(od(t[1])),signature:Ex(t[2]),raw:{header:t[0],payload:t[1]}}}async function Lx(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Ox(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function $x(e){return("0"+e.toString(16)).substr(-2)}function Ix(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,$x).join("")}async function Ux(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Mx(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Ux(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nn(e,t,r=!1){const n=Ix();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Tn(e,`${t}-code-verifier`,s);const a=await Mx(n);return[a,n===a?"plain":"s256"]}const Fx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bx(e){const t=e.headers.get(So);if(!t||!t.match(Fx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function qx(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Hx(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sn(e){if(!Wx.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _l(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cd(e){return JSON.parse(JSON.stringify(e))}var Gx=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const sn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Vx=[502,503,504];async function ud(e){var t;if(!Rx(e))throw new zo(sn(e),0);if(Vx.includes(e.status))throw new zo(sn(e),e.status);let r;try{r=await e.json()}catch(a){throw new tm(sn(a),a)}let n;const s=Bx(e);if(s&&s.getTime()>=em["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new id(sn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Pr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new id(sn(r),e.status,r.weak_password.reasons);throw new bx(sn(r),e.status||500,n)}const Kx=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function fe(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[So]||(a[So]=em["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Yx(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Yx(e,t,r,n,s,a){const l=Kx(t,n,s,a);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new zo(sn(c),0)}if(o.ok||await ud(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await ud(c)}}function hr(e){var t;let r=null;Zx(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Px(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function dd(e){const t=hr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Or(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Qx(e){return{data:e,error:null}}function Jx(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,l=Gx(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Xx(e){return e}function Zx(e){return e.access_token&&e.refresh_token&&e.expires_in}const jl=["global","local","others"];var ey=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class ty{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=sm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=jl[0]){if(jl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jl.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Or})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ey(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Jx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Or})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Xx});if(d.error)throw d.error;const h=await d.json(),m=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(y=>{const S=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(y.split(";")[1].split("=")[1]);u[`${A}Page`]=S}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Sn(t);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Or})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Sn(t);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Or})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Sn(t);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Or})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Sn(t.userId);try{const{data:r,error:n}=await fe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Sn(t.userId),Sn(t.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}function hd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function ry(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zn={debug:!!(globalThis&&nm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class im extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ny extends im{}async function sy(e,t,r){zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),zn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ny(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}ry();const iy={url:px,storageKey:gx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fd(e,t,r){return await r()}const En={};class Zs{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zs.nextInstanceID,Zs.nextInstanceID+=1,this.instanceID>0&&Qt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},iy),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ty({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=sm(s.fetch),this.lock=s.lock||fd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=sy:this.lock=fd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:nm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=hd(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=En[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){En[this.storageKey]=Object.assign(Object.assign({},En[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=En[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){En[this.storageKey]=Object.assign(Object.assign({},En[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Dx(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Qt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),_x(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ue(r)?{error:r}:{error:new tm("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:hr}),{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:d,password:h,options:m}=t;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Nn(this.storage,this.storageKey)),a=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:y},xform:hr})}else if("phone"in t){const{phone:d,password:h,options:m}=t;a=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:hr})}else throw new Ti("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:o}=t;r=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dd})}else if("phone"in t){const{phone:a,password:l,options:o}=t;r=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dd})}else throw new Ti("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ci}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,a,l,o,c,u,d,h,m,g;let y,S;if("message"in t)y=t.message,S=t.signature;else{const{chain:A,wallet:x,statement:f,options:p}=t;let w;if(Qt())if(typeof x=="object")w=x;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))w=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const C=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const k=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),f?{statement:f}:null));let v;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")v=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)v=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in v&&"signature"in v&&(typeof v.signedMessage=="string"||v.signedMessage instanceof Uint8Array)&&v.signature instanceof Uint8Array)y=typeof v.signedMessage=="string"?v.signedMessage:new TextDecoder().decode(v.signedMessage),S=v.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${C.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(v=>`- ${v}`)]:[]].join(`
`);const k=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=k}}try{const{data:A,error:x}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Tx(S)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:hr});if(x)throw x;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new Ci}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:x})}catch(A){if(ue(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(t){const r=await tn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:l}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:hr});if(await Tr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ci}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(ue(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:l}=t,o=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:hr}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ci}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,l;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Nn(this.storage,this.storageKey));const{error:h}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ti("You must provide either an email or phone number.")}catch(o){if(ue(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:hr});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Nn(this.storage,this.storageKey)),await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Qx})}catch(a){if(ue(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Pr;const{error:s}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:l}=await fe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:l,error:o}=await fe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Ti("You must provide either an email or phone number and a type")}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await tn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<bl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await tn(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=_l()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Or}):await this._useSession(async r=>{var n,s,a;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pr}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Or})})}catch(r){if(ue(r))return kx(r)&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Pr;const l=s.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Nn(this.storage,this.storageKey));const{data:u,error:d}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Or});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Pr;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:l}=kl(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(ue(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Pr;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Qt())throw new Pi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Pi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new sd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sd("No code detected.");const{data:f,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=t;if(!a||!o||!l||!u)throw new Pi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let m=d+h;c&&(m=parseInt(c));const g=m-d;g*1e3<=Cn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const y=m-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,d);const{data:S,error:A}=await this._getUser(a);if(A)throw A;const x={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:m,refresh_token:l,token_type:u,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await tn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(wx(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Ax(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Nn(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(ue(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var l,o,c,u,d;const{data:h,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Qt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ue(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)throw l;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Ox(async s=>(s>0&&await Lx(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:hr})),(s,a)=>{const l=200*Math.pow(2,s);return a&&wl(a)&&Date.now()+l-n<Cn})}catch(n){if(this._debug(r,"error",n),ue(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Qt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await tn(this.storage,this.storageKey);if(s&&this.userStorage){let l=await tn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Tn(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:_l()}else if(s&&!s.user&&!s.user){const l=await tn(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Tr(this.storage,this.storageKey+"-user"),await Tn(this.storage,this.storageKey,s)):s.user=_l()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<bl;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${bl}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),wl(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(s.access_token);!o&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Pr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new qa;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Pr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(s,"error",a),ue(a)){const l={session:null,error:a};return wl(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Tn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=cd(s);await Tn(this.storage,this.storageKey,a)}else{const s=cd(r);await Tn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Tr(this.storage,this.storageKey),await Tr(this.storage,this.storageKey+"-code-verifier"),await Tr(this.storage,this.storageKey+"-user"),this.userStorage&&await Tr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Cn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Cn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Cn}ms, refresh threshold is ${No} ticks`),s<=No&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof im)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Nn(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await fe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:l,error:o}=await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=kl(s.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+vx>s)return n;const{data:a,error:l}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:g,error:y}=await this.getSession();if(y||!g.session)return{data:null,error:y};n=g.session.access_token}const{header:s,payload:a,signature:l,raw:{header:o,payload:c}}=kl(n);r!=null&&r.allowExpired||qx(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:a,header:s,signature:l},error:null}}const d=Hx(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,l,Cx(`${o}.${c}`)))throw new Eo("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}}Zs.nextInstanceID=0;const ay=Zs;class ly extends ay{constructor(t){super(t)}}var oy=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class cy{constructor(t,r,n){var s,a,l;this.supabaseUrl=t,this.supabaseKey=r;const o=mx(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:sx,realtime:ax,auth:Object.assign(Object.assign({},ix),{storageKey:c}),global:nx},d=fx(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=d.auth)!==null&&l!==void 0?l:{},this.headers,d.global.fetch),this.fetch=ux(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new jg(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ex(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new rg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return oy(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:l,flowType:o,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ly({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:o,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Fg(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uy=(e,t,r)=>new cy(e,t,r);function dy(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}dy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hy="https://soewlqmskqmpycaevhoc.supabase.co",fy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvZXdscW1za3FtcHljYWV2aG9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNDExODksImV4cCI6MjA3ODYxNzE4OX0.0CAOUF-SVUIx5udgzNBkrggovWaafHWYFN1j-HzYTFU",z=uy(hy,fy,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),am=b.createContext(void 0);function my({children:e}){const[t,r]=b.useState(null),[n,s]=b.useState(!0);b.useEffect(()=>{z.auth.getSession().then(({data:{session:d}})=>{r((d==null?void 0:d.user)??null),s(!1),d!=null&&d.user&&a(d.user.id)}).catch(()=>{s(!1)});const{data:{subscription:u}}=z.auth.onAuthStateChange((d,h)=>{r((h==null?void 0:h.user)??null),s(!1),h!=null&&h.user&&a(h.user.id)});return()=>u.unsubscribe()},[]);const a=async u=>{try{const{error:d}=await z.rpc("check_trial_expiration",{p_user_id:u});d&&console.error("Error checking trial expiration:",d)}catch(d){console.error("Error in checkTrialExpiration:",d)}},l=async(u,d)=>{try{const{error:h}=await z.auth.signInWithPassword({email:u,password:d});return h?{error:new Error(h.message.includes("Invalid login credentials")||h.message.includes("Email not confirmed")?"Geersiz e-posta veya ifre. Ltfen tekrar deneyin.":h.message.includes("Email not confirmed")?"E-posta adresiniz henz onaylanmam. Ltfen e-postanz kontrol edin.":"Giri yaplamad. Bilgilerinizi kontrol edip tekrar deneyin.")}:{error:null}}catch{return{error:new Error("Giri yaplamad. Ltfen daha sonra tekrar deneyin.")}}},o=async(u,d,h,m)=>{try{if(console.log("Starting signup process for:",{email:u,fullName:h,username:m}),!u||!d||!h||!m)throw new Error("Tm alanlar doldurun.");if(d.length<6)throw new Error("ifre en az 6 karakter olmaldr.");if(m.length<3)throw new Error("Kullanc ad en az 3 karakter olmaldr.");try{const{data:S,error:A}=await z.from("profiles").select("count").limit(1);console.log("Supabase connection test:",{testData:S,testError:A})}catch(S){console.error("Supabase connection test failed:",S)}console.log("Skipping username check to avoid 406 errors - database will handle uniqueness"),console.log("Attempting Supabase auth.signUp...");const{data:g,error:y}=await z.auth.signUp({email:u,password:d,options:{emailRedirectTo:`${window.location.origin}`,data:{full_name:h,username:m.toLowerCase()}}});if(console.log("SignUp response:",{user:g!=null&&g.user?{id:g.user.id,email:g.user.email}:null,session:g!=null&&g.session?"exists":"null",error:y?{message:y.message,status:y.status}:null}),y)throw console.error("SignUp error:",y),console.error("Error details:",{message:y.message,status:y.status,statusText:y.statusText,code:y.code||"no-code"}),y.message.includes("already registered")||y.message.includes("already exists")||y.message.includes("User already registered")?new Error("Bu e-posta adresi zaten kaytl. Ltfen giri yapn veya farkl bir e-posta kullann."):y.message.includes("Password should be at least")?new Error("ifre en az 6 karakter olmaldr."):y.message.includes("Email rate limit exceeded")?new Error("ok fazla kayt denemesi yapld. Ltfen birka dakika bekleyip tekrar deneyin."):y.message.includes("Invalid email")?new Error("Geersiz e-posta adresi. Ltfen geerli bir e-posta girin."):y.message.includes("Signup is disabled")?new Error("Kayt ilemi u anda devre d. Ltfen daha sonra tekrar deneyin."):y.message.includes("Email confirmations are required")?new Error('E-posta onay gerekli. Ltfen Supabase ayarlarnda "Enable email confirmations" seeneini kapatn.'):y.message.includes("rate limit")?new Error("ok fazla kayt denemesi. Ltfen birka dakika bekleyip tekrar deneyin."):y.message.includes("Database error saving new user")?new Error("Veritaban hatas: Supabase Dashboard  SQL Editor  Migration dosyalarn altrn. Profiles tablosu ve RLS politikalar eksik olabilir."):(console.error("Unhandled signup error:",y.message),new Error(`Hesap oluturulamad: ${y.message}`));return g.user&&(console.log("User created successfully:",g.user.id),console.log("Skipping profile creation - using basic auth only")),g.user&&!g.session?{error:null}:{error:null}}catch(g){return{error:g instanceof Error?g:new Error("Hesap oluturulamad. Ltfen tekrar deneyin.")}}},c=async()=>{await z.auth.signOut()};return i.jsx(am.Provider,{value:{user:t,loading:n,signIn:l,signUp:o,signOut:c},children:e})}function zt(){const e=b.useContext(am);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const py={en:{nav:{home:"Home",about:"About",social:"Social",analyze:"Analyze",library:"Library",contact:"Contact",dashboard:"Dashboard",buy:"Buy",freeTrial:"3-Day Free Trial",signIn:"Sign In",signOut:"Sign Out",messages:"Messages"},home:{title:"Submirra",subtitle:"Unlock the Secrets of Your Subconscious",description:"Experience the power of advanced dream analysis. Submirra combines sophisticated subconscious interpretation with stunning visual generation to help you understand the hidden meanings behind your dreams.",cta:"Analyze Your Dream",getStarted:"Get Started",learnMore:"Learn More",feature1Title:"Deep Analysis",feature1Desc:"Advanced analysis techniques reveal hidden meanings in your dreams through sophisticated subconscious interpretation. Our powerful algorithms decode symbolic patterns, emotional undertones, and psychological connections.",feature1Details:"Deep Analysis  Symbols  Emotions  Patterns",feature2Title:"Visual Generation",feature2Desc:"Transform your dreams into stunning surreal visualizations that capture their essence and emotion. Our powerful system creates personalized artwork that brings your subconscious visions to life.",feature2Details:"Surreal Art  Color Mapping  Symbolic Visual  HD Output",feature3Title:"Personal Library",feature3Desc:"Build your personal dream journal with all your analyses and visualizations in one place. Track patterns, explore recurring themes, and discover your subconscious evolution over time.",feature3Details:"Dream Journal  Pattern Track  Theme Analysis  Progress"},about:{title:"About Submirra",subtitle:"Bridging the conscious and subconscious",missionTitle:"Our Mission",missionDesc:"Submirra is dedicated to helping you understand the hidden messages within your dreams. Using advanced analysis technology, we analyze your dreams to reveal insights about your subconscious mind, emotional state, and inner desires.",howItWorksTitle:"How It Works",howItWorksDesc:"Our platform combines the power of advanced analysis with artistic visualization:",step1:"Share your dream in up to 5000 characters",step2:"Our system processes your dream through advanced analysis",step3:"Receive a detailed subconscious analysis",step4:"Get a unique surreal visualization of your dream",step5:"Build your personal dream library over time",privacyTitle:"Privacy & Security",privacyDesc:"Your dreams are deeply personal, and we treat them with the utmost respect. All dream entries are encrypted and stored securely. Only you can access your dream library, and we never share your data with third parties. Your subconscious secrets are safe with us.",quote:'"Dreams are the royal road to the unconscious" - Sigmund Freud'},analyze:{title:"Analyze Your Dream",subtitle:"Describe your dream in detail and discover its hidden meanings",label:"Tell us about your dream",placeholder:"I was walking through a forest filled with glowing trees...",characters:"characters",submit:"Analyze Dream",saving:"Saving...",analysisTitle:"Analysis",visualizationTitle:"Dream Visualization",analyzeAnother:"Analyze Another Dream",confirmationMessage:"Your dream has been saved and will be analyzed shortly.",savedMessage:"Your dream has been saved and will be analyzed shortly.",trialBadge:"3-Day Free Trial",privacyLabel:"Privacy",privacyPublic:"Public",privacyPrivate:"Private",privacyPublicDesc:"Share with the community",privacyPrivateDesc:"Only visible to you",pendingMessage:"Your dream will be analyzed and visualized shortly. Please wait. Once completed, you will receive a notification. You can check the status of your dream in your library.",goToLibrary:"Go to Library",processingTitle:"Dream Analysis in Progress"},library:{title:"Your Dream Library",subtitle:"Explore your collection of analyzed dreams and visualizations",empty:"Your library is empty",analyzeFirst:"Analyze Your First Dream",yourDream:"Your Dream",analysis:"Analysis",pending:"Pending Analysis",processingMessage:"Analysis is being processed",creating:"Creating...",searchPlaceholder:"Search your dreams...",noDreamsFound:"No dreams found matching your search",download:"Download",makePrivate:"Make Private",makePublic:"Make Public",addToFavorites:"Add to Favorites",removeFromFavorites:"Remove from Favorites",delete:"Delete",downloadSuccess:"Image downloaded successfully",downloadError:"Failed to download image",imageNotFound:"Image not found",privacyUpdated:"Privacy setting updated",privacyUpdateError:"Failed to update privacy setting"},social:{title:"Social Feed",subtitle:"Explore public dream analyses from the community",searchDreams:"Search Dreams",searchUsers:"Search Users",searchDreamsPlaceholder:"Search dreams...",searchUsersPlaceholder:"Search users by name or username...",all:"All",following:"Following",recent:"Recent",popular:"Popular",trending:"Trending",pending:"Pending",noDreams:"No public dreams yet",shareFirst:"Share Your First Dream",likes:"likes",like:"like",comments:"Comments",comment:"comment",viewAll:"View all",noComments:"No comments yet",writeComment:"Write a comment...",signInToComment:"Sign in to comment",signIn:"Sign In",justNow:"Just now",minutesAgo:"m ago",hoursAgo:"h ago",daysAgo:"d ago",noUsersFound:"No users found",anonymous:"Anonymous",checkOutDream:"Check out this dream",linkCopied:"Link copied to clipboard",deleteDream:"Delete your dream",deleteConfirm:"Are you sure you want to delete this dream? This will also delete all likes and comments.",dreamDeleted:"Dream deleted successfully",deleteFailed:"Failed to delete dream. You can only delete your own dreams.",commentAdded:"Comment added",commentFailed:"Failed to add comment",commentDeleted:"Comment deleted",commentDeleteFailed:"Failed to delete comment",deleteComment:"Delete comment",endOfFeed:"You've reached the end of the feed",loadingMore:"Loading more..."},profile:{title:"Profile",manageAccount:"Manage your account settings",userProfile:"User Profile",changeAvatar:"Change avatar",uploading:"Uploading...",publicDreams:"Public Dreams",likesReceived:"Likes Received",comments:"Comments",followers:"Followers",following:"Following",email:"Email",memberSince:"Member Since",editProfile:"Edit Profile",saveChanges:"Save Changes",cancel:"Cancel",follow:"Follow",followingButton:"Following",publicDreamsTitle:"Public Dreams",noPublicDreams:"No public dreams yet",profileSaved:"Profile saved successfully",profileSaveFailed:"Failed to save profile",avatarUploaded:"Avatar uploaded successfully",avatarUploadFailed:"Failed to upload avatar",followSuccess:"Now following this user",unfollowSuccess:"Unfollowed this user",followFailed:"Failed to update follow status",bioPlaceholder:"Write a bio...",message:"Message",reportCount:"Reports Received",reports:"reports",dangerLow:"Low Risk",dangerMedium:"Medium Risk",dangerHigh:"High Risk",dangerCritical:"Critical Risk",noFollowers:"No followers yet",noFollowing:"Not following anyone yet",developer:"Developer"},dashboard:{title:"Dashboard",subtitle:"Overview of your dream analysis journey",totalDreams:"Total Dreams",completedAnalyses:"Completed Analyses",pendingAnalyses:"Pending Analyses",analyzeNewDream:"Analyze New Dream",analyzeNewDreamDesc:"Start analyzing a new dream to discover its hidden meanings",viewLibrary:"View Library",viewLibraryDesc:"Browse your complete collection of analyzed dreams",recentDreams:"Recent Dreams",viewAll:"View All",noDreams:"No dreams yet",analyzeFirstDream:"Analyze Your First Dream"},contact:{title:"Contact Us",subtitle:"Have questions? We'd love to hear from you",emailSupport:"Email Support",liveChat:"Live Chat",available:"Available 24/7 for assistance",sendMessage:"Send us a Message",messageSubmirra:"Message Submirra",viaWebsite:"Via Website",pleaseSignInToMessage:"Please sign in to message Submirra.",name:"Name",email:"Email",subject:"Subject",message:"Message",send:"Send Message",thankYou:"Thank you for your message! We'll get back to you soon.",namePlaceholder:"Your name",emailPlaceholder:"your@email.com",subjectPlaceholder:"What's this about?",messagePlaceholder:"Tell us more..."},auth:{welcomeBack:"Welcome Back",createAccount:"Create Account",continueExploring:"Continue exploring your dreams",startJourney:"Start your journey into the subconscious",signIn:"Sign In",signUp:"Sign Up",fullName:"Full Name",email:"Email",password:"Password",orContinueWith:"Or continue with",googleSignIn:"Sign in with Google",enterFullName:"Enter your full name",enterEmail:"your@email.com",enterPassword:"Enter your password",creatingAccount:"Creating account...",signingIn:"Signing in...",checkEmail:"Check your email",confirmationSent:"We sent you a confirmation link. Please check your email to verify your account.",validationRequired:"Please fill out this field",validationEmail:"Please enter a valid email address",emailAlreadyExists:"This email is already registered. Please sign in or use a different email.",invalidCredentials:"Invalid email or password. Please try again.",acceptTerms:"I accept the Terms of Service",acceptPrivacy:"I accept the Privacy Policy",mustAcceptTerms:"You must accept the Terms of Service to create an account",mustAcceptPrivacy:"You must accept the Privacy Policy to create an account",readTerms:"Read Terms of Service",readPrivacy:"Read Privacy Policy"},settings:{title:"Settings",blockedUsers:"Blocked Users",privacy:"Privacy",notifications:"Notifications",blockedUsersDesc:"Users you've blocked won't be able to send you messages or interact with your content.",noBlockedUsers:"No blocked users",unblock:"Unblock",unblockConfirm:"Are you sure you want to unblock",unblockSuccess:"has been unblocked",privacyDesc:"Control who can see your content and interact with you.",profileVisibility:"Profile Visibility",allowMessagesFrom:"Allow Messages From",public:"Public",private:"Private",everyone:"Everyone",followingOnly:"Following Only",notificationsDesc:"Choose what notifications you want to receive.",likesOnDreams:"Likes on Dreams",comments:"Comments",newFollowers:"New Followers",directMessages:"Direct Messages",favorites:"Favorites",favoritesDesc:"Your favorite friends. Their dreams will be shown with priority.",noFavorites:"No favorite friends yet",remove:"Remove"},messages:{title:"Messages",searchPlaceholder:"Search users...",noMessages:"No messages yet",searchToStart:"Search for users to start chatting",typePlaceholder:"Type a message...",loading:"Loading...",loadingUser:"Loading user...",searchResults:"Search Results",searching:"Searching...",deleteConversation:"Delete Conversation",reply:"Reply",replyPlaceholder:"Type your reply..."},notifications:{deleteAll:"Delete All",deleteAllConfirm:"Are you sure you want to delete all notifications?",deleteAllSuccess:"All notifications deleted",deleteAllError:"Failed to delete all notifications"},pricing:{title:"Simple, Transparent Pricing",subtitle:"Choose the perfect plan for your dream analysis journey",freeTrial:{title:"Free Trial",price:"Free",description:"Perfect for exploring what Submirra can do",feature1:"3 days of access",feature2:"3 dream analyses total",feature3:"",feature4:"Beautiful visualizations for your dreams",cta:"Start Free Trial",signUp:"Sign Up Free"},standard:{title:"Standard",price:"$15",period:"month",description:"Great for regular dream journaling and insights",feature1:"3 dream analyses per day",feature2:"1 visualization per analysis",feature3:"90 dreams storage per month",feature4:"Advanced analysis",feature5:"",cta:"Get Standard"},premium:{badge:"Most Popular",title:"Premium",price:"$30",period:"month",description:"Unlock your subconscious completely with unlimited library and multiple visualizations",feature1:"5 dream analyses per day",feature2:"3 visualizations per analysis",feature3:"Unlimited library storage",feature4:"Priority analysis",feature5:"Never lose your dream history",cta:"Go Premium"},whySubmirra:{title:"Why Choose Submirra?",description:"Submirra uses cutting-edge analysis technology to decode your dreams, revealing hidden meanings about your subconscious mind, emotional state, and inner desires. Each analysis comes with unique surreal visualizations that capture the essence of your dream."}},trial:{activateTitle:"Activate Your 3-Day Free Trial",activateDesc:"Experience the full power of Submirra with unlimited access for 3 days",activateNow:"Activate Free Trial",activating:"Activating...",activated:"Trial Activated!",activatedDesc:"Your 3-day free trial has been successfully activated.",enjoy3Days:"Enjoy 3 days of unlimited dream analysis and insights!",alreadyUsed:"Trial Already Used",alreadyUsedDesc:"You have already used your free trial. Upgrade to a paid plan to continue enjoying Submirra.",viewPlans:"View Plans",whatsIncluded:"What's Included:",feature1:"3 days of full access to all features",feature2:"3 dream analyses with deep insights",feature3:"Beautiful visualizations for your dreams",duration:"Duration",threeDays:"3 Days",analyses:"Analyses",threeAnalyses:"3 Dreams",features:"Features",fullAccess:"Full Access",startAnalyzing:"Start Analyzing Dreams",trialExpired:"Trial Expired",trialExpiredDesc:"Your 3-day free trial has expired. Upgrade to continue.",ipAlreadyUsed:"This IP address has already used a free trial. Each person can only get one free trial.",ipCheckFailed:"Could not verify eligibility. Please try again."},footer:{termsOfService:"Terms of Service",privacyPolicy:"Privacy Policy",feedback:"Feedback"},terms:{title:"Terms of Service",lastUpdated:"Last updated: December 2024",acceptanceTitle:"1. Acceptance of Terms",acceptanceText:"Welcome to Submirra! By accessing and using our platform, you agree to follow these terms. We're committed to providing you with a safe and enjoyable experience. If you have any concerns, please contact us.",serviceTitle:"2. Description of Service",serviceText:"Submirra provides an advanced dream analysis and visualization platform. Our services include:",serviceFeature1:"Advanced dream analysis and interpretation",serviceFeature2:"Dream visualization generation",serviceFeature3:"Social sharing and community features",userAccountTitle:"3. User Accounts",userAccountText:"To access certain features, you must register for an account. You agree to:",userAccountFeature1:"Provide accurate and complete information",userAccountFeature2:"Maintain the security of your account credentials",userAccountFeature3:"Notify us immediately of any unauthorized use",contentTitle:"4. User Content",contentText:"You retain ownership of content you submit. By submitting content, you grant us a license to:",contentFeature1:"Use, display, and distribute your content on the platform",contentFeature2:"Process and analyze your dreams using our advanced technology",contentFeature3:"Generate visualizations based on your dream content",privacyTitle:"5. Privacy",privacyText:"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the service, to understand our practices.",paymentTitle:"6. Payment and Subscription",paymentText:"We offer flexible subscription plans to suit your needs:",paymentFeature1:"Monthly subscriptions can be cancelled at any time",paymentFeature2:"You'll be notified 7 days before your subscription renews",paymentFeature3:"We offer a 3-day free trial so you can explore all features risk-free",terminationTitle:"7. Account Termination",terminationText:"We may suspend accounts that violate our community guidelines or engage in harmful behavior. We always aim to resolve issues fairly and will notify you if any action is taken on your account.",contactTitle:"8. Contact Information",contactText:"If you have any questions about these Terms of Service, please visit our",contactLink:"contact page"},feedback:{title:"Feedback",subtitle:"We value your opinion! Help us improve Submirra",categoryLabel:"Category",categoryBug:"Bug Report",categoryFeature:"Feature Request",categoryImprovement:"Improvement Suggestion",categoryOther:"Other",messageLabel:"Your Feedback",placeholder:"Tell us what you think...",submitButton:"Submit Feedback",submitting:"Submitting...",successMessage:"Thank you for your feedback!",errorMessage:"Failed to submit feedback. Please try again.",emptyError:"Please enter your feedback before submitting.",thankYou:"Thank You!",thankYouMessage:"Your feedback has been received and will be reviewed by our team.",privacyNote:"Your feedback is private and will only be viewed by the Submirra team."},privacy:{title:"Privacy Policy",lastUpdated:"Last updated: December 2024",introductionTitle:"1. Introduction",introductionText:"At Submirra, we take your privacy seriously. This Privacy Policy explains how we collect, use, store, and protect your personal information when you use our dream analysis platform. We are committed to maintaining the highest standards of data protection and transparency.",dataCollectionTitle:"2. Information We Collect",dataCollectionText:"We collect information that is necessary to provide you with our services:",dataCollectionItem1:"Account information: email address, username, and password (encrypted)",dataCollectionItem2:"Profile information: full name, bio, and avatar (optional)",dataCollectionItem3:"Dream content: your dream descriptions and analysis results",dataCollectionItem4:"Usage data: subscription information, preferences, and interaction history",dataUsageTitle:"3. How We Use Your Information",dataUsageText:"We use your information solely to provide and improve our services:",dataUsageItem1:"To process and analyze your dreams using our advanced technology",dataUsageItem2:"To generate personalized visualizations based on your dream content",dataUsageItem3:"To manage your account, subscriptions, and preferences",dataUsageItem4:"To communicate with you about your account, updates, and important notices",dataStorageTitle:"4. Data Storage and Retention",dataStorageText:"Your data is stored securely with industry-standard encryption. We retain your information for as long as your account is active or as needed to provide our services. You can delete your account and all associated data at any time from your profile settings.",dataSecurityTitle:"5. Data Security",dataSecurityText:"We implement robust security measures to protect your information:",dataSecurityItem1:"All data is encrypted in transit and at rest using advanced encryption protocols",dataSecurityItem2:"Access to your data is restricted to authorized personnel only",dataSecurityItem3:"We regularly monitor our systems for security vulnerabilities and update our security practices",userRightsTitle:"6. Your Rights and Choices",userRightsText:"You have full control over your personal information:",userRightsItem1:"Access: You can view and download your data at any time",userRightsItem2:"Modify: You can update your profile information, username, and password",userRightsItem3:"Delete: You can delete your account and all associated data permanently",userRightsItem4:"Privacy: You can control the visibility of your dreams (public or private)",cookiesTitle:"7. Cookies and Tracking",cookiesText:"We use essential cookies to maintain your session and provide core functionality. We do not use tracking cookies or third-party analytics that collect personal information without your consent.",thirdPartyTitle:"8. Third-Party Services",thirdPartyText:"We use secure third-party services for data storage, authentication, and dream analysis processing. These services are bound by strict privacy agreements and only process your data as necessary to provide our services. We do not sell or share your personal information with any other third parties.",changesTitle:"9. Changes to This Policy",changesText:'We may update this Privacy Policy from time to time to reflect changes in our practices or legal requirements. We will notify you of any significant changes by posting the updated policy on this page and updating the "Last updated" date.',contactTitle:"10. Contact Us",contactText:"If you have any questions, concerns, or requests regarding this Privacy Policy or your personal information, please visit our",contactLink:"contact page"}},tr:{nav:{home:"Ana Sayfa",about:"Hakknda",social:"Sosyal",analyze:"Analiz Et",library:"Ktphane",contact:"letiim",dashboard:"Kontrol Paneli",buy:"Satn Al",freeTrial:"3 Gnlk Deneme",signIn:"Giri Yap",signOut:"k Yap",messages:"Mesajlar"},home:{title:"Submirra",subtitle:"Bilinaltnzn Srlarn Kefedin",description:"Gelimi rya analizi gcn deneyimleyin. Submirra, sofistike bilinalt yorumlama ve etkileyici grsel retimi birletirerek ryalarnzn gizli anlamlarn anlamanza yardmc olur.",cta:"Ryan Analiz Et",getStarted:"Balayn",learnMore:"Daha Fazla Bilgi",feature1Title:"Derin Analiz",feature1Desc:"Gelimi analiz teknikleri, sofistike bilinalt yorumlama yoluyla ryalarnzdaki gizli anlamlar ortaya karr. Gl algoritmalarmz sembolik kalplar, duygusal tonlar ve psikolojik balantlar zer.",feature1Details:"Derin Analiz  Semboller  Duygular  Kalplar",feature2Title:"Grsel retimi",feature2Desc:"Ryalarnz, zn ve duygusunu yakalayan muhteem srreal grselletirmelere dntrn. Gl sistemimiz bilinalt vizyonlarnz hayata geiren kiiselletirilmi sanat eserleri yaratr.",feature2Details:"Srreal Sanat  Renk Haritas  Sembolik Grsel  HD kt",feature3Title:"Kiisel Ktphane",feature3Desc:"Tm analizleriniz ve grselletirmelerinizle kiisel rya gnlnz tek bir yerde oluturun. Kalplar takip edin, tekrarlayan temalar kefedin ve zaman iinde bilinalt evrimimizi kefedin.",feature3Details:"Rya Gnl  Kalp Takip  Tema Analiz  lerleme"},about:{title:"Submirra Hakknda",subtitle:"Bilin ve bilinalt arasnda kpr",missionTitle:"Misyonumuz",missionDesc:"Submirra, ryalarnzdaki gizli mesajlar anlamanza yardmc olmaya adanmtr. Gelimi analiz teknolojisi kullanarak, bilinalt zihniniz, duygusal durumunuz ve i arzularnz hakknda igrler ortaya karmak iin ryalarnz analiz ediyoruz.",howItWorksTitle:"Nasl alr",howItWorksDesc:"Platformumuz, gelimi analiz gcn sanatsal grselletirme ile birletirir:",step1:"Ryanz 5000 karaktere kadar paylan",step2:"Sistemimiz ryanz gelimi analiz yntemleriyle iler",step3:"Detayl bir bilinalt analizi aln",step4:"Ryanzn benzersiz srreal bir grselletirmesini elde edin",step5:"Zamanla kiisel rya ktphanenizi oluturun",privacyTitle:"Gizlilik ve Gvenlik",privacyDesc:"Ryalarnz son derece kiiseldir ve onlara byk bir saygyla yaklayoruz. Tm rya girileri ifrelenir ve gvenli bir ekilde saklanr. Yalnzca siz rya ktphanenize eriebilirsiniz ve verilerinizi asla nc taraflarla paylamayz. Bilinalt srlarnz bizimle gvendedir.",quote:'"Ryalar bilindna alan kraliyet yoludur" - Sigmund Freud'},analyze:{title:"Ryanz Analiz Edin",subtitle:"Ryanz detayl bir ekilde anlatn ve gizli anlamlarn kefedin",label:"Ryanz hakknda bize bilgi verin",placeholder:"Parlayan aalarla dolu bir ormanda yryordum...",characters:"karakter",submit:"Ryay Analiz Et",saving:"Kaydediliyor...",analysisTitle:"Analiz",visualizationTitle:"Rya Grselletirmesi",analyzeAnother:"Baka Bir Rya Analiz Et",confirmationMessage:"Ryanz kaydedildi ve ksa sre iinde analiz edilecek.",savedMessage:"Ryanz kaydedildi ve ksa sre iinde analiz edilecek.",trialBadge:"3 Gnlk cretsiz Deneme",privacyLabel:"Gizlilik",privacyPublic:"Herkese Ak",privacyPrivate:"zel",privacyPublicDesc:"Toplulukla payla",privacyPrivateDesc:"Sadece size zel",pendingMessage:"Ryanz ksa sre iinde analiz edilip grselletirilecektir. Ltfen bekleyiniz. Tamamlandktan sonra size bildirim gelecektir, ktphanenizden ryanzn durumunu kontrol edebilirsiniz.",goToLibrary:"Ktphaneye Git",processingTitle:"Rya Analizi Devam Ediyor"},library:{title:"Rya Ktphaneniz",subtitle:"Analiz edilmi ryalarnz ve grselletirmelerinizi kefedin",empty:"Ktphaneniz bo",analyzeFirst:"lk Ryanz Analiz Edin",yourDream:"Ryanz",analysis:"Analiz",pending:"Analiz Bekleniyor",processingMessage:"Analiz ileniyor",creating:"Oluturuluyor...",searchPlaceholder:"Ryalarnzda arayn...",noDreamsFound:"Aramanzla eleen rya bulunamad",download:"ndir",makePrivate:"zel Yap",makePublic:"Herkese A",addToFavorites:"Favorilere Ekle",removeFromFavorites:"Favorilerden kar",delete:"Sil",downloadSuccess:"Grsel baaryla indirildi",downloadError:"Grsel indirilemedi",imageNotFound:"Grsel bulunamad",privacyUpdated:"Gizlilik ayar gncellendi",privacyUpdateError:"Gizlilik ayar deitirilemedi"},social:{title:"Sosyal Ak",subtitle:"Topluluktan herkese ak rya analizlerini kefedin",searchDreams:"Ryalar Ara",searchUsers:"Kullanclar Ara",searchDreamsPlaceholder:"Ryalar ara...",searchUsersPlaceholder:"sim veya kullanc adna gre kullanc ara...",all:"Tm",following:"Takip Edilenler",recent:"Yeni",popular:"Popler",trending:"Trend",pending:"Beklemede",noDreams:"Henz herkese ak rya yok",shareFirst:"lk Ryanz Paylan",likes:"beeni",like:"beeni",comments:"Yorumlar",comment:"yorum",viewAll:"Tmn gr",noComments:"Henz yorum yok",writeComment:"Yorum yaz...",signInToComment:"Yorum yapmak iin giri yapn",signIn:"Giri Yap",justNow:"Az nce",minutesAgo:" dk nce",hoursAgo:" sa nce",daysAgo:" gn nce",noUsersFound:"Kullanc bulunamad",anonymous:"Anonim",checkOutDream:"Bu ryaya gz at",linkCopied:"Link panoya kopyaland",deleteDream:"Ryanz silin",deleteConfirm:"Bu ryay silmek istediinizden emin misiniz? Bu ilem tm beenileri ve yorumlar da silecektir.",dreamDeleted:"Rya baaryla silindi",deleteFailed:"Rya silinemedi. Sadece kendi ryalarnz silebilirsiniz.",commentAdded:"Yorum eklendi",commentFailed:"Yorum eklenemedi",commentDeleted:"Yorum silindi",commentDeleteFailed:"Yorum silinemedi",deleteComment:"Yorumu sil",endOfFeed:"Akn sonuna ulatnz",loadingMore:"Daha fazla ykleniyor..."},profile:{title:"Profil",manageAccount:"Hesap ayarlarnz ynetin",userProfile:"Kullanc Profili",changeAvatar:"Avatar deitir",uploading:"Ykleniyor...",publicDreams:"Herkese Ak Ryalar",likesReceived:"Alnan Beeniler",comments:"Yorumlar",followers:"Takipiler",following:"Takip Edilenler",email:"E-posta",memberSince:"yelik Tarihi",editProfile:"Profili Dzenle",saveChanges:"Deiiklikleri Kaydet",cancel:"ptal",follow:"Takip Et",followingButton:"Takip Ediliyor",publicDreamsTitle:"Herkese Ak Ryalar",noPublicDreams:"Henz herkese ak rya yok",profileSaved:"Profil baaryla kaydedildi",profileSaveFailed:"Profil kaydedilemedi",avatarUploaded:"Avatar baaryla yklendi",avatarUploadFailed:"Avatar yklenemedi",followSuccess:"Bu kullancy takip ediyorsunuz",unfollowSuccess:"Bu kullancy takipten ktnz",followFailed:"Takip durumu gncellenemedi",bioPlaceholder:"Bir biyografi yazn...",message:"Mesaj",reportCount:"Alnan ikayetler",reports:"ikayet",dangerLow:"Dk Risk",dangerMedium:"Orta Risk",dangerHigh:"Yksek Risk",dangerCritical:"Kritik Risk",noFollowers:"Henz takipi yok",noFollowing:"Henz kimseyi takip etmiyor",developer:"Developer"},dashboard:{title:"Kontrol Paneli",subtitle:"Rya analizi yolculuunuzun genel bak",totalDreams:"Toplam Rya",completedAnalyses:"Tamamlanan Analizler",pendingAnalyses:"Bekleyen Analizler",analyzeNewDream:"Yeni Rya Analiz Et",analyzeNewDreamDesc:"Gizli anlamlarn kefetmek iin yeni bir rya analiz etmeye balayn",viewLibrary:"Ktphaneyi Grntle",viewLibraryDesc:"Analiz edilmi ryalarnzn tam koleksiyonunu gzden geirin",recentDreams:"Son Ryalar",viewAll:"Tmn Gr",noDreams:"Henz rya yok",analyzeFirstDream:"lk Ryanz Analiz Edin"},contact:{title:"letiim",subtitle:"Sorularnz m var? Sizden haber almak isteriz",emailSupport:"E-posta Destei",liveChat:"Canl Sohbet",available:"Yardm iin 7/24 ulalabilir",sendMessage:"Bize Mesaj Gnderin",messageSubmirra:"Mesajla",viaWebsite:"Site zerinden",pleaseSignInToMessage:"Mesajlamak iin ltfen giri yapn.",name:"sim",email:"E-posta",subject:"Konu",message:"Mesaj",send:"Mesaj Gnder",thankYou:"Mesajnz iin teekkr ederiz! En ksa srede size geri dneceiz.",namePlaceholder:"sminiz",emailPlaceholder:"eposta@ornek.com",subjectPlaceholder:"Bu ne hakknda?",messagePlaceholder:"Bize daha fazla bilgi verin..."},auth:{welcomeBack:"Tekrar Ho Geldiniz",createAccount:"Hesap Olutur",continueExploring:"Ryalarnz kefetmeye devam edin",startJourney:"Bilinaltna yolculuunuza balayn",signIn:"Giri Yap",signUp:"Kaydol",fullName:"Adnz",email:"E-posta",password:"ifre",orContinueWith:"Veya ununla devam et",googleSignIn:"Google ile giri yap",enterFullName:"Adnz girin",enterEmail:"eposta@ornek.com",enterPassword:"ifrenizi girin",creatingAccount:"Hesap oluturuluyor...",signingIn:"Giri yaplyor...",checkEmail:"E-postanz kontrol edin",confirmationSent:"Size bir onay linki gnderdik. Hesabnz dorulamak iin ltfen e-postanz kontrol edin.",validationRequired:"Ltfen bu alan doldurun",validationEmail:"Ltfen geerli bir e-posta adresi girin",emailAlreadyExists:"Bu e-posta adresi zaten kaytl. Ltfen giri yapn veya farkl bir e-posta kullann.",invalidCredentials:"Geersiz e-posta veya ifre. Ltfen tekrar deneyin.",acceptTerms:"Hizmet artlarn kabul ediyorum",acceptPrivacy:"Gizlilik Politikasn kabul ediyorum",mustAcceptTerms:"Hesap oluturmak iin Hizmet artlarn kabul etmelisiniz",mustAcceptPrivacy:"Hesap oluturmak iin Gizlilik Politikasn kabul etmelisiniz",readTerms:"Hizmet artlarn Oku",readPrivacy:"Gizlilik Politikasn Oku"},settings:{title:"Ayarlar",blockedUsers:"Engellenen Kullanclar",privacy:"Gizlilik",notifications:"Bildirimler",blockedUsersDesc:"Engellediiniz kullanclar size mesaj gnderemez veya ieriinizle etkileime geemez.",noBlockedUsers:"Engellenen kullanc yok",unblock:"Engeli Kaldr",unblockConfirm:"Engelini kaldrmak istediinizden emin misiniz",unblockSuccess:"engelinden karld",privacyDesc:"eriinizi kimlerin grebileceini ve sizinle etkileime girebileceini kontrol edin.",profileVisibility:"Profil Grnrl",allowMessagesFrom:"Mesaj Gnderebilecekler",public:"Herkese Ak",private:"zel",everyone:"Herkes",followingOnly:"Sadece Takip Ettiklerim",notificationsDesc:"Almak istediiniz bildirimleri sein.",likesOnDreams:"Rya Beenileri",comments:"Yorumlar",newFollowers:"Yeni Takipiler",directMessages:"Dorudan Mesajlar",favorites:"Favoriler",favoritesDesc:"Favori arkadalarnz. Bu kullanclarn ryalar ncelikli olarak gsterilir.",noFavorites:"Henz favori arkadanz yok",remove:"kar",showReadReceipts:"Grld Bilgisi",showReadReceiptsDesc:"Dier kullanclarn mesajlarnz grp grmediini bilmelerine izin verin",readReceiptsEnabled:"Grld bilgisi ald",readReceiptsDisabled:"Grld bilgisi kapatld",readReceiptsUpdateError:"Grld bilgisi ayar gncellenemedi"},messages:{title:"Mesajlar",searchPlaceholder:"Kullanc ara...",noMessages:"Henz mesaj yok",searchToStart:"Sohbet balatmak iin kullanc arayn",typePlaceholder:"Mesaj yazn...",loading:"Ykleniyor...",loadingUser:"Kullanc ykleniyor...",searchResults:"Arama Sonular",searching:"Aranyor...",deleteConversation:"Sohbeti Sil"},notifications:{deleteAll:"Btn Bildirimleri Sil",deleteAllConfirm:"Tm bildirimleri silmek istediinizden emin misiniz?",deleteAllSuccess:"Tm bildirimler silindi",deleteAllError:"Bildirimler silinemedi"},pricing:{title:"Basit ve effaf Fiyatlandrma",subtitle:"Rya analizi yolculuunuz iin mkemmel plan sein",freeTrial:{title:"cretsiz Deneme",price:"cretsiz",description:"Submirra'nn neler yapabileceini kefetmek iin mkemmel",feature1:"3 gn eriim",feature2:"Toplam 3 rya analizi",feature3:"",feature4:"Ryalarnz iin gzel grselletirmeler",cta:"cretsiz Deneyin",signUp:"cretsiz Kaydol"},standard:{title:"Standart",price:"450",period:"ay",description:"Dzenli rya gnl ve igrler iin harika",feature1:"Gnde 3 rya analizi",feature2:"Analiz bana 1 grselletirme",feature3:"Aylk 90 rya saklama kapasitesi",feature4:"Gelimi analiz",feature5:"",cta:"Standart Al"},premium:{badge:"En Popler",title:"Premium",price:"900",period:"ay",description:"Snrsz ktphane ve oklu grselletirmelerle bilinaltnzn kilidini tamamen an",feature1:"Gnde 5 rya analizi",feature2:"Analiz bana 3 grselletirme",feature3:"Snrsz ktphane depolama",feature4:"ncelikli analiz",feature5:"Rya gemiinizi asla kaybetmeyin",cta:"Premium Ol"},whySubmirra:{title:"Neden Submirra?",description:"Submirra, bilinalt zihniniz, duygusal durumunuz ve i arzularnz hakknda gizli anlamlar ortaya karmak iin son teknoloji analiz teknolojisini kullanr. Her analiz, ryanzn zn yakalayan benzersiz srreal grselletirmeler ile gelir."}},trial:{activateTitle:"3 Gnlk cretsiz Denemenizi Etkinletirin",activateDesc:"Submirra'nn tm gcn 3 gn boyunca snrsz eriimle deneyimleyin",activateNow:"cretsiz Denemeyi Balat",activating:"Etkinletiriliyor...",activated:"Deneme Etkinletirildi!",activatedDesc:"3 gnlk cretsiz denemeniz baaryla etkinletirildi.",enjoy3Days:"3 gn boyunca snrsz rya analizi ve igrlerin tadn karn!",alreadyUsed:"Deneme Zaten Kullanld",alreadyUsedDesc:"cretsiz denemenizi zaten kullandnz. Submirra'nn keyfini karmaya devam etmek iin cretli bir plana ykseltin.",viewPlans:"Planlar Grntle",whatsIncluded:"Neler Dahil:",feature1:"Tm zelliklere 3 gn tam eriim",feature2:"Derin igrlerle 3 rya analizi",feature3:"Ryalarnz iin gzel grselletirmeler",duration:"Sre",threeDays:"3 Gn",analyses:"Analizler",threeAnalyses:"3 Rya",features:"zellikler",fullAccess:"Tam Eriim",startAnalyzing:"Rya Analizine Bala",trialExpired:"Deneme Sresi Doldu",trialExpiredDesc:"3 gnlk cretsiz denemeniz sona erdi. Devam etmek iin ykseltin.",ipAlreadyUsed:"Bu IP adresinden daha nce cretsiz deneme kullanlm. Her kii yalnzca bir kez cretsiz deneme alabilir.",ipCheckFailed:"Uygunluk kontrol yaplamad. Ltfen tekrar deneyin."},footer:{termsOfService:"Hizmet artlar",privacyPolicy:"Gizlilik Politikas",feedback:"Geri Bildirim"},terms:{title:"Hizmet artlar",lastUpdated:"Son gncelleme: Aralk 2024",acceptanceTitle:"1. artlarn Kabul",acceptanceText:"Submirra'ya ho geldiniz! Platformumuzu kullanarak bu artlar kabul etmi olursunuz. Size gvenli ve keyifli bir deneyim sunmaya kararlyz. Herhangi bir sorunuz varsa, ltfen bizimle iletiime gein.",serviceTitle:"2. Hizmet Aklamas",serviceText:"Submirra, gelimi rya analizi ve grselletirme platformu salar. Hizmetlerimiz unlar ierir:",serviceFeature1:"Gelimi rya analizi ve yorumlama",serviceFeature2:"Rya grselletirme retimi",serviceFeature3:"Sosyal paylam ve topluluk zellikleri",userAccountTitle:"3. Kullanc Hesaplar",userAccountText:"Belirli zelliklere erimek iin bir hesap oluturmanz gerekir. unlar kabul edersiniz:",userAccountFeature1:"Doru ve eksiksiz bilgi salamak",userAccountFeature2:"Hesap bilgilerinizin gvenliini korumak",userAccountFeature3:"Yetkisiz kullanm durumunda derhal bizi bilgilendirmek",contentTitle:"4. Kullanc erii",contentText:"Gnderdiiniz ieriin sahiplii size aittir. erik gndererek, bize u lisans verirsiniz:",contentFeature1:"eriinizi platformda kullanma, gsterme ve datma",contentFeature2:"Gelimi teknolojimizi kullanarak ryalarnz ileme ve analiz etme",contentFeature3:"Rya ieriinize dayal grselletirmeler oluturma",privacyTitle:"5. Gizlilik",privacyText:"Gizliliiniz bizim iin nemlidir. Uygulamalarmz anlamak iin ltfen hizmetin kullanmnz da yneten Gizlilik Politikamz inceleyin.",paymentTitle:"6. deme ve Abonelik",paymentText:"htiyalarnza uygun esnek abonelik planlar sunuyoruz:",paymentFeature1:"Aylk abonelikler istediiniz zaman iptal edilebilir",paymentFeature2:"Aboneliiniz yenilenmeden 7 gn nce bilgilendirileceksiniz",paymentFeature3:"Tm zellikleri risk almadan kefetmeniz iin 3 gnlk cretsiz deneme sunuyoruz",terminationTitle:"7. Hesap Sonlandrma",terminationText:"Topluluk kurallarmz ihlal eden veya zararl davranlarda bulunan hesaplar askya alabiliriz. Sorunlar adil bir ekilde zmeyi hedefliyoruz ve hesabnzda herhangi bir ilem yaplrsa sizi bilgilendireceiz.",contactTitle:"8. letiim Bilgileri",contactText:"Bu Hizmet artlar hakknda sorularnz varsa, ltfen",contactLink:"iletiim sayfamz"},feedback:{title:"Geri Bildirim",subtitle:"Grnz bizim iin deerli! Submirra'y gelitirmemize yardmc olun",categoryLabel:"Kategori",categoryBug:"Hata Bildirimi",categoryFeature:"zellik stei",categoryImprovement:"yiletirme nerisi",categoryOther:"Dier",messageLabel:"Geri Bildiriminiz",placeholder:"Dncelerinizi paylan...",submitButton:"Geri Bildirim Gnder",submitting:"Gnderiliyor...",successMessage:"Geri bildiriminiz iin teekkr ederiz!",errorMessage:"Geri bildirim gnderilemedi. Ltfen tekrar deneyin.",emptyError:"Gndermeden nce ltfen geri bildiriminizi girin.",thankYou:"Teekkrler!",thankYouMessage:"Geri bildiriminiz alnd ve ekibimiz tarafndan incelenecektir.",privacyNote:"Geri bildiriminiz gizlidir ve yalnzca Submirra ekibi tarafndan grntlenecektir."},privacy:{title:"Gizlilik Politikas",lastUpdated:"Son gncelleme: Aralk 2024",introductionTitle:"1. Giri",introductionText:"Submirra'da gizliliinize nem veriyoruz. Bu Gizlilik Politikas, rya analizi platformumuzu kullandnzda kiisel bilgilerinizi nasl topladmz, kullandmz, sakladmz ve koruduumuzu aklar. En yksek veri koruma ve effaflk standartlarn srdrmeye kararlyz.",dataCollectionTitle:"2. Topladmz Bilgiler",dataCollectionText:"Size hizmetlerimizi sunmak iin gerekli bilgileri topluyoruz:",dataCollectionItem1:"Hesap bilgileri: e-posta adresi, kullanc ad ve ifre (ifrelenmi)",dataCollectionItem2:"Profil bilgileri: ad soyad, biyografi ve avatar (istee bal)",dataCollectionItem3:"Rya ierii: rya aklamalarnz ve analiz sonular",dataCollectionItem4:"Kullanm verileri: abonelik bilgileri, tercihler ve etkileim gemii",dataUsageTitle:"3. Bilgilerinizi Nasl Kullanyoruz",dataUsageText:"Bilgilerinizi yalnzca hizmetlerimizi sunmak ve iyiletirmek iin kullanyoruz:",dataUsageItem1:"Gelimi teknolojimizi kullanarak ryalarnz ilemek ve analiz etmek",dataUsageItem2:"Rya ieriinize dayal kiiselletirilmi grselletirmeler oluturmak",dataUsageItem3:"Hesabnz, aboneliklerinizi ve tercihlerinizi ynetmek",dataUsageItem4:"Hesabnz, gncellemeler ve nemli bildirimler hakknda sizinle iletiim kurmak",dataStorageTitle:"4. Veri Depolama ve Saklama",dataStorageText:"Verileriniz endstri standard ifreleme ile Supabase sunucularnda gvenli bir ekilde saklanr. Hesabnz aktif olduu srece veya hizmetlerimizi sunmak iin gerekli olduu srece bilgilerinizi saklarz. Hesabnz ve tm ilikili verileri istediiniz zaman profil ayarlarnzdan silebilirsiniz.",dataSecurityTitle:"5. Veri Gvenlii",dataSecurityText:"Bilgilerinizi korumak iin gl gvenlik nlemleri uyguluyoruz:",dataSecurityItem1:"Tm veriler, gelimi ifreleme protokolleri kullanlarak aktarm srasnda ve beklerken ifrelenir",dataSecurityItem2:"Verilerinize eriim yalnzca yetkili personelle snrldr",dataSecurityItem3:"Sistemlerimizi dzenli olarak gvenlik aklar iin izliyor ve gvenlik uygulamalarmz gncelliyoruz",userRightsTitle:"6. Haklarnz ve Seenekleriniz",userRightsText:"Kiisel bilgileriniz zerinde tam kontrolnz var:",userRightsItem1:"Eriim: Verilerinizi istediiniz zaman grntleyebilir ve indirebilirsiniz",userRightsItem2:"Deitirme: Profil bilgilerinizi, kullanc adnz ve ifrenizi gncelleyebilirsiniz",userRightsItem3:"Silme: Hesabnz ve tm ilikili verileri kalc olarak silebilirsiniz",userRightsItem4:"Gizlilik: Ryalarnzn grnrln kontrol edebilirsiniz (herkese ak veya zel)",cookiesTitle:"7. erezler ve zleme",cookiesText:"Oturumunuzu srdrmek ve temel ilevsellii salamak iin gerekli erezleri kullanyoruz. Kiisel bilgi toplayan izleme erezleri veya nc taraf analitik aralar kullanmyoruz.",thirdPartyTitle:"8. nc Taraf Hizmetler",thirdPartyText:"Gvenli veri depolama, kimlik dorulama ve rya analizi ileme iin gvenilir nc taraf hizmetler kullanyoruz. Bu hizmetler kat gizlilik anlamalaryla baldr ve verilerinizi yalnzca hizmetlerimizi sunmak iin gerekli olduu ekilde iler. Kiisel bilgilerinizi baka hibir nc taraf ile satmyor veya paylamyoruz.",changesTitle:"9. Bu Politikann Deiiklikleri",changesText:'Uygulamalarmzdaki veya yasal gerekliliklerdeki deiiklikleri yanstmak iin bu Gizlilik Politikasn zaman zaman gncelleyebiliriz. nemli deiikliklerden, gncellenmi politikay bu sayfada yaynlayarak ve "Son gncelleme" tarihini gncelleyerek sizi bilgilendireceiz.',contactTitle:"10. Bize Ulan",contactText:"Bu Gizlilik Politikas veya kiisel bilgileriniz hakknda herhangi bir sorunuz, endieniz veya talebiniz varsa, ltfen",contactLink:"iletiim sayfamz"}}},lm=b.createContext(void 0);function gy({children:e}){const[t,r]=b.useState("en");return i.jsx(lm.Provider,{value:{language:t,setLanguage:r,t:py[t]},children:e})}function Xe(){const e=b.useContext(lm);if(!e)throw new Error("useLanguage must be used within LanguageProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},d)=>b.createElement("svg",{ref:d,...xy,width:s,height:s,stroke:n,strokeWidth:l?Number(a)*24/Number(s):a,className:["lucide",`lucide-${yy(e)}`,o].join(" "),...u},[...t.map(([h,m])=>b.createElement(h,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=J("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=J("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=J("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=J("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=J("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=J("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=J("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=J("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=J("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=J("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=J("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=J("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=J("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=J("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=J("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=J("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=J("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=J("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),fm=b.createContext(void 0);function Iy({children:e}){const[t,r]=b.useState([]),n=(o,c="info",u=4e3)=>{const d=Math.random().toString(36).substring(7),h={id:d,message:o,type:c,duration:u};r(m=>[...m,h]),u>0&&setTimeout(()=>{s(d)},u)},s=o=>{r(c=>c.filter(u=>u.id!==o))},a=o=>{switch(o){case"success":return i.jsx(Oc,{className:"text-green-400",size:20});case"error":return i.jsx(om,{className:"text-red-400",size:20});case"warning":return i.jsx(vy,{className:"text-yellow-400",size:20});default:return i.jsx(Sy,{className:"text-blue-400",size:20})}},l=o=>{switch(o){case"success":return"bg-green-500/10 border-green-500/30 text-green-400";case"error":return"bg-red-500/10 border-red-500/30 text-red-400";case"warning":return"bg-yellow-500/10 border-yellow-500/30 text-yellow-400";default:return"bg-blue-500/10 border-blue-500/30 text-blue-400"}};return i.jsxs(fm.Provider,{value:{showToast:n},children:[e,i.jsx("div",{className:"fixed top-20 right-4 z-[100] flex flex-col gap-2 max-w-md w-full",children:t.map(o=>i.jsxs("div",{className:`${l(o.type)} border rounded-lg p-4 backdrop-blur-sm shadow-lg animate-slide-in-right flex items-start gap-3`,children:[a(o.type),i.jsx("p",{className:"flex-1 text-sm font-medium",children:o.message}),i.jsx("button",{onClick:()=>s(o.id),className:"text-slate-400 hover:text-slate-200 transition-colors",children:i.jsx(qt,{size:16})})]},o.id))})]})}function ur(){const e=b.useContext(fm);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const Uy=["/","/about","/contact","/analyze","/library","/pricing","/profile","/signin","/signup","/dashboard","/social","/activate-trial","/messages","/terms","/privacy","/feedback"],Ic=b.createContext(void 0);function My({children:e}){const[t,r]=b.useState("/");b.useEffect(()=>{const a=()=>{const o=window.location.pathname,c=o.split("/")[1];let u="/";if(c===""||c===void 0)u="/";else if(o.startsWith("/profile/"))u="/profile";else{const d=`/${c}`;Uy.includes(d)?u=d:u="/"}r(u),window.scrollTo(0,0)};a();const l=()=>{a()};return window.addEventListener("popstate",l),()=>{window.removeEventListener("popstate",l)}},[]);const n=a=>{if(a.startsWith("/profile/"))window.history.pushState({},"",a),r("/profile");else if(a.includes("?")){const l=a.split("?")[0];window.history.pushState({},"",a),r(l)}else window.history.pushState({},"",a),r(a);window.scrollTo(0,0)},s=a=>{const l=window.location.pathname;return a==="userId"&&l.startsWith("/profile/")&&l.split("/")[2]||null};return i.jsx(Ic.Provider,{value:{currentPage:t,navigate:n,getUrlParam:s},children:e})}function ft(){const e=b.useContext(Ic);if(!e)throw new Error("useNavigate must be used within RouterProvider");return e.navigate}function Uc(){const e=b.useContext(Ic);if(!e)throw new Error("useCurrentPage must be used within RouterProvider");return e.currentPage}function Fy(){const e=ft();return i.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 hover:opacity-80 transition-opacity cursor-pointer flex-shrink-0",children:[i.jsx("div",{className:"relative overflow-visible flex items-center justify-center flex-shrink-0",children:i.jsx("img",{src:"/br.png",alt:"Submirra Logo",className:"object-contain flex-shrink-0",style:{width:"3.5rem",height:"3.5rem",minWidth:"3.5rem",minHeight:"3.5rem",maxWidth:"3.5rem",maxHeight:"3.5rem"}})}),i.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent whitespace-nowrap flex-shrink-0",style:{fontSize:"1.125rem"},children:"Submirra"})]})}function bd(){const{language:e,setLanguage:t}=Xe();return i.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-900/50 border border-purple-500/20",children:[i.jsx(Po,{size:16,className:"text-slate-400"}),i.jsx("button",{onClick:()=>t("en"),className:`px-2 py-1 rounded text-xs font-medium transition-all duration-200 ${e==="en"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:"EN"}),i.jsx("button",{onClick:()=>t("tr"),className:`px-2 py-1 rounded text-xs font-medium transition-all duration-200 ${e==="tr"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:"TR"})]})}function By(){const{user:e}=zt(),t=ft(),{showToast:r}=ur(),{t:n}=Xe(),[s,a]=b.useState([]),[l,o]=b.useState(0),[c,u]=b.useState(!1),[d,h]=b.useState(!1),m=b.useCallback(async()=>{if(e)try{h(!0);const{data:k,error:v}=await z.from("notifications").select(`
          *,
          actor_profile:actor_id (
            full_name,
            avatar_url,
            username
          )
        `).eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(v)throw v;const j=(k||[]).map(R=>({...R,actor_profile:R.actor_profile||(R.type==="dream_completed"?null:{full_name:"Anonymous",avatar_url:null,username:null})}));a(j),o(j.filter(R=>!R.read_at).length)}catch(k){console.error("Error loading notifications:",k)}finally{h(!1)}},[e]),g=b.useCallback(async k=>{if(e)try{const{data:v,error:j}=await z.from("notifications").select(`
          *,
          actor_profile:actor_id (
            full_name,
            avatar_url,
            username
          )
        `).eq("id",k).single();if(j)throw j;const R={...v,actor_profile:v.actor_profile||(v.type==="dream_completed"?null:{full_name:"Anonymous",avatar_url:null,username:null})};a(P=>P.some(Q=>Q.id===k)?P:[R,...P]),o(P=>P+1),R.type==="dream_completed"&&r("Your dream analysis is ready!","success")}catch(v){console.error("Error adding new notification:",v),m()}},[e,m,r]);b.useEffect(()=>{if(!e)return;const k=z.channel(`notifications-${e.id}-${Date.now()}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},j=>{var R;console.log("New notification received instantly:",j),(R=j.new)!=null&&R.id&&g(j.new.id)}).subscribe();m();const v=z.channel(`dreams-status-${e.id}-${Date.now()}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"dreams",filter:`user_id=eq.${e.id}`},j=>{console.log("Dream status changed:",j),j.new.status==="completed"&&j.old.status!=="completed"&&(console.log("Dream completed - notification should arrive via INSERT event"),setTimeout(()=>{m()},2e3))}).subscribe();return()=>{z.removeChannel(k),z.removeChannel(v)}},[e,m,g]);const y=async k=>{if(e)try{const{error:v}=await z.from("notifications").update({read_at:new Date().toISOString()}).eq("id",k);if(v)throw v;a(j=>j.map(R=>R.id===k?{...R,read_at:new Date().toISOString()}:R)),o(j=>Math.max(0,j-1))}catch(v){console.error("Error marking notification as read:",v)}},S=async(k,v)=>{if(v.stopPropagation(),!!e)try{const{error:j}=await z.from("notifications").delete().eq("id",k);if(j)throw j;const R=s.find(P=>P.id===k);a(P=>P.filter(Q=>Q.id!==k)),R&&!R.read_at&&o(P=>Math.max(0,P-1))}catch(j){console.error("Error deleting notification:",j),r("Failed to delete notification","error")}},A=async()=>{if(e)try{const{error:k}=await z.from("notifications").update({read_at:new Date().toISOString()}).eq("user_id",e.id).is("read_at",null);if(k)throw k;a(v=>v.map(j=>({...j,read_at:j.read_at||new Date().toISOString()}))),o(0),r("All notifications marked as read","success")}catch(k){console.error("Error marking all as read:",k),r("Failed to mark all as read","error")}},x=async()=>{if(e&&confirm(n.notifications.deleteAllConfirm||"Are you sure you want to delete all notifications?"))try{const{error:k}=await z.from("notifications").delete().eq("user_id",e.id);if(k)throw k;a([]),o(0),r(n.notifications.deleteAllSuccess||"All notifications deleted","success")}catch(k){console.error("Error deleting all notifications:",k),r(n.notifications.deleteAllError||"Failed to delete all notifications","error")}},f=k=>{y(k.id),u(!1),k.type==="dream_completed"?t("/library"):k.type==="trial_expired"?t("/pricing"):k.dream_id?t("/social"):k.type==="follow"&&k.actor_id&&t(`/profile/${k.actor_id}`)},p=k=>{switch(k){case"like":return i.jsx(vr,{className:"text-pink-400",size:18});case"comment":return i.jsx(br,{className:"text-purple-400",size:18});case"follow":return i.jsx($c,{className:"text-cyan-400",size:18});case"dream_completed":return i.jsx(Oc,{className:"text-green-400",size:18});case"trial_expired":return i.jsx(om,{className:"text-yellow-400",size:18});default:return i.jsx(Hi,{className:"text-slate-400",size:18})}},w=k=>{var j,R;if(k.type==="dream_completed")return"Your dream analysis is ready! Click to view in your library.";if(k.type==="trial_expired")return"Your 3-day free trial has expired. Upgrade to continue using Submirra!";const v=((j=k.actor_profile)==null?void 0:j.full_name)||((R=k.actor_profile)==null?void 0:R.username)||"Someone";switch(k.type){case"like":return`${v} liked your dream`;case"comment":return`${v} commented on your dream`;case"follow":return`${v} started following you`;default:return"New notification"}},C=k=>{const v=new Date(k),j=new Date,R=j.getTime()-v.getTime(),P=Math.floor(R/6e4),Q=Math.floor(P/60),F=Math.floor(Q/24);return P<1?"Just now":P<60?`${P}m ago`:Q<24?`${Q}h ago`:F<7?`${F}d ago`:v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:v.getFullYear()!==j.getFullYear()?"numeric":void 0})};return e?i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>u(!c),className:"relative p-2 text-slate-400 hover:text-purple-400 transition-colors",children:[i.jsx(Hi,{size:20}),l>0&&i.jsx("span",{className:"absolute top-0 right-0 w-5 h-5 bg-pink-500 rounded-full text-white text-xs flex items-center justify-center font-bold",children:l>9?"9+":l})]}),c&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),i.jsxs("div",{className:"absolute right-0 top-12 w-[500px] max-h-[700px] bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-5 border-b border-purple-500/20 flex items-center justify-between",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Notifications"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[s.length>0&&i.jsxs("button",{onClick:x,className:"text-xs text-red-400 hover:text-red-300 transition-colors px-2 py-1 rounded hover:bg-red-500/10 flex items-center gap-1",title:n.notifications.deleteAll||"Delete all notifications",children:[i.jsx(ei,{size:12}),n.notifications.deleteAll||"Delete all"]}),l>0&&i.jsx("button",{onClick:A,className:"text-xs text-purple-400 hover:text-purple-300 transition-colors px-2 py-1 rounded hover:bg-purple-500/10",children:"Mark all read"}),i.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-white transition-colors",children:i.jsx(qt,{size:18})})]})]}),i.jsx("div",{className:"overflow-y-auto flex-1",children:d?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:24})}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Hi,{className:"mx-auto mb-4 text-slate-600",size:48}),i.jsx("p",{className:"text-slate-400",children:"No notifications yet"})]}):i.jsx("div",{className:"divide-y divide-purple-500/10",children:s.map(k=>i.jsxs("div",{className:`relative group ${k.read_at?"":"bg-purple-500/5"}`,children:[i.jsx("button",{onClick:()=>f(k),className:"w-full p-5 text-left hover:bg-slate-950/50 transition-colors",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:p(k.type)}),i.jsxs("div",{className:"flex-1 min-w-0 pr-8",children:[i.jsx("p",{className:"text-white text-sm leading-relaxed mb-2 break-words",children:w(k)}),i.jsx("p",{className:"text-slate-400 text-xs",children:C(k.created_at)})]}),!k.read_at&&i.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full flex-shrink-0 mt-2"})]})}),i.jsx("button",{onClick:v=>S(k.id,v),className:"absolute top-2 right-2 p-1.5 text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",title:"Delete notification",children:i.jsx(qt,{size:14})})]},k.id))})})]})]})]}):null}function qy(){const{user:e}=zt(),{showToast:t}=ur(),{t:r}=Xe(),[n,s]=b.useState(!1),[a,l]=b.useState("blocked"),[o,c]=b.useState([]),[u,d]=b.useState([]),[h,m]=b.useState(!1),[g,y]=b.useState(!0),[S,A]=b.useState(!1);b.useEffect(()=>{n&&e&&(x(),f(),C())},[n,e]);const x=async()=>{if(e){m(!0);try{console.log("Loading blocked users for user:",e.id);const{data:v,error:j}=await z.from("user_blocks").select("id, blocked_id").eq("blocker_id",e.id);if(j)throw console.error("Error loading blocks:",j),j;if(console.log("Found blocks:",v),!v||v.length===0){c([]);return}const R=v.map(q=>q.blocked_id),{data:P,error:Q}=await z.from("profiles").select("id, full_name, username, avatar_url").in("id",R);if(Q)throw console.error("Error loading profiles:",Q),Q;console.log("Found profiles:",P);const F=v.map(q=>{const ae=P==null?void 0:P.find(Se=>Se.id===q.blocked_id);return{id:q.id,blocked_id:q.blocked_id,blocked_user:ae||{id:q.blocked_id,full_name:"Unknown User",username:null,avatar_url:null}}}).filter(q=>q.blocked_user);console.log("Final formatted data:",F),c(F)}catch(v){console.error("Error loading blocked users:",v),t("Failed to load blocked users","error")}finally{m(!1)}}},f=async()=>{if(e){m(!0);try{console.log("Loading favorite users for user:",e.id);const{data:v,error:j}=await z.from("user_favorites").select("id, favorite_user_id").eq("user_id",e.id);if(j)throw console.error("Error loading favorites:",j),j;if(console.log("Found favorites:",v),!v||v.length===0){d([]);return}const R=v.map(q=>q.favorite_user_id),{data:P,error:Q}=await z.from("profiles").select("id, full_name, username, avatar_url").in("id",R);if(Q)throw console.error("Error loading profiles:",Q),Q;console.log("Found profiles:",P);const F=v.map(q=>{const ae=P==null?void 0:P.find(Se=>Se.id===q.favorite_user_id);return{id:q.id,favorite_user_id:q.favorite_user_id,favorite_user:ae||{id:q.favorite_user_id,full_name:"Unknown User",username:null,avatar_url:null}}}).filter(q=>q.favorite_user);console.log("Final formatted favorites data:",F),d(F)}catch(v){console.error("Error loading favorite users:",v),t("Failed to load favorite users","error")}finally{m(!1)}}},p=async(v,j)=>{if(e&&confirm(`${r.settings.unblockConfirm} ${j}?`))try{const{error:R}=await z.from("user_blocks").delete().eq("id",v);if(R)throw R;c(P=>P.filter(Q=>Q.id!==v)),t(`${j} ${r.settings.unblockSuccess}`,"success")}catch(R){console.error("Error unblocking user:",R),t("Failed to unblock user","error")}},w=async(v,j)=>{if(e&&confirm(`${j} kullancsn favorilerden karmak istediinizden emin misiniz?`))try{const{error:R}=await z.from("user_favorites").delete().eq("id",v);if(R)throw R;d(P=>P.filter(Q=>Q.id!==v)),t(`${j} favorilerden karld`,"success")}catch(R){console.error("Error removing favorite:",R),t("Favori kaldrlamad","error")}},C=async()=>{if(e)try{const{data:v}=await z.from("profiles").select("show_read_receipts").eq("id",e.id).single();v&&y(v.show_read_receipts!==!1)}catch(v){console.error("Error loading read receipts setting:",v)}},k=async v=>{if(e){A(!0);try{const{error:j}=await z.from("profiles").update({show_read_receipts:v}).eq("id",e.id);if(j)throw j;y(v),t(v?r.settings.readReceiptsEnabled||"Read receipts enabled":r.settings.readReceiptsDisabled||"Read receipts disabled","success")}catch(j){console.error("Error updating read receipts:",j),t(r.settings.readReceiptsUpdateError||"Failed to update read receipts","error")}finally{A(!1)}}};return e?i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>s(!n),className:"relative p-2 text-slate-400 hover:text-purple-400 transition-colors",title:r.settings.title,children:i.jsx(Dy,{size:20})}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),i.jsxs("div",{className:"absolute right-0 top-12 w-[600px] h-[calc(90vh-3rem)] bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"px-6 py-3 border-b border-purple-500/20 flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:r.settings.title}),i.jsx("button",{onClick:()=>s(!1),className:"text-slate-400 hover:text-white transition-colors",children:i.jsx(qt,{size:18})})]}),i.jsxs("div",{className:"flex border-b border-purple-500/20",children:[i.jsxs("button",{onClick:()=>l("blocked"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${a==="blocked"?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-white"}`,children:[i.jsx(Do,{size:14,className:"inline mr-1.5"}),r.settings.blockedUsers]}),i.jsxs("button",{onClick:()=>l("favorites"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${a==="favorites"?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-white"}`,children:[i.jsx(Ro,{size:14,className:"inline mr-1.5"}),r.settings.favorites]}),i.jsxs("button",{onClick:()=>l("privacy"),className:`flex-1 px-2 py-2 text-sm font-medium transition-colors ${a==="privacy"?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-white"}`,children:[i.jsx(Ao,{size:14,className:"inline mr-1.5"}),r.settings.privacy]}),i.jsxs("button",{onClick:()=>l("notifications"),className:`flex-1 px-2 py-2 text-sm font-medium transition-colors ${a==="notifications"?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-white"}`,children:[i.jsx(Hi,{size:14,className:"inline mr-1.5"}),r.settings.notifications]})]}),i.jsxs("div",{className:"flex-1 px-6 py-3 overflow-hidden",children:[a==="blocked"&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-400 text-xs mb-3",children:r.settings.blockedUsersDesc}),h?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:24})}):o.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Do,{className:"mx-auto mb-3 text-slate-600",size:40}),i.jsx("p",{className:"text-slate-400",children:r.settings.noBlockedUsers})]}):i.jsx("div",{className:"space-y-2 max-h-[calc(90vh-20rem)] overflow-y-auto",children:o.map(v=>i.jsxs("div",{className:"flex items-center gap-3 p-2.5 bg-slate-950/30 rounded-lg",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:v.blocked_user.avatar_url?i.jsx("img",{src:v.blocked_user.avatar_url,alt:"",className:"w-full h-full object-cover"}):i.jsx(Qe,{size:20,className:"text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white font-medium text-sm",children:v.blocked_user.full_name}),v.blocked_user.username&&i.jsxs("p",{className:"text-slate-400 text-xs",children:["@",v.blocked_user.username]})]}),i.jsx("button",{onClick:()=>p(v.id,v.blocked_user.full_name),className:"px-3 py-1.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white text-sm transition-colors",children:r.settings.unblock})]},v.id))})]}),a==="favorites"&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-400 text-xs mb-3",children:r.settings.favoritesDesc}),h?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:24})}):u.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ro,{className:"mx-auto mb-3 text-slate-600",size:40}),i.jsx("p",{className:"text-slate-400",children:r.settings.noFavorites})]}):i.jsx("div",{className:"space-y-2 max-h-[calc(90vh-20rem)] overflow-y-auto",children:u.map(v=>i.jsxs("div",{className:"flex items-center gap-3 p-2.5 bg-slate-950/30 rounded-lg",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center overflow-hidden",children:v.favorite_user.avatar_url?i.jsx("img",{src:v.favorite_user.avatar_url,alt:"",className:"w-full h-full object-cover"}):i.jsx(Qe,{size:20,className:"text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white font-medium text-sm",children:v.favorite_user.full_name}),v.favorite_user.username&&i.jsxs("p",{className:"text-slate-400 text-xs",children:["@",v.favorite_user.username]})]}),i.jsx("button",{onClick:()=>w(v.id,v.favorite_user.full_name),className:"px-3 py-1.5 rounded-lg bg-red-600 hover:bg-red-500 text-white text-sm transition-colors",children:r.settings.remove})]},v.id))})]}),a==="privacy"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-3",children:r.settings.privacyDesc}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"p-2.5 bg-slate-950/30 rounded-lg",children:i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsx("span",{className:"text-white text-sm",children:r.settings.profileVisibility}),i.jsxs("select",{className:"bg-slate-800 border border-purple-500/30 rounded px-3 py-1.5 text-white text-sm",children:[i.jsx("option",{children:r.settings.public}),i.jsx("option",{children:r.settings.private})]})]})}),i.jsx("div",{className:"p-2.5 bg-slate-950/30 rounded-lg",children:i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsx("span",{className:"text-white text-sm",children:r.settings.allowMessagesFrom}),i.jsxs("select",{className:"bg-slate-800 border border-purple-500/30 rounded px-3 py-1.5 text-white text-sm",children:[i.jsx("option",{children:r.settings.everyone}),i.jsx("option",{children:r.settings.followingOnly})]})]})}),i.jsx("div",{className:"p-2.5 bg-slate-950/30 rounded-lg",children:i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"text-white text-sm block",children:r.settings.showReadReceipts||"Show Read Receipts"}),i.jsx("span",{className:"text-slate-400 text-xs block mt-0.5",children:r.settings.showReadReceiptsDesc||"Let others know when you've seen their messages"})]}),S?i.jsx(Be,{className:"animate-spin text-purple-400",size:20}):i.jsx("input",{type:"checkbox",checked:g,onChange:v=>k(v.target.checked),className:"w-5 h-5 rounded cursor-pointer"})]})})]})]}),a==="notifications"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-3",children:r.settings.notificationsDesc}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-slate-950/30 rounded-lg cursor-pointer",children:[i.jsx("span",{className:"text-white text-sm",children:r.settings.likesOnDreams}),i.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),i.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-slate-950/30 rounded-lg cursor-pointer",children:[i.jsx("span",{className:"text-white text-sm",children:r.settings.comments}),i.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),i.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-slate-950/30 rounded-lg cursor-pointer",children:[i.jsx("span",{className:"text-white text-sm",children:r.settings.newFollowers}),i.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),i.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-slate-950/30 rounded-lg cursor-pointer",children:[i.jsx("span",{className:"text-white text-sm",children:r.settings.directMessages}),i.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})]})]})]})]})]})]}):null}function Hy(){const e=ft(),t=Uc(),{user:r,signOut:n}=zt(),{t:s}=Xe(),[a,l]=b.useState(!1),[o,c]=b.useState(null),u=[{label:s.nav.home,path:"/"},{label:s.nav.about,path:"/about"},{label:s.nav.social,path:"/social"},{label:s.nav.analyze,path:"/analyze"},{label:s.nav.library,path:"/library"}],d=[{label:s.nav.contact,path:"/contact"}],h=m=>{e(m),l(!1)};return b.useEffect(()=>{r?(async()=>{try{const{data:g,error:y}=await z.from("profiles").select("avatar_url, full_name").eq("id",r.id).single();if(y){console.error("Error loading user profile:",y);return}c(g)}catch(g){console.error("Error loading user profile:",g)}})():c(null)},[r]),i.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-slate-950/90 backdrop-blur-xl border-b border-pink-500/20 shadow-lg shadow-pink-500/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsx("div",{className:"flex items-center flex-shrink-0",children:i.jsx(Fy,{})}),i.jsxs("div",{className:"hidden lg:flex items-center gap-4 flex-shrink-0 whitespace-nowrap flex-1 justify-center",children:[u.map(m=>i.jsxs("button",{onClick:()=>e(m.path),className:`text-sm font-medium transition-all duration-300 hover:text-pink-400 relative group ${t===m.path?"text-pink-400 drop-shadow-[0_0_8px_rgba(236,72,153,0.6)]":"text-slate-300"}`,children:[m.label,i.jsx("span",{className:`absolute bottom-0 left-0 w-0 h-0.5 bg-pink-400 transition-all duration-300 group-hover:w-full ${t===m.path?"w-full":""}`})]},m.path)),d.map(m=>i.jsxs("button",{onClick:()=>e(m.path),className:`text-sm font-medium transition-all duration-300 hover:text-pink-400 relative group ${t===m.path?"text-pink-400 drop-shadow-[0_0_8px_rgba(236,72,153,0.6)]":"text-slate-300"}`,children:[m.label,i.jsx("span",{className:`absolute bottom-0 left-0 w-0 h-0.5 bg-pink-400 transition-all duration-300 group-hover:w-full ${t===m.path?"w-full":""}`})]},m.path)),i.jsx("button",{onClick:()=>e("/pricing"),className:`px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-lg hover:shadow-pink-500/30 hover:scale-105 ${t==="/pricing"?"ring-2 ring-pink-400":""}`,children:s.nav.buy}),i.jsx(bd,{}),r?i.jsxs(i.Fragment,{children:[i.jsx(qy,{}),i.jsx(By,{}),i.jsx("button",{onClick:()=>e("/messages"),className:"relative p-2 text-slate-400 hover:text-purple-400 transition-colors",title:s.nav.messages,children:i.jsx(Cy,{size:20})}),i.jsx("button",{onClick:()=>e("/profile"),className:"flex items-center gap-2 p-1 rounded-full bg-slate-800/50 hover:bg-slate-700/50 transition-all duration-200 group",title:(o==null?void 0:o.full_name)||"Profile",children:i.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden group-hover:border-pink-500/50 transition-all",children:o!=null&&o.avatar_url?i.jsx("img",{src:o.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):i.jsx(Qe,{className:"text-pink-400",size:16})})}),i.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 transition-all duration-200",children:[i.jsx(yd,{size:16}),s.nav.signOut]})]}):i.jsx("button",{onClick:()=>e("/signin"),className:`px-6 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 hover:shadow-lg hover:shadow-pink-500/30 ${t==="/signin"?"ring-2 ring-pink-400":""}`,children:s.nav.signIn})]}),i.jsxs("div",{className:"flex lg:hidden items-center gap-3",children:[i.jsx(bd,{}),i.jsx("button",{onClick:()=>l(!a),className:"text-slate-300 hover:text-pink-400 transition-colors p-2","aria-label":"Toggle menu",children:a?i.jsx(qt,{size:24}):i.jsx(Ey,{size:24})})]})]}),a&&i.jsx("div",{className:"lg:hidden mt-4 pb-4 border-t border-pink-500/20 pt-4 animate-slide-down",children:i.jsxs("div",{className:"flex flex-col gap-3",children:[u.map((m,g)=>i.jsx("button",{onClick:()=>h(m.path),className:`text-left px-4 py-2 rounded-lg font-medium transition-all duration-200 animate-fade-in ${t===m.path?"bg-pink-500/10 text-pink-400":"text-slate-300 hover:bg-slate-800/50 hover:text-pink-400"}`,style:{animationDelay:`${g*.05}s`},children:m.label},m.path)),d.map((m,g)=>i.jsx("button",{onClick:()=>h(m.path),className:`text-left px-4 py-2 rounded-lg font-medium transition-all duration-200 animate-fade-in ${t===m.path?"bg-pink-500/10 text-pink-400":"text-slate-300 hover:bg-slate-800/50 hover:text-pink-400"}`,style:{animationDelay:`${(u.length+g)*.05}s`},children:m.label},m.path)),i.jsx("button",{onClick:()=>{e("/pricing"),l(!1)},className:`text-left px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 animate-fade-in ${t==="/pricing"?"ring-2 ring-pink-400":""}`,style:{animationDelay:`${(u.length+d.length)*.05}s`},children:s.nav.buy}),r?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>{e("/profile"),l(!1)},className:"flex items-center gap-3 px-4 py-2 rounded-lg bg-slate-800/50 text-slate-300 hover:bg-slate-800/70 hover:text-pink-400 transition-all duration-200 animate-fade-in",style:{animationDelay:`${(u.length+d.length+1)*.05}s`},children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden",children:o!=null&&o.avatar_url?i.jsx("img",{src:o.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):i.jsx(Qe,{className:"text-pink-400",size:12})}),(o==null?void 0:o.full_name)||"Profile"]}),i.jsxs("button",{onClick:()=>{n(),l(!1)},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 transition-all duration-200 animate-fade-in",style:{animationDelay:`${(u.length+d.length+2)*.05}s`},children:[i.jsx(yd,{size:16}),s.nav.signOut]})]}):i.jsx("button",{onClick:()=>{e("/signin"),l(!1)},className:`text-left px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 animate-fade-in ${t==="/signin"?"ring-2 ring-pink-400":""}`,style:{animationDelay:`${(u.length+d.length+1)*.05}s`},children:s.nav.signIn})]})})]})})}function Wy(){const e=ft(),{t}=Xe();return i.jsx("footer",{className:"relative border-t border-purple-500/20 bg-slate-950/50 backdrop-blur-sm",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsx("button",{onClick:()=>e("/terms"),className:"text-slate-400 hover:text-purple-400 transition-colors",children:t.footer.termsOfService}),i.jsx("button",{onClick:()=>e("/privacy"),className:"text-slate-400 hover:text-purple-400 transition-colors",children:t.footer.privacyPolicy}),i.jsx("button",{onClick:()=>e("/feedback"),className:"text-slate-400 hover:text-purple-400 transition-colors",children:t.footer.feedback})]}),i.jsxs("div",{className:"text-slate-500 text-xs",children:[" ",new Date().getFullYear()," Submirra. All rights reserved."]})]})})})}function Gy(){const e=b.useRef(null);return b.useEffect(()=>{const t=e.current;if(!t)return;const r=t.getContext("2d");if(!r)return;let n,s=[];const a=()=>{t.width=window.innerWidth,t.height=window.innerHeight,l()},l=()=>{s=[];const d=Math.floor(t.width*t.height/3e3);for(let h=0;h<d;h++)s.push({x:Math.random()*t.width,y:Math.random()*t.height,z:Math.random()*3,size:Math.random()*1.5+.5,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3})},o=()=>{s.forEach(d=>{d.x+=d.vx,d.y+=d.vy,d.x<0&&(d.x=t.width),d.x>t.width&&(d.x=0),d.y<0&&(d.y=t.height),d.y>t.height&&(d.y=0)})},c=()=>{r.clearRect(0,0,t.width,t.height),s.forEach(d=>{const h=.3+d.z/3*.7;r.fillStyle=`rgba(255, 255, 255, ${h})`,r.beginPath(),r.arc(d.x,d.y,d.size,0,Math.PI*2),r.fill(),Math.random()>.998&&(r.shadowBlur=10,r.shadowColor=d.z>2?"#ec4899":d.z>1?"#a855f7":"#06b6d4",r.fill(),r.shadowBlur=0)})},u=()=>{o(),c(),n=requestAnimationFrame(u)};return a(),u(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),cancelAnimationFrame(n)}},[]),i.jsx("canvas",{ref:e,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:.4}})}function wd(){const e=ft(),{user:t}=zt(),{t:r}=Xe(),[n,s]=b.useState({x:0,y:0});return b.useEffect(()=>{let a,l=0,o=0;const c=u=>{a&&cancelAnimationFrame(a),a=requestAnimationFrame(()=>{const d=(u.clientX/window.innerWidth-.5)*20,h=(u.clientY/window.innerHeight-.5)*20;(Math.abs(d-l)>.5||Math.abs(h-o)>.5)&&(s({x:d,y:h}),l=d,o=h)})};return window.addEventListener("mousemove",c,{passive:!0}),()=>{window.removeEventListener("mousemove",c),a&&cancelAnimationFrame(a)}},[]),i.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[i.jsx("style",{children:`
        @keyframes nebulaFlow {
          0%, 100% { 
            transform: translateY(0) scale(1); 
            opacity: 0.2; 
          }
          50% { 
            transform: translateY(-20px) scale(1.08); 
            opacity: 0.3; 
          }
        }
      `}),i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl",style:{transform:`translate3d(${n.x*.08}px, ${n.y*.08}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}}),i.jsx("div",{className:"absolute bottom-20 left-1/3 w-80 h-80 bg-cyan-500/5 rounded-full blur-3xl",style:{transform:`translate3d(${n.x*.12}px, ${n.y*.12}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}}),i.jsx("div",{className:"absolute top-[20%] right-[12%] w-[400px] h-[400px] md:w-[550px] md:h-[550px] opacity-15",style:{background:"radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, rgba(99, 102, 241, 0.2) 40%, transparent 100%)",filter:"blur(70px)",transform:`translate3d(${n.x*.05}px, ${n.y*.05}px, 0)`,transition:"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",borderRadius:"50%"}}),i.jsxs("svg",{className:"absolute top-[10%] right-[8%] w-[450px] h-[650px] md:w-[650px] md:h-[850px] opacity-20",viewBox:"0 0 450 650",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",filter:"blur(45px)",animation:"nebulaFlow 14s ease-in-out infinite",animationDelay:"1.5s"},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"lavenderNebulaGrad",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(167, 139, 250, 0.4)"}),i.jsx("stop",{offset:"25%",stopColor:"rgba(192, 132, 252, 0.32)"}),i.jsx("stop",{offset:"50%",stopColor:"rgba(196, 181, 253, 0.28)"}),i.jsx("stop",{offset:"75%",stopColor:"rgba(167, 139, 250, 0.2)"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(192, 132, 252, 0.1)"})]})}),i.jsx("path",{d:"M 400,600 Q 350,500 300,450 Q 250,400 200,350 Q 150,300 100,250 Q 50,200 0,150",stroke:"url(#lavenderNebulaGrad)",strokeWidth:"120",fill:"none",strokeLinecap:"round"}),i.jsx("path",{d:"M 350,600 Q 300,500 250,450 Q 200,400 150,350 Q 100,300 50,250",stroke:"url(#lavenderNebulaGrad)",strokeWidth:"100",fill:"none",strokeLinecap:"round",opacity:"0.7"}),i.jsx("path",{d:"M 375,600 Q 325,500 275,450 Q 225,400 175,350 Q 125,300 75,250 Q 25,200 0,180",stroke:"url(#lavenderNebulaGrad)",strokeWidth:"85",fill:"none",strokeLinecap:"round",opacity:"0.55"})]})]}),i.jsx("div",{className:"relative pt-24 md:pt-32 pb-16 md:pb-20 px-4 md:px-6 z-10",children:i.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[i.jsxs("div",{className:"mb-6 md:mb-8 inline-block animate-fade-in",children:[i.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",style:{willChange:"transform",transform:"translateZ(0)"},children:r.home.title}),i.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-slate-200 font-light tracking-wide px-2",children:r.home.subtitle})]}),i.jsx("p",{className:"text-base md:text-lg text-slate-300 max-w-3xl mx-auto mb-8 md:mb-12 leading-relaxed px-4",children:r.home.description}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[i.jsxs("button",{onClick:()=>e(t?"/analyze":"/signin"),className:"group px-8 md:px-10 py-4 md:py-5 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold text-base md:text-lg hover:from-pink-500 hover:to-purple-500 transition-all duration-300 flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-pink-500/50 focus:ring-offset-2 focus:ring-offset-slate-950 active:scale-95",style:{transform:`translate3d(${n.x*.05}px, ${n.y*.05}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"},"aria-label":t?r.home.cta:r.home.getStarted,children:[t?r.home.cta:r.home.getStarted,i.jsx(Lc,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform duration-300"})]}),i.jsx("button",{onClick:()=>e("/about"),className:"px-8 md:px-10 py-4 md:py-5 rounded-lg bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 text-slate-200 font-semibold text-base md:text-lg hover:border-purple-500/50 hover:text-white hover:bg-slate-800/60 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-slate-950 active:scale-95",style:{transform:`translate3d(${n.x*.05}px, ${n.y*.05}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"},"aria-label":r.home.learnMore,children:r.home.learnMore})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 mt-12 md:mt-24 max-w-5xl mx-auto",children:[i.jsxs("div",{className:"group bg-slate-900/70 backdrop-blur-sm rounded-2xl p-6 hover:shadow-xl hover:shadow-pink-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2 focus-within:ring-2 focus-within:ring-pink-500/50 focus-within:ring-offset-2 focus-within:ring-offset-slate-950",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",boxShadow:"0 0 0 0.5px rgba(236, 72, 153, 0.12), inset 0 0 0 0.5px rgba(236, 72, 153, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(236, 72, 153, 0.08)"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(236, 72, 153, 0.25), inset 0 0 0 0.5px rgba(236, 72, 153, 0.12), 0 4px 12px rgba(236, 72, 153, 0.15), 0 0 30px rgba(236, 72, 153, 0.12)"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(236, 72, 153, 0.12), inset 0 0 0 0.5px rgba(236, 72, 153, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(236, 72, 153, 0.08)"},tabIndex:0,role:"article","aria-label":r.home.feature1Title,children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500/10 to-transparent opacity-40 group-hover:opacity-100 transition-opacity duration-500"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-pink-500/30 to-pink-600/20 flex items-center justify-center border-2 border-pink-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-pink-500/40 group-hover:border-pink-400/60",children:i.jsx(cm,{className:"w-8 h-8 text-pink-400 group-hover:text-pink-300 transition-colors"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-pink-100 transition-colors",children:r.home.feature1Title}),i.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-4 group-hover:text-slate-200 transition-colors",children:r.home.feature1Desc}),i.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:r.home.feature1Details.split("  ").map((a,l)=>i.jsx("div",{className:"px-3 py-2 bg-pink-500/20 text-pink-300 text-xs font-medium rounded-lg border border-pink-500/30 group-hover:bg-pink-500/30 group-hover:border-pink-400/50 transition-all text-center",children:a},l))}),i.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[i.jsx(ti,{className:"w-4 h-4 text-pink-400"}),i.jsx(jy,{className:"w-4 h-4 text-pink-400"}),i.jsx(Lo,{className:"w-4 h-4 text-pink-400"})]})]})]}),i.jsxs("div",{className:"group bg-slate-900/70 backdrop-blur-sm rounded-2xl p-6 hover:shadow-xl hover:shadow-purple-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2 focus-within:ring-2 focus-within:ring-purple-500/50 focus-within:ring-offset-2 focus-within:ring-offset-slate-950",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",boxShadow:"0 0 0 0.5px rgba(167, 139, 250, 0.12), inset 0 0 0 0.5px rgba(167, 139, 250, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(167, 139, 250, 0.08)"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(167, 139, 250, 0.25), inset 0 0 0 0.5px rgba(167, 139, 250, 0.12), 0 4px 12px rgba(167, 139, 250, 0.15), 0 0 30px rgba(167, 139, 250, 0.12)"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(167, 139, 250, 0.12), inset 0 0 0 0.5px rgba(167, 139, 250, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(167, 139, 250, 0.08)"},tabIndex:0,role:"article","aria-label":r.home.feature2Title,children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-transparent opacity-40 group-hover:opacity-100 transition-opacity duration-500"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-500/30 to-purple-600/20 flex items-center justify-center border-2 border-purple-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-purple-500/40 group-hover:border-purple-400/60",children:i.jsx(xd,{className:"w-8 h-8 text-purple-400 group-hover:text-purple-300 transition-colors"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-purple-100 transition-colors",children:r.home.feature2Title}),i.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-6 group-hover:text-slate-200 transition-colors",children:r.home.feature2Desc}),i.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:r.home.feature2Details.split("  ").map((a,l)=>i.jsx("div",{className:"px-3 py-2 bg-purple-500/20 text-purple-300 text-xs font-medium rounded-lg border border-purple-500/30 group-hover:bg-purple-500/30 group-hover:border-purple-400/50 transition-all text-center",children:a},l))}),i.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[i.jsx(Ty,{className:"w-4 h-4 text-purple-400"}),i.jsx(Bt,{className:"w-4 h-4 text-purple-400"}),i.jsx(xd,{className:"w-4 h-4 text-purple-400"})]})]})]}),i.jsxs("div",{className:"group bg-slate-900/70 backdrop-blur-sm rounded-2xl p-6 hover:shadow-xl hover:shadow-cyan-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2 focus-within:ring-2 focus-within:ring-cyan-500/50 focus-within:ring-offset-2 focus-within:ring-offset-slate-950",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",boxShadow:"0 0 0 0.5px rgba(6, 182, 212, 0.12), inset 0 0 0 0.5px rgba(6, 182, 212, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1)"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(6, 182, 212, 0.25), inset 0 0 0 0.5px rgba(6, 182, 212, 0.12), 0 4px 12px rgba(6, 182, 212, 0.15)"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(6, 182, 212, 0.12), inset 0 0 0 0.5px rgba(6, 182, 212, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1)"},tabIndex:0,role:"article","aria-label":r.home.feature3Title,children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-transparent opacity-30 group-hover:opacity-100 transition-opacity duration-500"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-cyan-500/30 to-cyan-600/20 flex items-center justify-center border-2 border-cyan-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-cyan-500/40 group-hover:border-cyan-400/60",children:i.jsx(xn,{className:"w-8 h-8 text-cyan-400 group-hover:text-cyan-300 transition-colors"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-cyan-100 transition-colors",children:r.home.feature3Title}),i.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-4 group-hover:text-slate-200 transition-colors",children:r.home.feature3Desc}),i.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:r.home.feature3Details.split("  ").map((a,l)=>i.jsx("div",{className:"px-3 py-2 bg-cyan-500/20 text-cyan-300 text-xs font-medium rounded-lg border border-cyan-500/30 group-hover:bg-cyan-500/30 group-hover:border-cyan-400/50 transition-all text-center",children:a},l))}),i.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[i.jsx(ky,{className:"w-4 h-4 text-cyan-400"}),i.jsx(Lo,{className:"w-4 h-4 text-cyan-400"}),i.jsx(xn,{className:"w-4 h-4 text-cyan-400"})]})]})]})]})]})}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-[190px] md:h-[240px] lg:h-[300px] pointer-events-none z-0 opacity-85",children:[i.jsxs("svg",{viewBox:"0 0 1200 310",className:"w-full h-full",preserveAspectRatio:"none",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"cloudGrad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(167, 139, 250, 0.4)",stopOpacity:"0.35"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(196, 181, 253, 0.35)",stopOpacity:"0.3"})]})}),i.jsx("path",{d:"M 0,310 L 0,190 Q 120,175 250,190 Q 400,175 550,190 Q 700,175 850,190 Q 1000,175 1150,190 L 1200,190 L 1200,310 Z",fill:"url(#cloudGrad1)",style:{filter:"blur(5px) drop-shadow(0 -3px 6px rgba(15, 23, 42, 0.2))",transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}})]}),i.jsxs("svg",{viewBox:"0 0 1200 350",className:"w-full h-full absolute top-0",preserveAspectRatio:"none",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"cloudGrad2",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(167, 139, 250, 0.35)",stopOpacity:"0.8"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(96, 165, 250, 0.3)",stopOpacity:"0.75"})]})}),i.jsx("path",{d:"M 0,300 L 0,200 Q 150,185 300,200 Q 450,185 600,200 Q 750,185 900,200 Q 1050,185 1200,200 L 1200,300 Z",fill:"url(#cloudGrad2)",style:{filter:"blur(4px) drop-shadow(0 -2px 4px rgba(30, 41, 59, 0.18))",transform:`translate3d(${n.x*.025}px, ${n.y*.025-8}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}})]}),i.jsxs("svg",{viewBox:"0 0 1200 350",className:"w-full h-full absolute top-0",preserveAspectRatio:"none",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"cloudGrad3",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(167, 139, 250, 0.3)",stopOpacity:"0.75"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(196, 181, 253, 0.25)",stopOpacity:"0.7"})]})}),i.jsx("path",{d:"M 0,300 L 0,210 Q 180,195 360,210 Q 540,195 720,210 Q 900,195 1080,210 L 1200,210 L 1200,300 Z",fill:"url(#cloudGrad3)",style:{filter:"blur(3px) drop-shadow(0 -2px 3px rgba(51, 65, 85, 0.15))",transform:`translate3d(${n.x*.02}px, ${n.y*.02-15}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}})]}),i.jsxs("svg",{viewBox:"0 0 1200 350",className:"w-full h-full absolute top-0",preserveAspectRatio:"none",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"cloudGrad4",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(196, 181, 253, 0.3)",stopOpacity:"0.7"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(125, 211, 252, 0.25)",stopOpacity:"0.65"})]})}),i.jsx("path",{d:"M 0,300 L 0,220 Q 200,205 400,220 Q 600,205 800,220 Q 1000,205 1200,220 L 1200,300 Z",fill:"url(#cloudGrad4)",style:{filter:"blur(2px) drop-shadow(0 -1px 2px rgba(71, 85, 105, 0.12))",transform:`translate3d(${n.x*.015}px, ${n.y*.015-22}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}})]}),i.jsxs("svg",{viewBox:"0 0 1200 350",className:"w-full h-full absolute top-0",preserveAspectRatio:"none",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"cloudGrad5",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(244, 114, 182, 0.2)",stopOpacity:"0.65"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(196, 181, 253, 0.18)",stopOpacity:"0.6"})]})}),i.jsx("path",{d:"M 0,300 L 0,240 Q 250,230 500,240 Q 750,230 1000,240 L 1200,240 L 1200,300 Z",fill:"url(#cloudGrad5)",style:{filter:"blur(1px) drop-shadow(0 -0.5px 1px rgba(100, 116, 139, 0.1))",transform:`translate3d(${n.x*.01}px, ${n.y*.01-28}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}})]})]})]})}function Vy(){const{t:e}=Xe();return i.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-40 left-20 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-pink-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[i.jsxs("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.about.title}),i.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:e.about.subtitle})]}),i.jsxs("div",{className:"space-y-6 md:space-y-12",children:[i.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-2xl p-5 md:p-8 hover:border-pink-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-pink-500/10 hover:-translate-y-1 animate-fade-in-delay",children:i.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-pink-500/20 to-pink-600/20 flex items-center justify-center border border-pink-500/30 flex-shrink-0",children:i.jsx(cm,{className:"text-pink-400",size:20})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.missionTitle}),i.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed",children:e.about.missionDesc})]})]})}),i.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-8 hover:border-purple-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-purple-500/10 hover:-translate-y-1 animate-fade-in-delay-2",children:i.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-purple-500/20 to-purple-600/20 flex items-center justify-center border border-purple-500/30 flex-shrink-0",children:i.jsx(Bt,{className:"text-purple-400",size:20})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.howItWorksTitle}),i.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed mb-3 md:mb-4",children:e.about.howItWorksDesc}),i.jsxs("ul",{className:"space-y-2 text-sm md:text-base text-slate-300",children:[i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),i.jsx("span",{children:e.about.step1})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),i.jsx("span",{children:e.about.step2})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),i.jsx("span",{children:e.about.step3})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),i.jsx("span",{children:e.about.step4})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),i.jsx("span",{children:e.about.step5})]})]})]})]})}),i.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-8 hover:border-cyan-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-cyan-500/10 hover:-translate-y-1 animate-fade-in-delay-3",children:i.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-cyan-500/20 to-cyan-600/20 flex items-center justify-center border border-cyan-500/30 flex-shrink-0",children:i.jsx(Do,{className:"text-cyan-400",size:20})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.privacyTitle}),i.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed",children:e.about.privacyDesc})]})]})}),i.jsx("div",{className:"text-center pt-6 md:pt-8",children:i.jsx("p",{className:"text-sm md:text-base text-slate-400 italic px-4",children:e.about.quote})})]})]})]})}class ui{constructor(t=0,r="Network Error"){this.status=t,this.text=r}}const Ky=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},st={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Ky()},Mc=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},Yy=(e,t="https://api.emailjs.com")=>{if(!e)return;const r=Mc(e);st.publicKey=r.publicKey,st.blockHeadless=r.blockHeadless,st.storageProvider=r.storageProvider,st.blockList=r.blockList,st.limitRate=r.limitRate,st.origin=r.origin||t},mm=async(e,t,r={})=>{const n=await fetch(st.origin+e,{method:"POST",headers:r,body:t}),s=await n.text(),a=new ui(n.status,s);if(n.ok)return a;throw a},pm=(e,t,r)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Qy=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},gm=e=>e.webdriver||!e.languages||e.languages.length===0,xm=()=>new ui(451,"Unavailable For Headless Browser"),Jy=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},Xy=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},Zy=(e,t)=>e instanceof FormData?e.get(t):e[t],ym=(e,t)=>{if(Xy(e))return!1;Jy(e.list,e.watchVariable);const r=Zy(t,e.watchVariable);return typeof r!="string"?!1:e.list.includes(r)},vm=()=>new ui(403,"Forbidden"),ev=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},tv=async(e,t,r)=>{const n=Number(await r.get(e)||0);return t-Date.now()+n},bm=async(e,t,r)=>{if(!t.throttle||!r)return!1;ev(t.throttle,t.id);const n=t.id||e;return await tv(n,t.throttle,r)>0?!0:(await r.set(n,Date.now().toString()),!1)},wm=()=>new ui(429,"Too Many Requests"),rv=async(e,t,r,n)=>{const s=Mc(n),a=s.publicKey||st.publicKey,l=s.blockHeadless||st.blockHeadless,o=s.storageProvider||st.storageProvider,c={...st.blockList,...s.blockList},u={...st.limitRate,...s.limitRate};return l&&gm(navigator)?Promise.reject(xm()):(pm(a,e,t),Qy(r),r&&ym(c,r)?Promise.reject(vm()):await bm(location.pathname,u,o)?Promise.reject(wm()):mm("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"}))},nv=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},sv=e=>typeof e=="string"?document.querySelector(e):e,iv=async(e,t,r,n)=>{const s=Mc(n),a=s.publicKey||st.publicKey,l=s.blockHeadless||st.blockHeadless,o=st.storageProvider||s.storageProvider,c={...st.blockList,...s.blockList},u={...st.limitRate,...s.limitRate};if(l&&gm(navigator))return Promise.reject(xm());const d=sv(r);pm(a,e,t),nv(d);const h=new FormData(d);return ym(c,h)?Promise.reject(vm()):await bm(location.pathname,u,o)?Promise.reject(wm()):(h.append("lib_version","4.4.1"),h.append("service_id",e),h.append("template_id",t),h.append("user_id",a),mm("/api/v1.0/email/send-form",h))},ba={init:Yy,send:rv,sendForm:iv,EmailJSResponseStatus:ui};function av(){const{t:e}=Xe(),{showToast:t}=ur(),{user:r}=zt(),n=ft(),[s,a]=b.useState({name:"",email:"",subject:"",message:""}),[l,o]=b.useState(!1),[c,u]=b.useState(!1),d="ded2c1c6-7064-499f-a1e7-a8f90c95904a",h="AdvA9XekMYHYYOhcF";b.useEffect(()=>{ba.init(h)},[]);const m=async g=>{var y;g.preventDefault(),u(!0);try{const S={name:s.name,email:s.email,time:new Date().toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),message:`${s.subject?`Konu: ${s.subject}

`:""}${s.message}`},A="service_6btsv5d",x="template_x7aji5u";try{console.log(" EmailJS Gnderiliyor...",{serviceId:A,templateId:x,publicKey:h,templateParams:S});const f=await ba.send(A,x,S);if(console.log(" EmailJS Baarl:",f),r)try{const p=` Contact Form Mesaj

sim: ${s.name}
Email: ${s.email}
Konu: ${s.subject}

Mesaj:
${s.message}`,{error:w}=await z.from("messages").insert({sender_id:r.id,receiver_id:d,message_text:p});w?console.error(" Mesaj kaydetme hatas:",w):console.log(" Mesaj site ii mesajlama sistemine kaydedildi")}catch(p){console.error(" Mesaj kaydetme hatas:",p)}o(!0),a({name:"",email:"",subject:"",message:""}),t("Mesajnz baaryla gnderildi! En ksa srede size dn yapacaz.","success"),setTimeout(()=>o(!1),5e3)}catch(f){console.error(" EmailJS Hatas:",f);let p="Email gnderilirken bir hata olutu.";if(f!=null&&f.text?p=`Email hatas: ${f.text}`:f!=null&&f.message?p=`Email hatas: ${f.message}`:typeof f=="string"&&(p=`Email hatas: ${f}`),console.error("EmailJS hata detaylar:",{status:f==null?void 0:f.status,text:f==null?void 0:f.text,message:f==null?void 0:f.message,statusText:f==null?void 0:f.statusText,response:f==null?void 0:f.response,fullError:f}),(f==null?void 0:f.status)===400){let w="Template parametreleri hatal olabilir.";f!=null&&f.text?w=f.text:f!=null&&f.message?w=f.message:(y=f==null?void 0:f.response)!=null&&y.text&&(w=f.response.text),console.error("EmailJS 400 hatas detay:",w),console.error("Gnderilen parametreler:",S),t(`EmailJS hatas: ${w}`,"error")}else t(p,"error");console.log(" Contact Form Mesaj (EmailJS hatas nedeniyle console'a kaydedildi):",{sim:s.name,Email:s.email,Konu:s.subject,Mesaj:s.message,Tarih:new Date().toLocaleString("tr-TR"),Hata:f})}}catch(S){console.error("Form gnderme hatas:",S),t("Mesaj gnderilirken bir hata olutu. Ltfen tekrar deneyin.","error")}finally{u(!1)}};return i.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-cyan-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.contact.title}),i.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:e.contact.subtitle})]}),i.jsxs("div",{className:"flex justify-center items-center gap-4 mb-8 md:mb-12 animate-fade-in-delay flex-wrap",children:[i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-2xl p-6 md:p-8 hover:border-pink-500/40 transition-all duration-500 md:hover:-translate-y-2 hover:shadow-xl hover:shadow-pink-500/10 max-w-md w-full",children:[i.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 rounded-full bg-gradient-to-br from-pink-500/20 to-pink-600/20 flex items-center justify-center border border-pink-500/30 mb-3 md:mb-4 mx-auto",children:i.jsx(um,{className:"text-pink-400",size:24})}),i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3 text-center",children:e.contact.emailSupport}),i.jsx("p",{className:"text-slate-300 text-center text-base md:text-lg break-all",children:"submirra.ai@gmail.com"})]}),i.jsxs("button",{onClick:()=>{if(!r){t(e.contact.pleaseSignInToMessage,"info"),n("/signin");return}n("/messages?user=ded2c1c6-7064-499f-a1e7-a8f90c95904a")},className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6 md:p-8 hover:border-purple-500/40 transition-all duration-500 md:hover:-translate-y-2 hover:shadow-xl hover:shadow-purple-500/10 flex flex-col items-center justify-center min-w-[140px] md:min-w-[160px] h-full",children:[i.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 rounded-full bg-gradient-to-br from-purple-500/20 to-purple-600/20 flex items-center justify-center border border-purple-500/30 mb-3 md:mb-4",children:i.jsx(br,{className:"text-purple-400",size:24})}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white mb-2 text-center",children:e.contact.messageSubmirra}),i.jsx("p",{className:"text-slate-300 text-center text-sm md:text-base",children:e.contact.viaWebsite})]})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-8 hover:border-cyan-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-cyan-500/10 animate-fade-in-delay-2",children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-5 md:mb-6",children:e.contact.sendMessage}),l&&i.jsx("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg text-green-400",children:e.contact.thankYou}),i.jsxs("form",{onSubmit:m,className:"space-y-5 md:space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:e.contact.name}),i.jsx("input",{type:"text",value:s.name,onChange:g=>a({...s,name:g.target.value}),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:e.contact.namePlaceholder,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:e.contact.email}),i.jsx("input",{type:"email",value:s.email,onChange:g=>a({...s,email:g.target.value}),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:e.contact.emailPlaceholder,required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:e.contact.subject}),i.jsx("input",{type:"text",value:s.subject,onChange:g=>a({...s,subject:g.target.value}),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:e.contact.subjectPlaceholder,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:e.contact.message}),i.jsx("textarea",{value:s.message,onChange:g=>a({...s,message:g.target.value}),className:"w-full h-32 px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none text-sm md:text-base",placeholder:e.contact.messagePlaceholder,required:!0})]}),i.jsx("button",{type:"submit",disabled:c,className:"w-full px-5 md:px-6 py-3 md:py-4 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/30 flex items-center justify-center gap-2 text-sm md:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Gnderiliyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ha,{size:18}),e.contact.send]})})]})]})]})]})}function lv(){const{user:e}=zt(),t=ft(),{t:r,language:n}=Xe(),{showToast:s}=ur(),[a,l]=b.useState(""),[o,c]=b.useState(!1),[u,d]=b.useState(null),[h,m]=b.useState(null),[g,y]=b.useState(null),[S,A]=b.useState(!1);b.useEffect(()=>{e||t("/signin")},[e,t]);async function x(C,k,v="tr"){try{let j="trial",R=1;try{const{data:F,error:q}=await z.from("subscriptions").select("plan_type, visualizations_per_analysis").eq("user_id",k).single();!q&&F&&(j=F.plan_type||"trial",R=F.visualizations_per_analysis||1)}catch(F){console.warn("Could not fetch subscription info, using defaults:",F)}const Q=await(await fetch("https://borablt.app.n8n.cloud/webhook/dream-webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:k,dream_text:C,plan_type:j,visualizations_per_analysis:R,language:v})})).json();return console.log("N8N response:",Q),Q}catch(j){throw console.error("N8N webhook error:",j),j}}const f=async C=>{var k;if(C.preventDefault(),!(!a.trim()||!e)){c(!0),y(null);try{const{data:v,error:j}=await z.rpc("can_user_submit_analysis",{p_user_id:e.id});if(j)console.error("Error checking analysis permission:",j);else if(v===!1){y("Trial sreniz dolmu. Analiz yapmak iin ltfen standart veya premium paket satn aln."),s("Trial sreniz dolmu. Paket satn almak iin Pricing sayfasna gidin.","error"),c(!1);return}const{data:R,error:P}=await z.rpc("check_trial_analysis_limit",{p_user_id:e.id});if(P)console.error("Error checking trial limit:",P);else if(R===!1){y("Trial analiz hakknz dolmu. Daha fazla analiz iin ltfen standart veya premium paket satn aln."),s("Trial analiz hakknz dolmu. Paket satn almak iin Pricing sayfasna gidin.","error"),c(!1);return}const Q={user_id:e.id,dream_text:a,status:"pending",is_public:S};n==="tr"?Q.dream_text_tr=a:Q.dream_text_en=a;const{data:F,error:q}=await z.from("dreams").insert(Q).select().single();if(q)if((k=q.message)!=null&&k.includes("is_public")||q.code==="42703"||q.code==="PGRST116"){console.warn("is_public column not found, saving without it. Please run migration.");const{data:ae,error:Se}=await z.from("dreams").insert({user_id:e.id,dream_text:a,status:"pending"}).select().single();if(Se)throw Se}else throw q;try{await z.rpc("increment_trial_analyses_used",{p_user_id:e.id})}catch(ae){console.error("Failed to increment trial analyses:",ae)}try{await x(a,e.id,n)}catch(ae){console.error("Failed to send to N8N:",ae)}d(r.analyze.savedMessage),m("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiMwMDAwMDAiLz48L3N2Zz4="),l(""),s("Dream saved successfully! Analysis will be ready soon.","success")}catch(v){const j=v instanceof Error?v.message:"Failed to save dream";y(j),s(j,"error")}finally{c(!1)}}},p=a.length,w=5e3;return e?i.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-cyan-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-6xl mx-auto z-10",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:r.analyze.title}),i.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:r.analyze.subtitle})]}),u?i.jsx("div",{className:"max-w-6xl mx-auto animate-fade-in",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"bg-gradient-to-br from-pink-500/10 to-purple-500/10 border border-pink-500/20 rounded-2xl p-6 md:p-8 backdrop-blur-sm",children:[i.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 flex items-center justify-center border border-pink-500/30",children:i.jsx(Bt,{className:"text-pink-400",size:20})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:r.analyze.processingTitle}),i.jsx("p",{className:"text-sm md:text-base text-pink-300 leading-relaxed",children:r.analyze.pendingMessage})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-start",children:[i.jsxs("button",{onClick:()=>t("/library"),className:"group flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white rounded-xl font-medium transition-all duration-300 hover:shadow-lg hover:shadow-pink-500/30 hover:scale-105",children:[i.jsx(xn,{size:18}),i.jsx("span",{children:r.analyze.goToLibrary}),i.jsx(Lc,{size:16,className:"group-hover:translate-x-1 transition-transform"})]}),i.jsxs("button",{onClick:()=>{d(null),m(null)},className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600/80 to-pink-600/80 hover:from-purple-500/90 hover:to-pink-500/90 text-white border border-purple-500/30 hover:border-purple-400/50 rounded-xl font-medium transition-all duration-300 hover:shadow-lg hover:shadow-purple-500/30 hover:scale-105",children:[i.jsx(Bt,{size:18}),i.jsx("span",{children:r.analyze.analyzeAnother})]})]})]})})}):i.jsx("form",{onSubmit:f,className:"max-w-4xl mx-auto animate-fade-in-delay",children:i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-2xl p-5 md:p-8 relative hover:border-pink-500/30 transition-all duration-300 shadow-xl shadow-pink-500/5",children:[i.jsx("div",{className:"absolute -top-3 right-4 md:right-6",children:i.jsx("button",{onClick:()=>t("/pricing"),className:"px-2 md:px-3 py-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs font-semibold rounded-full shadow-lg animate-pulse hover:from-purple-500 hover:to-pink-500 transition-all duration-300 hover:scale-105 cursor-pointer",title:"Satn Al sayfasna git",children:r.analyze.trialBadge})}),i.jsxs("div",{className:"mb-5 md:mb-6",children:[i.jsx("label",{className:"block text-white font-semibold mb-2 md:mb-3 text-sm md:text-base",children:r.analyze.privacyLabel}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5 md:mb-6",children:[i.jsxs("button",{type:"button",onClick:()=>A(!0),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left ${S?"border-pink-500 bg-pink-500/10":"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${S?"border-pink-400 bg-pink-400":"border-slate-400"}`,children:S&&i.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),i.jsx("span",{className:`font-semibold ${S?"text-pink-400":"text-slate-300"}`,children:r.analyze.privacyPublic})]}),i.jsx("p",{className:"text-xs text-slate-400",children:r.analyze.privacyPublicDesc})]}),i.jsxs("button",{type:"button",onClick:()=>A(!1),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left ${S?"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50":"border-pink-500 bg-pink-500/10"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${S?"border-slate-400":"border-pink-400 bg-pink-400"}`,children:!S&&i.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),i.jsx("span",{className:`font-semibold ${S?"text-slate-300":"text-pink-400"}`,children:r.analyze.privacyPrivate})]}),i.jsx("p",{className:"text-xs text-slate-400",children:r.analyze.privacyPrivateDesc})]})]})]}),i.jsxs("div",{className:"mb-5 md:mb-6",children:[i.jsx("label",{className:"block text-white font-semibold mb-2 md:mb-3 text-sm md:text-base",children:r.analyze.label}),i.jsx("textarea",{value:a,onChange:C=>l(C.target.value.slice(0,w)),placeholder:r.analyze.placeholder,className:"w-full h-48 md:h-64 px-3 md:px-4 py-2 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none text-sm md:text-base",maxLength:w,required:!0}),i.jsx("div",{className:"flex justify-between items-center mt-2",children:i.jsxs("span",{className:`text-xs md:text-sm ${p>w*.9?"text-pink-400":"text-slate-500"}`,children:[p," / ",w," ",r.analyze.characters]})})]}),g&&i.jsx("div",{className:"mb-5 md:mb-6 p-3 md:p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm md:text-base",children:g}),i.jsx("button",{type:"submit",disabled:o||!a.trim(),className:"w-full px-5 md:px-6 py-3 md:py-4 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"animate-spin",size:18}),r.analyze.saving]}):i.jsxs(i.Fragment,{children:[i.jsx(Bt,{size:18}),r.analyze.submit]})})]})})]})]}):null}function wa(e,t){return t==="tr"?e.dream_text_tr||e.dream_text||"":e.dream_text_en||e.dream_text||""}function ka(e,t){return t==="tr"?e.analysis_text_tr||e.analysis_text||"":e.analysis_text_en||e.analysis_text||""}function ov(){const{user:e}=zt(),t=ft(),{t:r,language:n}=Xe(),{showToast:s}=ur(),[a,l]=b.useState([]),[o,c]=b.useState(!0),[u,d]=b.useState(null),[h,m]=b.useState(""),[g,y]=b.useState("all"),[S,A]=b.useState(new Set),[x,f]=b.useState(null),[p,w]=b.useState({}),[C,k]=b.useState({total:0,public:0,private:0}),v=b.useRef(null),j=b.useRef(null);b.useEffect(()=>{if(!e){t("/signin");return}const N=localStorage.getItem(`favorites_${e.id}`);N&&A(new Set(JSON.parse(N))),R();const U=z.channel("dreams-changes").on("postgres_changes",{event:"*",schema:"public",table:"dreams",filter:`user_id=eq.${e.id}`},re=>{console.log("Dream change received:",re),R()}).subscribe(),B=setInterval(()=>{R()},3e3);return()=>{z.removeChannel(U),clearInterval(B)}},[e,t]),b.useEffect(()=>{if(u){const N=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${N}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const N=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",N&&window.scrollTo(0,parseInt(N||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[u]);const R=async()=>{if(e)try{const{data:N,error:U}=await z.from("dreams").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(U)throw U;const B=localStorage.getItem(`favorites_${e.id}`),re=B?new Set(JSON.parse(B)):S,W=(N||[]).map(T=>({...T,is_favorite:re.has(T.id)}));l(W),A(re);const de=W.length,je=W.filter(T=>T.is_public===!0).length,ce=de-je;k({total:de,public:je,private:ce})}catch(N){console.error("Error loading dreams:",N)}finally{c(!1)}},P=N=>{const U=new Date(N),B=n==="tr"?"tr-TR":"en-US";return U.toLocaleDateString(B,{year:"numeric",month:"long",day:"numeric"})},Q=async(N,U)=>{if(U.stopPropagation(),!e){s("You must be logged in to delete dreams","error");return}if(confirm("Are you sure you want to delete this dream? This will also delete all likes and comments."))try{try{await z.from("dream_likes").delete().eq("dream_id",N)}catch(W){console.log("Error deleting likes:",W)}try{await z.from("dream_comments").delete().eq("dream_id",N)}catch(W){console.log("Error deleting comments:",W)}const{error:B}=await z.from("dreams").delete().eq("id",N).eq("user_id",e.id);if(B)throw console.error("Delete error:",B),B;l(W=>W.filter(de=>de.id!==N)),(u==null?void 0:u.id)===N&&d(null);const re=new Set(S);re.delete(N),A(re),localStorage.setItem(`favorites_${e.id}`,JSON.stringify(Array.from(re))),s("Dream deleted successfully","success"),setTimeout(async()=>{await R()},100)}catch(B){console.error("Error deleting dream:",B);const re=(B==null?void 0:B.message)||"Failed to delete dream. You can only delete your own dreams.";s(re,"error")}},F=(N,U)=>{U.stopPropagation();const B=new Set(S);B.has(N)?(B.delete(N),s("Removed from favorites","info")):(B.add(N),s("Added to favorites","success")),A(B),e&&localStorage.setItem(`favorites_${e.id}`,JSON.stringify(Array.from(B))),l(re=>re.map(W=>W.id===N?{...W,is_favorite:B.has(N)}:W))},q=async(N,U,B)=>{if(B.stopPropagation(),!!e)try{const re=!U,{error:W}=await z.from("dreams").update({is_public:re}).eq("id",N).eq("user_id",e.id);if(W)throw W;l(de=>de.map(je=>je.id===N?{...je,is_public:re}:je)),s(r.library.privacyUpdated,"success")}catch(re){console.error("Error toggling privacy:",re),s(r.library.privacyUpdateError,"error")}},ae=async(N,U,B)=>{var re;if(B.stopPropagation(),!N){s(r.library.imageNotFound,"error");return}try{const W=await fetch(N);if(!W.ok)throw new Error("Grsel yklenemedi");const de=await W.blob(),je=window.URL.createObjectURL(de),ce=document.createElement("a");ce.href=je;const T=((re=N.split(".").pop())==null?void 0:re.split("?")[0])||"png";ce.download=`ruya-gorseli-${U}.${T}`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),window.URL.revokeObjectURL(je),s(r.library.downloadSuccess,"success")}catch(W){console.error("Error downloading image:",W),s(r.library.downloadError,"error")}},Se=N=>{const U=[];return N.image_url&&U.push(N.image_url),N.image_url_2&&U.push(N.image_url_2),N.image_url_3&&U.push(N.image_url_3),U},bt=N=>{v.current=N.touches[0].clientX},Ze=N=>{j.current=N.touches[0].clientX},L=(N,U)=>{if(!v.current||!j.current)return;const B=v.current-j.current;if(Math.abs(B)>50){const W=p[N]||0;B>0&&W<U.length-1?w({...p,[N]:W+1}):B<0&&W>0&&w({...p,[N]:W-1})}v.current=null,j.current=null},X=a.filter(N=>{const U=h===""||N.dream_text.toLowerCase().includes(h.toLowerCase())||N.analysis_text&&N.analysis_text.toLowerCase().includes(h.toLowerCase()),B=g==="all"||g==="completed"&&N.status==="completed"||g==="pending"&&N.status==="pending"||g==="favorites"&&N.is_favorite;return U&&B});return e?o?i.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:48})}):i.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 left-10 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 right-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[i.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[i.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",children:r.library.title}),i.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.library.subtitle}),i.jsxs("div",{className:"flex justify-center gap-3 mb-6",children:[i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg px-4 py-2",children:[i.jsx("div",{className:"text-lg font-semibold text-white",children:C.total}),i.jsx("div",{className:"text-xs text-slate-400",children:"Total Dreams"})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-lg px-4 py-2",children:[i.jsx("div",{className:"text-lg font-semibold text-white",children:C.public}),i.jsx("div",{className:"text-xs text-slate-400",children:"Public Dreams"})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-lg px-4 py-2",children:[i.jsx("div",{className:"text-lg font-semibold text-white",children:C.private}),i.jsx("div",{className:"text-xs text-slate-400",children:"Private Dreams"})]})]}),i.jsxs("div",{className:"max-w-2xl mx-auto mb-8 space-y-4 animate-fade-in-delay",children:[i.jsxs("div",{className:"relative",children:[i.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),i.jsx("input",{type:"text",value:h,onChange:N=>m(N.target.value),placeholder:r.library.searchPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all shadow-lg"})]}),i.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[i.jsx("button",{onClick:()=>y("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${g==="all"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:"All"}),i.jsxs("button",{onClick:()=>y("favorites"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-1 ${g==="favorites"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:[i.jsx(vr,{size:14,className:g==="favorites"?"fill-current":""}),"Favorites"]}),i.jsx("button",{onClick:()=>y("completed"),className:`px-4 py-2 rounded-lg font-medium transition-all ${g==="completed"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:"Completed"}),i.jsx("button",{onClick:()=>y("pending"),className:`px-4 py-2 rounded-lg font-medium transition-all ${g==="pending"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:"Pending"})]})]})]}),a.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx(xn,{className:"mx-auto mb-4 text-slate-600",size:64}),i.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.library.empty}),i.jsx("button",{onClick:()=>t("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:r.library.analyzeFirst})]}):X.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx(va,{className:"mx-auto mb-4 text-slate-600",size:64}),i.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.library.noDreamsFound})]}):i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(N=>i.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-xl p-6 hover:border-purple-500/40 transition-all duration-300 relative group overflow-hidden",children:N.status==="pending"||N.status==="processing"?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/40 via-pink-500/40 to-blue-500/40 rounded-full blur-2xl animate-pulse scale-150"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400/30 via-pink-400/30 to-blue-400/30 rounded-full blur-xl animate-pulse scale-125",style:{animationDelay:"0.5s"}}),i.jsxs("div",{className:"relative p-8 bg-gradient-to-br from-purple-500/30 via-pink-500/30 to-blue-500/30 rounded-full backdrop-blur-md shadow-2xl border-2 border-purple-400/50",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400/25 via-pink-400/25 to-blue-400/25 rounded-full animate-spin",style:{animationDuration:"4s"}}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/15 via-purple-400/15 to-pink-400/15 rounded-full animate-spin",style:{animationDuration:"2s",animationDirection:"reverse"}}),i.jsx(Be,{size:80,className:"relative animate-spin text-purple-200",strokeWidth:3.5,style:{filter:"drop-shadow(0 0 16px rgba(196, 181, 253, 0.9)) drop-shadow(0 0 32px rgba(236, 72, 153, 0.7)) drop-shadow(0 0 48px rgba(96, 165, 250, 0.5))",animationDuration:"1.2s"}})]})]})}):i.jsxs("div",{children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/0 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),i.jsxs("div",{onClick:()=>d(N),className:"cursor-pointer relative z-10",children:[(()=>{const U=Se(N);if(U.length===0)return null;const B=p[N.id]||0,re=U[B];return i.jsxs("div",{className:"overflow-hidden rounded-lg relative group/image",onTouchStart:bt,onTouchMove:Ze,onTouchEnd:()=>L(N.id,U),onClick:W=>{W.target.tagName==="IMG"&&(W.stopPropagation(),f(re))},children:[i.jsx("img",{src:re,alt:"Dream visualization",className:"w-full h-64 md:h-80 object-contain group-hover:scale-105 transition-transform duration-500 cursor-zoom-in"}),U.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1.5 z-10 pointer-events-none",children:U.map((W,de)=>i.jsx("div",{className:`h-1.5 rounded-full transition-all ${de===B?"bg-white w-6":"bg-white/50 w-1.5"}`},de))}),i.jsx("button",{onClick:W=>{W.stopPropagation(),W.preventDefault(),B>0&&w({...p,[N.id]:B-1})},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-all z-20 md:block hidden",disabled:B===0,onMouseDown:W=>{W.stopPropagation(),W.preventDefault()},children:i.jsx(xa,{size:20})}),i.jsx("button",{onClick:W=>{W.stopPropagation(),W.preventDefault(),B<U.length-1&&w({...p,[N.id]:B+1})},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-all z-20 md:block hidden",disabled:B===U.length-1,onMouseDown:W=>{W.stopPropagation(),W.preventDefault()},children:i.jsx(ya,{size:20})})]})]})})(),N.status==="completed"&&i.jsxs("div",{className:"flex gap-1.5 mt-4 mb-4 justify-end flex-wrap",children:[(()=>{const U=Se(N);if(U.length>0){const B=p[N.id]||0,re=U[B];return i.jsx("button",{onClick:W=>ae(re,N.id,W),className:"p-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/40 rounded-lg text-blue-400 transition-all duration-300 hover:scale-110 hover:shadow-lg hover:shadow-blue-500/30",title:r.library.download,children:i.jsx(_y,{size:16})})}return null})(),i.jsx("button",{onClick:U=>q(N.id,N.is_public||!1,U),className:`p-2 rounded-lg border transition-all duration-300 hover:scale-110 ${N.is_public?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-cyan-500/50 hover:text-cyan-400 hover:bg-slate-700/50"}`,title:N.is_public?r.library.makePrivate:r.library.makePublic,children:N.is_public?i.jsx(Po,{size:16}):i.jsx(Ao,{size:16})}),i.jsx("button",{onClick:U=>{U.stopPropagation(),F(N.id,U)},className:`p-2 rounded-lg border transition-all duration-300 hover:scale-110 ${N.is_favorite?"bg-pink-500/20 border-pink-500/50 text-pink-400 hover:bg-pink-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-pink-500/50 hover:text-pink-400 hover:bg-slate-700/50"}`,title:N.is_favorite?r.library.removeFromFavorites:r.library.addToFavorites,children:i.jsx(vr,{size:16,className:N.is_favorite?"fill-current":""})}),i.jsx("button",{onClick:U=>{U.stopPropagation(),Q(N.id,U)},className:"p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 rounded-lg text-red-400 transition-all duration-300 hover:scale-110 hover:shadow-lg hover:shadow-red-500/30",title:r.library.delete,children:i.jsx(ei,{size:16})})]}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-2",children:[i.jsx(To,{size:14}),P(N.created_at)]}),i.jsx("p",{className:"text-slate-300 line-clamp-3 group-hover:text-slate-200 transition-colors",children:wa(N,n)})]})]})},N.id))})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",onClick:()=>d(null),children:i.jsxs("div",{className:"bg-slate-900 border border-purple-500/30 rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:N=>N.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/20 flex-shrink-0",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-1",children:[i.jsx(To,{size:14}),P(u.created_at)]}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Dream Entry"})]}),i.jsx("button",{onClick:()=>d(null),className:"text-slate-400 hover:text-white transition-colors text-xl",children:""})]}),i.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[i.jsx("div",{className:"w-1/2 flex-shrink-0 bg-slate-950 overflow-hidden relative",children:(()=>{const N=Se(u);if(N.length===0)return i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:i.jsx(xn,{className:"text-purple-400/50",size:64})});const U=p[`modal-${u.id}`]||0,B=N[U];return i.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[i.jsx("img",{src:B,alt:"Dream visualization",className:"max-w-full max-h-full object-contain cursor-zoom-in",onClick:()=>f(B)}),N.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:N.map((re,W)=>i.jsx("button",{onClick:de=>{de.stopPropagation(),w({...p,[`modal-${u.id}`]:W})},className:`h-2 rounded-full transition-all ${W===U?"bg-white w-8":"bg-white/50 w-2 hover:bg-white/75"}`},W))}),i.jsx("button",{onClick:re=>{re.stopPropagation(),U>0&&w({...p,[`modal-${u.id}`]:U-1})},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:U===0,children:i.jsx(xa,{size:24})}),i.jsx("button",{onClick:re=>{re.stopPropagation(),U<N.length-1&&w({...p,[`modal-${u.id}`]:U+1})},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:U===N.length-1,children:i.jsx(ya,{size:24})})]})]})})()}),i.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:r.library.yourDream}),i.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:wa(u,n)})]}),ka(u,n)&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-pink-400 mb-2",children:r.library.analysis}),i.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:ka(u,n)})]}),u.status==="pending"&&i.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-yellow-400",children:r.library.processingMessage}),i.jsxs("div",{className:"pt-6 border-t border-purple-500/20 flex gap-2 flex-wrap",children:[i.jsx("button",{onClick:N=>{N.stopPropagation(),q(u.id,u.is_public||!1,N)},className:`p-2.5 rounded-lg border transition-all duration-300 hover:scale-110 ${u.is_public?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-cyan-500/50 hover:text-cyan-400 hover:bg-slate-700/50"}`,title:u.is_public?r.library.makePrivate:r.library.makePublic,children:u.is_public?i.jsx(Po,{size:18}):i.jsx(Ao,{size:18})}),i.jsx("button",{onClick:N=>{N.stopPropagation(),F(u.id,N)},className:`p-2.5 rounded-lg border transition-all duration-300 hover:scale-110 ${u.is_favorite?"bg-pink-500/20 border-pink-500/50 text-pink-400 hover:bg-pink-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-pink-500/50 hover:text-pink-400 hover:bg-slate-700/50"}`,title:u.is_favorite?r.library.removeFromFavorites:r.library.addToFavorites,children:i.jsx(vr,{size:18,className:u.is_favorite?"fill-current":""})}),i.jsx("button",{onClick:N=>{N.stopPropagation(),Q(u.id,N)},className:"p-2.5 bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 rounded-lg text-red-400 transition-all duration-300 hover:scale-110 hover:shadow-lg hover:shadow-red-500/30",title:r.library.delete,children:i.jsx(ei,{size:18})})]})]})})]})]})}),x&&i.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>f(null),children:[i.jsx("button",{onClick:()=>f(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10 bg-black/50 rounded-full p-2",children:i.jsx(qt,{size:24})}),i.jsx("img",{src:x,alt:"Dream visualization - full size",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:N=>N.stopPropagation()})]})]}):null}function cv(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,a]=b.useState(""),[l,o]=b.useState(""),[c,u]=b.useState(""),[d,h]=b.useState(null),[m,g]=b.useState(!1),[y,S]=b.useState(!1),[A,x]=b.useState(!1),f=b.useRef(null),p=b.useRef(null),w=b.useRef(null),C=b.useRef(null),{signIn:k,signUp:v,user:j}=zt(),R=ft(),{t:P}=Xe();if(b.useEffect(()=>{f.current&&(f.current.oninvalid=F=>{F.preventDefault();const q=F.target;q.validity.valueMissing?q.setCustomValidity(P.auth.validationRequired):q.validity.typeMismatch&&q.setCustomValidity(P.auth.validationEmail)},f.current.oninput=F=>{F.target.setCustomValidity("")}),p.current&&(p.current.oninvalid=F=>{F.preventDefault(),F.target.setCustomValidity(P.auth.validationRequired)},p.current.oninput=F=>{F.target.setCustomValidity("")}),w.current&&(w.current.oninvalid=F=>{F.preventDefault(),F.target.setCustomValidity(P.auth.validationRequired)},w.current.oninput=F=>{F.target.setCustomValidity("")})},[P,e]),b.useEffect(()=>{j&&R("/")},[j,R]),j)return null;const Q=async F=>{F.preventDefault(),h(null),g(!0);try{if(e){if(!l.trim())throw new Error("Please enter your full name");if(!c.trim())throw new Error("Please enter a username");if(c.length<3)throw new Error("Username must be at least 3 characters");if(!y){h(P.auth.mustAcceptTerms),g(!1);return}if(!A){h(P.auth.mustAcceptPrivacy),g(!1);return}const{error:q}=await v(r,s,l,c);if(q){console.error("SignUp UI Error:",q),console.error("Full error details:",{message:q.message,stack:q.stack,name:q.name});const ae=q.message.toLowerCase();ae.includes("already registered")||ae.includes("already exists")||ae.includes("duplicate")?h(P.auth.emailAlreadyExists):ae.includes("configuration")?h("Supabase yaplandrmas eksik. .env dosyasn kontrol edin."):ae.includes("email confirmations are required")?h('E-posta onay gerekli. Supabase Dashboard  Authentication  Settings  "Enable email confirmations" seeneini kapatn.'):ae.includes("rate limit")?h("ok fazla kayt denemesi. Ltfen 5-10 dakika bekleyip tekrar deneyin."):h(q.message),g(!1);return}R("/analyze")}else{const{error:q}=await k(r,s);if(q){const ae=q.message.toLowerCase();ae.includes("invalid")||ae.includes("credentials")?h(P.auth.invalidCredentials):h(q.message),g(!1);return}R("/analyze")}}catch(q){h(q instanceof Error?q.message:"An error occurred")}finally{g(!1)}};return i.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6 flex items-center",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-md mx-auto w-full z-10",children:[i.jsxs("div",{className:"text-center mb-6 md:mb-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e?P.auth.createAccount:P.auth.welcomeBack}),i.jsx("p",{className:"text-slate-400 text-sm md:text-base px-2",children:e?P.auth.startJourney:P.auth.continueExploring})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-8 hover:border-purple-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/10 animate-slide-down",children:[i.jsxs("div",{className:"flex gap-2 mb-6 md:mb-8",children:[i.jsx("button",{onClick:()=>{t(!1),h(null),S(!1),x(!1)},className:`flex-1 py-2.5 md:py-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base ${e?"bg-slate-800/50 text-slate-400 hover:text-slate-300":"bg-gradient-to-r from-pink-600 to-purple-600 text-white"}`,children:P.auth.signIn}),i.jsx("button",{onClick:()=>{t(!0),h(null),S(!1),x(!1)},className:`flex-1 py-2.5 md:py-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base ${e?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:P.auth.signUp})]}),d&&i.jsx("div",{className:"mb-5 md:mb-6 p-3 md:p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-xs md:text-sm",children:d}),i.jsxs("form",{onSubmit:Q,className:"space-y-5 md:space-y-6",children:[e&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:P.auth.fullName}),i.jsx("input",{ref:w,type:"text",value:l,onChange:F=>o(F.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:P.auth.enterFullName,required:e})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:"Username"}),i.jsx("input",{ref:C,type:"text",value:c,onChange:F=>u(F.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:"username",required:e,minLength:3,maxLength:20}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Only lowercase letters, numbers, and underscores"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:P.auth.email}),i.jsx("input",{ref:f,type:"email",value:r,onChange:F=>n(F.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:P.auth.enterEmail,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:P.auth.password}),i.jsx("input",{ref:p,type:"password",value:s,onChange:F=>a(F.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:P.auth.enterPassword,required:!0,minLength:6})]}),e&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",id:"acceptTerms",checked:y,onChange:F=>S(F.target.checked),className:"mt-1 w-4 h-4 rounded border-purple-500/30 bg-slate-950/50 text-purple-600 focus:ring-purple-500/50 focus:ring-2 cursor-pointer"}),i.jsxs("label",{htmlFor:"acceptTerms",className:"text-slate-300 text-sm md:text-base cursor-pointer flex-1",children:[P.auth.acceptTerms," ",i.jsxs("button",{type:"button",onClick:F=>{F.preventDefault(),R("/terms")},className:"text-purple-400 hover:text-purple-300 underline transition-colors",children:["(",P.auth.readTerms,")"]})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",id:"acceptPrivacy",checked:A,onChange:F=>x(F.target.checked),className:"mt-1 w-4 h-4 rounded border-purple-500/30 bg-slate-950/50 text-purple-600 focus:ring-purple-500/50 focus:ring-2 cursor-pointer"}),i.jsxs("label",{htmlFor:"acceptPrivacy",className:"text-slate-300 text-sm md:text-base cursor-pointer flex-1",children:[P.auth.acceptPrivacy," ",i.jsxs("button",{type:"button",onClick:F=>{F.preventDefault(),R("/privacy")},className:"text-purple-400 hover:text-purple-300 underline transition-colors",children:["(",P.auth.readPrivacy,")"]})]})]})]}),i.jsx("button",{type:"submit",disabled:m,className:"w-full px-5 md:px-6 py-3 md:py-4 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:m?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"animate-spin",size:18}),e?P.auth.creatingAccount:P.auth.signingIn]}):i.jsxs(i.Fragment,{children:[e?i.jsx($c,{size:18}):i.jsx(zy,{size:18}),e?P.auth.signUp:P.auth.signIn]})})]})]})]})]})}function uv(){const{user:e}=zt(),t=ft(),{t:r}=Xe(),{showToast:n}=ur(),[s,a]=b.useState(null),l=async o=>{if(o==="standard"||o==="premium"){n(o==="premium"?"Premium plan is currently unavailable. Please try again later.":"Standard plan is currently unavailable. Please try again later.","info");return}if(!e){t("/signin");return}a(o);try{const{error:c}=await z.rpc("update_subscription_plan",{p_user_id:e.id,p_plan_type:o});if(c)throw console.error("Subscription update error:",c),c;n(o==="premium"?"Premium plan activated successfully! ":"Standard plan activated successfully! ","success"),setTimeout(()=>{window.location.reload()},1500)}catch(c){console.error("Error updating subscription:",c),n((c==null?void 0:c.message)||"Failed to update subscription. Please try again.","error")}finally{a(null)}};return i.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl animate-float"}),i.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),i.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[i.jsxs("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:r.pricing.title}),i.jsx("p",{className:"text-slate-400 text-base md:text-lg max-w-2xl mx-auto px-2",children:r.pricing.subtitle})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-6 hover:border-purple-500/40 transition-all duration-500 hover:shadow-xl hover:shadow-purple-500/10 hover:-translate-y-1 animate-fade-in-delay",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Bt,{className:"text-purple-400",size:18}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.freeTrial.title})]}),i.jsx("div",{className:"mb-3 md:mb-4",children:i.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.freeTrial.price})}),i.jsx("p",{className:"text-slate-400 text-sm mb-6",children:r.pricing.freeTrial.description}),i.jsxs("ul",{className:"space-y-2 mb-6",children:[i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-purple-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.freeTrial.feature1})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-purple-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.freeTrial.feature2})]}),r.pricing.freeTrial.feature3&&i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-purple-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.freeTrial.feature3})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-purple-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.freeTrial.feature4})]})]}),i.jsx("button",{onClick:()=>t(e?"/activate-trial":"/signin"),className:"w-full px-4 py-2.5 rounded-lg bg-slate-800 text-white text-sm font-semibold hover:bg-slate-700 transition-all duration-200",children:e?r.pricing.freeTrial.cta:r.pricing.freeTrial.signUp})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-6 hover:border-cyan-500/40 transition-all duration-500 hover:shadow-xl hover:shadow-cyan-500/10 md:hover:-translate-y-2 animate-fade-in-delay-2",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(qe,{className:"text-cyan-400",size:18}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.standard.title})]}),i.jsxs("div",{className:"mb-3 md:mb-4",children:[i.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.standard.price}),i.jsxs("span",{className:"text-slate-400 text-sm",children:["/",r.pricing.standard.period]})]}),i.jsx("p",{className:"text-slate-300 text-sm mb-6",children:r.pricing.standard.description}),i.jsxs("ul",{className:"space-y-2 mb-6",children:[i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.standard.feature1})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.standard.feature2})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.standard.feature3})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.standard.feature4})]}),r.pricing.standard.feature5&&i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.standard.feature5})]})]}),i.jsx("button",{onClick:()=>l("standard"),disabled:!0,className:"w-full px-4 py-2.5 rounded-lg bg-gradient-to-r from-cyan-600/50 to-blue-600/50 text-white/50 text-sm font-semibold transition-all duration-300 opacity-50 cursor-not-allowed flex items-center justify-center gap-2",children:r.pricing.standard.cta})]}),i.jsxs("div",{className:"bg-gradient-to-br from-pink-500/10 to-purple-500/10 backdrop-blur-sm border-2 border-pink-500/40 rounded-2xl p-5 md:p-6 hover:border-pink-500/60 transition-all duration-500 hover:shadow-2xl hover:shadow-pink-500/20 relative md:hover:-translate-y-3 animate-fade-in-delay-3",children:[i.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:i.jsx("span",{className:"px-2 md:px-3 py-1 bg-gradient-to-r from-pink-600 to-purple-600 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:r.pricing.premium.badge})}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ti,{className:"text-pink-400",size:18}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.premium.title})]}),i.jsxs("div",{className:"mb-3 md:mb-4",children:[i.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.premium.price}),i.jsxs("span",{className:"text-slate-400 text-sm",children:["/",r.pricing.premium.period]})]}),i.jsx("p",{className:"text-slate-300 text-sm mb-6 font-medium",children:r.pricing.premium.description}),i.jsxs("ul",{className:"space-y-2 mb-6",children:[i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{className:"font-medium",children:r.pricing.premium.feature1})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{className:"font-medium",children:r.pricing.premium.feature2})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{className:"font-medium",children:r.pricing.premium.feature3})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.premium.feature4})]}),i.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[i.jsx(qe,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),i.jsx("span",{children:r.pricing.premium.feature5})]})]}),i.jsx("button",{onClick:()=>l("premium"),disabled:!0,className:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-pink-600/50 to-purple-600/50 text-white/50 font-semibold transition-all duration-300 opacity-50 cursor-not-allowed flex items-center justify-center gap-2",children:r.pricing.premium.cta})]})]}),i.jsxs("div",{className:"mt-16 text-center max-w-3xl mx-auto bg-slate-900/30 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-8 hover:border-cyan-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-cyan-500/10 animate-fade-in",children:[i.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:r.pricing.whySubmirra.title}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:r.pricing.whySubmirra.description})]})]})]})}function kd(){const{user:e}=zt(),t=ft(),r=Uc(),{t:n,language:s}=Xe(),{showToast:a}=ur(),[l,o]=b.useState(null),[c,u]=b.useState(null),[d,h]=b.useState(!0),[m,g]=b.useState(!1),[y,S]=b.useState(""),[A,x]=b.useState(""),[f,p]=b.useState(""),[w,C]=b.useState(!1),[k,v]=b.useState(""),[j,R]=b.useState(""),[P,Q]=b.useState(""),[F,q]=b.useState(!1),[ae,Se]=b.useState(null),[bt,Ze]=b.useState(!1),[L,X]=b.useState(!0),[N,U]=b.useState([]),[B,re]=b.useState(!1),[W,de]=b.useState(!1),[je,ce]=b.useState(!1),[T,$]=b.useState([]),[ne,he]=b.useState([]),[I,G]=b.useState(!1),[te,ie]=b.useState(!1),[Y,se]=b.useState(!1),[we,Ot]=b.useState(!1),[ke,Z]=b.useState(!1),[Oe,Sr]=b.useState(0),[lt,ze]=b.useState("low"),We=b.useRef(null);b.useEffect(()=>{const E=async()=>{const O=window.location.pathname;let V=null;if(O.startsWith("/profile/")&&(V=O.split("/")[2]||null),V)u(V),X(e?V===e.id:!1),await Promise.all([_(V),ee(V),oe(V),...e?[pe(V),M(V),Ne(V)]:[]]),kn(V).catch(K=>console.error("Report info load error:",K));else{if(!e){t("/signin");return}u(e.id),X(!0),await Promise.all([wn(),os(),oe(e.id)]),kn(e.id).catch(K=>console.error("Report info load error:",K))}h(!1)};h(!0),E()},[e,r]);const wn=async()=>{var E;if(e)try{const[O,V]=await Promise.allSettled([z.from("profiles").select("id, full_name, email, avatar_url, bio, username, created_at, is_developer").eq("id",e.id).single(),z.from("subscriptions").select("plan_type").eq("user_id",e.id).single()]);if(O.status==="rejected"||O.value.error)throw O.status==="rejected"?O.reason:O.value.error;const K=O.value.data;let le=null;V.status==="fulfilled"&&((E=V.value.data)!=null&&E.plan_type)&&(le=V.value.data.plan_type),o({full_name:K.full_name||"",email:K.email||e.email||"",created_at:K.created_at||e.created_at||"",avatar_url:K.avatar_url||null,bio:K.bio||null,username:K.username||null,is_developer:K.is_developer||!1,plan_type:le}),S(K.full_name||""),x(K.bio||""),p(K.username||"")}catch(O){console.error("Error loading profile:",O),a("Failed to load profile","error")}finally{h(!1)}},_=async E=>{var O;try{h(!0);let V=z.from("profiles").select("id, full_name, avatar_url, bio, username, created_at, is_developer");const K=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(E);K?V=V.eq("id",E):V=V.eq("username",E);const[le,De]=await Promise.allSettled([V.single(),K?z.from("subscriptions").select("plan_type").eq("user_id",E).single():Promise.resolve({data:null,error:null})]);if(le.status==="rejected"||le.value.error)throw le.status==="rejected"?le.reason:le.value.error;const xe=le.value.data;let rt=null;De.status==="fulfilled"&&((O=De.value.data)!=null&&O.plan_type)&&(rt=De.value.data.plan_type),o({full_name:xe.full_name||"",email:"",created_at:xe.created_at||"",avatar_url:xe.avatar_url||null,bio:xe.bio||null,username:xe.username||null,is_developer:xe.is_developer||!1,plan_type:rt}),u(xe.id)}catch(V){console.error("Error loading other user profile:",V),a("Kullanc profili bulunamad","error"),t("/social")}finally{h(!1)}},ee=async E=>{try{const{data:O,error:V}=await z.from("user_stats").select("*").eq("user_id",E).single();if(!V&&O)Se({public_dreams_count:O.public_dreams_count||0,total_likes_received:O.total_likes_received||0,total_comments_received:O.total_comments_received||0,followers_count:O.followers_count||0,following_count:O.following_count||0});else{const{data:K}=await z.from("dreams").select("id").eq("user_id",E).eq("is_public",!0),le=(K||[]).map(Re=>Re.id),De=le.length;let xe=0;if(le.length>0)try{const{data:Re,error:be}=await z.from("dream_likes").select("id",{count:"exact",head:!0}).in("dream_id",le);if(!be&&Re!==null)xe=Re.length||0;else{const{count:dr}=await z.from("dream_likes").select("*",{count:"exact",head:!0}).in("dream_id",le);xe=dr||0}}catch(Re){console.error("Error counting likes:",Re)}let rt=0;if(le.length>0)try{const{data:Re,error:be}=await z.from("dream_comments").select("id",{count:"exact",head:!0}).in("dream_id",le);if(!be&&Re!==null)rt=Re.length||0;else{const{count:dr}=await z.from("dream_comments").select("*",{count:"exact",head:!0}).in("dream_id",le);rt=dr||0}}catch(Re){console.error("Error counting comments:",Re)}const[Kt,Ge]=await Promise.all([z.from("follows").select("id",{count:"exact",head:!0}).eq("following_id",E),z.from("follows").select("id",{count:"exact",head:!0}).eq("follower_id",E)]);Se({public_dreams_count:De,total_likes_received:xe,total_comments_received:rt,followers_count:Kt.count||0,following_count:Ge.count||0})}}catch(O){console.error("Error loading stats:",O)}},oe=async E=>{try{re(!0);const{data:O,error:V}=await z.from("dreams").select("id, image_url, image_url_2, image_url_3, created_at, status, likes_count, dream_text, dream_text_tr, dream_text_en, analysis_text, analysis_text_tr, analysis_text_en").eq("user_id",E).eq("is_public",!0).in("status",["completed","pending"]).order("created_at",{ascending:!1}).limit(12);if(V)throw console.error("Error loading dreams:",V),V;if(!O||O.length===0){U([]),re(!1);return}const K=O.map(be=>be.id),[le,De]=await Promise.allSettled([z.from("dream_likes").select("dream_id").in("dream_id",K),z.from("dream_comments").select("dream_id").in("dream_id",K)]);let xe=[],rt=[];le.status==="fulfilled"&&!le.value.error&&(xe=le.value.data||[]),De.status==="fulfilled"&&!De.value.error&&(rt=De.value.data||[]);const Kt=new Map,Ge=new Map;xe.forEach(be=>{be&&be.dream_id&&Kt.set(be.dream_id,(Kt.get(be.dream_id)||0)+1)}),rt.forEach(be=>{be&&be.dream_id&&Ge.set(be.dream_id,(Ge.get(be.dream_id)||0)+1)});const Re=O.map(be=>{const dr=Kt.get(be.id)||0,ot=Ge.get(be.id)||0,Ct=be.likes_count||0;return{...be,likes_count:Math.max(Ct,dr),comments_count:ot,analysis_text:be.analysis_text||""}});U(Re)}catch(O){console.error("Error loading public dreams:",O)}finally{re(!1)}},pe=async E=>{if(e)try{const{data:O,error:V}=await z.from("follows").select("id").eq("follower_id",e.id).eq("following_id",E).single();Ze(!!O&&!V)}catch{Ze(!1)}},M=async E=>{if(e)try{const{data:O,error:V}=await z.from("user_blocks").select("id").eq("blocker_id",e.id).eq("blocked_id",E).single();V&&V.code!=="PGRST116"&&console.error("Error checking block status:",V),ie(!!O);const{data:K,error:le}=await z.from("user_blocks").select("id").eq("blocker_id",E).eq("blocked_id",e.id).single();le&&le.code!=="PGRST116"&&console.error("Error checking blocked by status:",le),se(!!K)}catch(O){console.error("Error checking block status:",O)}},Ne=async E=>{if(e)try{const{data:O,error:V}=await z.from("user_favorites").select("id").eq("user_id",e.id).eq("favorite_user_id",E).single();V&&V.code!=="PGRST116"&&console.error("Error checking favorite status:",V),Ot(!!O)}catch(O){console.error("Error checking favorite status:",O)}},mt=async()=>{if(!(!e||!c)&&confirm("Bu kullancy engellemek istediinizden emin misiniz?"))try{const{error:E}=await z.from("user_blocks").insert({blocker_id:e.id,blocked_id:c});if(E)throw E;ie(!0),Z(!1),a("Kullanc engellendi","success")}catch(E){console.error("Error blocking user:",E),a("Kullanc engellenemedi","error")}},ve=async()=>{if(!(!e||!c))try{const{error:E}=await z.from("user_blocks").delete().eq("blocker_id",e.id).eq("blocked_id",c);if(E)throw E;ie(!1),Z(!1),a("Kullancnn engeli kaldrld","success")}catch(E){console.error("Error unblocking user:",E),a("Engel kaldrlamad","error")}},Vt=async()=>{if(!e||!c){console.log("Missing user or profileUserId:",{user:!!e,profileUserId:c});return}console.log("Toggling favorite for:",c,"Current status:",we);try{if(we){console.log("Removing from favorites...");const{error:E}=await z.from("user_favorites").delete().eq("user_id",e.id).eq("favorite_user_id",c);if(E)throw console.error("Error removing favorite:",E),E;Ot(!1),a("Favori arkadalardan karld","success"),console.log("Successfully removed from favorites")}else{console.log("Adding to favorites...");const{data:E,error:O}=await z.from("user_favorites").insert({user_id:e.id,favorite_user_id:c}).select();if(O)throw console.error("Error adding favorite:",O),O;console.log("Successfully added to favorites:",E),Ot(!0),a("Favori arkadalara eklendi","success")}Z(!1)}catch(E){console.error("Error toggling favorite:",E),a(`lem baarsz: ${E instanceof Error?E.message:"Bilinmeyen hata"}`,"error")}},zr=async()=>{if(!e||!c)return;const E=prompt("ikayet sebebinizi yazn (istee bal):");if(E!==null&&confirm("Bu kullancy ikayet etmek istediinizden emin misiniz?"))try{console.log("Reporting user:",c);const{data:O}=await z.from("user_reports").select("id").eq("reporter_id",e.id).eq("reported_user_id",c).single();if(O){a("Bu kullancy zaten ikayet etmisiniz","error"),Z(!1);return}const{error:V}=await z.from("user_reports").insert({reporter_id:e.id,reported_user_id:c,reason:E||null});if(V)throw V;const{data:K,error:le}=await z.from("user_reports").select("id").eq("reported_user_id",c);if(le)throw le;const De=(K==null?void 0:K.length)||0;if(console.log("Total reports for user:",De),De>=10){const{error:xe}=await z.from("profiles").update({is_suspended:!0,suspended_at:new Date().toISOString(),suspension_reason:"ok sayda ikayet nedeniyle otomatik askya alnd"}).eq("id",c);xe?console.error("Error suspending user:",xe):console.log("User suspended due to reports")}Z(!1),a("ikayet gnderildi","success")}catch(O){console.error("Error reporting user:",O),a("ikayet gnderilemedi","error")}},kn=async E=>{try{const{data:O,error:V}=await z.from("user_reports").select("id").eq("reported_user_id",E);if(V)throw V;const K=(O==null?void 0:O.length)||0;Sr(K),K===0?ze("low"):K>=1&&K<=3?ze("medium"):K>=4&&K<=9?ze("high"):ze("critical")}catch(O){console.error("Error loading report info:",O),Sr(0),ze("low")}},os=async()=>{if(e)try{const{data:E,error:O}=await z.from("user_stats").select("*").eq("user_id",e.id).single();if(!O&&E)Se({public_dreams_count:E.public_dreams_count||0,total_likes_received:E.total_likes_received||0,total_comments_received:E.total_comments_received||0,followers_count:E.followers_count||0,following_count:E.following_count||0});else{const{data:V}=await z.from("dreams").select("id").eq("user_id",e.id).eq("is_public",!0),K=(V||[]).map(Ge=>Ge.id),le=K.length;let De=0;if(K.length>0)try{const{data:Ge,error:Re}=await z.from("dream_likes").select("id",{count:"exact",head:!0}).in("dream_id",K);if(!Re&&Ge!==null)De=Ge.length||0;else{const{count:be}=await z.from("dream_likes").select("*",{count:"exact",head:!0}).in("dream_id",K);De=be||0}}catch(Ge){console.error("Error counting likes:",Ge)}let xe=0;if(K.length>0)try{const{data:Ge,error:Re}=await z.from("dream_comments").select("id",{count:"exact",head:!0}).in("dream_id",K);if(!Re&&Ge!==null)xe=Ge.length||0;else{const{count:be}=await z.from("dream_comments").select("*",{count:"exact",head:!0}).in("dream_id",K);xe=be||0}}catch(Ge){console.error("Error counting comments:",Ge)}const[rt,Kt]=await Promise.all([z.from("follows").select("id",{count:"exact",head:!0}).eq("following_id",e.id),z.from("follows").select("id",{count:"exact",head:!0}).eq("follower_id",e.id)]);console.log(`Stats for user ${e.id}:`,{public_dreams_count:le,total_likes_received:De,total_comments_received:xe,followers_count:rt.count||0,following_count:Kt.count||0}),Se({public_dreams_count:le,total_likes_received:De,total_comments_received:xe,followers_count:rt.count||0,following_count:Kt.count||0})}}catch(E){console.error("Error loading stats:",E)}},cs=async()=>{var E;if(!e){a("You must be logged in to save","error");return}if(!y.trim()){a("Name cannot be empty","error");return}if(f.trim()){if(f.length<3){a("Username must be at least 3 characters","error");return}if(!/^[a-z0-9_]+$/.test(f.toLowerCase())){a("Username can only contain lowercase letters, numbers, and underscores","error");return}}try{const O={full_name:y.trim(),updated_at:new Date().toISOString()};if(A!==void 0&&(O.bio=A.trim()||null),f.trim()&&f.toLowerCase()!==((E=l==null?void 0:l.username)==null?void 0:E.toLowerCase())){const{data:K,error:le}=await z.from("profiles").select("id").eq("username",f.toLowerCase()).neq("id",e.id).single();if(le&&le.code!=="PGRST116")throw console.error("Error checking username:",le),le;if(K){a("This username is already taken","error");return}O.username=f.toLowerCase().trim()}const{error:V}=await z.from("profiles").update(O).eq("id",e.id);if(V)throw console.error("Update error:",V),V;o(K=>K?{...K,full_name:y.trim(),bio:A.trim()||null,username:f.trim()||(K==null?void 0:K.username)||null}:null),g(!1),p(""),C(!1),v(""),R(""),Q(""),a(n.profile.profileSaved,"success")}catch(O){console.error("Error updating profile:",O),a(n.profile.profileSaveFailed,"error")}},Ae=async()=>{if(!e){a("You must be logged in to change password","error");return}if(!k||!j||!P){a("Please fill in all password fields","error");return}if(j.length<6){a("New password must be at least 6 characters","error");return}if(j!==P){a("New passwords do not match","error");return}try{const{error:E}=await z.auth.signInWithPassword({email:e.email||"",password:k});if(E){a("Current password is incorrect","error");return}const{error:O}=await z.auth.updateUser({password:j});if(O)throw console.error("Password update error:",O),O;v(""),R(""),Q(""),C(!1),a("Password changed successfully","success")}catch(E){console.error("Error changing password:",E),a((E==null?void 0:E.message)||"Failed to change password","error")}},Zr=()=>{S((l==null?void 0:l.full_name)||""),x((l==null?void 0:l.bio)||""),p((l==null?void 0:l.username)||""),g(!1),C(!1),v(""),R(""),Q("")},Er=async()=>{if(c){G(!0);try{const{data:E,error:O}=await z.from("follows").select("follower_id").eq("following_id",c);if(O)throw O;if(!E||E.length===0){$([]),de(!0);return}const V=E.map(De=>De.follower_id),{data:K,error:le}=await z.from("profiles").select("id, full_name, username, avatar_url").in("id",V);if(le)throw le;$(K||[]),de(!0)}catch(E){console.error("Error loading followers:",E),a("Failed to load followers","error")}finally{G(!1)}}},Et=async()=>{if(c){G(!0);try{const{data:E,error:O}=await z.from("follows").select("following_id").eq("follower_id",c);if(O)throw O;if(!E||E.length===0){he([]),ce(!0);return}const V=E.map(De=>De.following_id),{data:K,error:le}=await z.from("profiles").select("id, full_name, username, avatar_url").in("id",V);if(le)throw le;he(K||[]),ce(!0)}catch(E){console.error("Error loading following:",E),a("Failed to load following","error")}finally{G(!1)}}},ge=async()=>{if(!e){t("/signin");return}if(c)try{if(bt){const{error:E}=await z.from("follows").delete().eq("follower_id",e.id).eq("following_id",c);if(E)throw E;Ze(!1),ae&&Se({...ae,followers_count:Math.max(0,ae.followers_count-1)}),a(n.profile.unfollowSuccess,"info")}else{const{error:E}=await z.from("follows").insert({follower_id:e.id,following_id:c});if(E)throw E;Ze(!0),ae&&Se({...ae,followers_count:ae.followers_count+1}),a(n.profile.followSuccess,"success")}}catch(E){console.error("Error toggling follow:",E),a(n.profile.followFailed,"error")}},$t=async E=>{var V,K,le,De;const O=(V=E.target.files)==null?void 0:V[0];if(!(!O||!e)){if(!O.type.startsWith("image/")){a("Please select an image file","error");return}if(O.size>5*1024*1024){a("Image size must be less than 5MB","error");return}try{if(q(!0),console.log("Skipping bucket check, proceeding with upload..."),l!=null&&l.avatar_url)try{let ot="";if(l.avatar_url.includes("/avatars/")){const Ct=l.avatar_url.split("/avatars/");ot=Ct[Ct.length-1].split("?")[0]}else{const Ct=l.avatar_url.split("/");ot=Ct[Ct.length-1].split("?")[0]}if(ot&&ot.includes(".")){console.log("Attempting to delete old avatar:",ot);const{error:Ct}=await z.storage.from("avatars").remove([ot]);Ct?console.log("Could not delete old avatar (may not exist):",Ct):console.log("Old avatar deleted successfully")}}catch(ot){console.log("Could not delete old avatar:",ot)}const xe=((K=O.name.split(".").pop())==null?void 0:K.toLowerCase())||"jpg",rt=`${e.id}-${Date.now()}.${xe}`,Kt=rt;console.log("Uploading avatar:",{fileName:rt,fileSize:O.size,fileType:O.type});const{data:Ge,error:Re}=await z.storage.from("avatars").upload(Kt,O,{cacheControl:"3600",upsert:!0,contentType:O.type});if(Re)throw console.error("Upload error:",Re),(le=Re.message)!=null&&le.includes("new row violates row-level security")?new Error("Permission denied. Please check RLS policies for avatars bucket. Make sure you ran the storage migration."):(De=Re.message)!=null&&De.includes("Bucket not found")?new Error('Avatars bucket not found. Please create "avatars" bucket in Supabase Storage and make it public.'):new Error(Re.message||"Failed to upload avatar. Error: "+JSON.stringify(Re));console.log("Upload successful:",Ge);const{data:{publicUrl:be}}=z.storage.from("avatars").getPublicUrl(Kt);if(console.log("Public URL:",be),!be)throw new Error("Failed to get public URL for avatar");const{error:dr}=await z.from("profiles").update({avatar_url:be}).eq("id",e.id);if(dr)throw console.error("Update error details:",dr),new Error(dr.message||"Failed to update profile with new avatar");if(console.log("Profile updated successfully"),L){const{data:ot,error:Ct}=await z.from("profiles").select("*").eq("id",e.id).single();Ct&&console.error("Error fetching updated profile:",Ct),o(ot||(Fc=>Fc?{...Fc,avatar_url:be}:null))}else o(ot=>ot?{...ot,avatar_url:be}:null);a(n.profile.avatarUploaded,"success")}catch(xe){console.error("Error uploading avatar:",xe);const rt=(xe==null?void 0:xe.message)||n.profile.avatarUploadFailed;a(rt,"error"),console.error("Full error details:",{message:xe==null?void 0:xe.message,error:xe,user:e==null?void 0:e.id,file:O==null?void 0:O.name})}finally{q(!1),We.current&&(We.current.value="")}}};if(!(!L&&!e)){if(L&&!e)return null}return d?i.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-400"})}):te&&!L?i.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),i.jsx("div",{className:"relative max-w-4xl mx-auto z-10",children:i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-8 text-center",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-500/20 border border-red-500/30 flex items-center justify-center",children:i.jsx(Qe,{className:"text-red-400",size:40})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Engellediiniz Kullanc"}),i.jsx("p",{className:"text-slate-400 mb-6",children:"Bu kullancy engellemisiniz. Profilini grntleyemezsiniz."}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx("button",{onClick:()=>t("/social"),className:"px-6 py-3 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition-colors",children:"Geri Dn"}),i.jsx("button",{onClick:async()=>{if(!(!e||!c))try{const{error:E}=await z.from("user_blocks").delete().eq("blocker_id",e.id).eq("blocked_id",c);if(E)throw E;ie(!1),a("Kullancnn engeli kaldrld","success"),window.location.reload()}catch(E){console.error("Error unblocking user:",E),a("Engel kaldrlamad","error")}},className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-500 hover:to-purple-500 transition-all",children:"Engeli Kaldr"})]})]})})]}):i.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",children:n.profile.title}),i.jsx("p",{className:"text-slate-400 text-lg",children:L?n.profile.manageAccount:n.profile.userProfile})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-8 relative",children:[i.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[i.jsx("button",{onClick:()=>Z(!ke),className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-800/80 text-slate-400 hover:text-white hover:bg-slate-700 transition-all duration-200",children:i.jsx(dm,{size:16})}),ke&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Z(!1)}),i.jsxs("div",{className:"absolute right-0 top-10 w-48 bg-slate-900 border border-purple-500/30 rounded-lg shadow-2xl z-50 overflow-hidden",children:[!L&&e&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:Vt,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-white text-sm",children:we?i.jsxs(i.Fragment,{children:[i.jsx(Ly,{size:16,className:"text-yellow-400"}),i.jsx("span",{children:"Favorilerden kar"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ro,{size:16,className:"text-yellow-400"}),i.jsx("span",{children:"Favorilere Ekle"})]})}),te?i.jsxs("button",{onClick:ve,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-green-400 text-sm",children:[i.jsx(Co,{size:16}),i.jsx("span",{children:"Engeli Kaldr"})]}):i.jsxs("button",{onClick:mt,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-red-400 text-sm",children:[i.jsx(Co,{size:16}),i.jsx("span",{children:"Kullancy Engelle"})]}),i.jsxs("button",{onClick:zr,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-orange-400 text-sm border-t border-slate-700/50",children:[i.jsx(pd,{size:16}),i.jsx("span",{children:"ikayet Et"})]})]}),c&&i.jsx("div",{className:"px-3 py-2 border-t border-slate-700/50",children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pd,{className:lt==="low"?"text-green-400":lt==="medium"?"text-yellow-400":lt==="high"?"text-orange-400":"text-red-400",size:12}),i.jsx("span",{className:"text-xs text-slate-400",children:n.profile.reportCount})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-semibold text-white",children:Oe}),i.jsx("div",{className:"px-2 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:lt==="low"?"rgba(34, 197, 94, 0.2)":lt==="medium"?"rgba(234, 179, 8, 0.2)":lt==="high"?"rgba(249, 115, 22, 0.2)":"rgba(239, 68, 68, 0.2)",color:lt==="low"?"rgb(34, 197, 94)":lt==="medium"?"rgb(234, 179, 8)":lt==="high"?"rgb(249, 115, 22)":"rgb(239, 68, 68)"},children:lt==="low"?n.profile.dangerLow:lt==="medium"?n.profile.dangerMedium:lt==="high"?n.profile.dangerHigh:n.profile.dangerCritical})]})]})})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-6 pb-6 border-b border-purple-500/20",children:[i.jsxs("div",{className:"relative group",children:[L?i.jsxs("button",{onClick:()=>{var E;return(E=We.current)==null?void 0:E.click()},disabled:F,className:"relative w-32 h-32 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-pink-500/40 flex items-center justify-center overflow-hidden cursor-pointer disabled:cursor-not-allowed transition-all hover:border-pink-500/60 hover:scale-105 shadow-lg",children:[l!=null&&l.avatar_url?i.jsx("img",{src:l.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):i.jsx(Qe,{className:"text-pink-400",size:40}),i.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-full flex items-center justify-center",children:F?i.jsx(Be,{className:"animate-spin text-white",size:24}):i.jsx(Oy,{className:"text-white",size:24})})]}):i.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-pink-500/40 flex items-center justify-center overflow-hidden shadow-lg",children:l!=null&&l.avatar_url?i.jsx("img",{src:l.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):i.jsx(Qe,{className:"text-pink-400",size:40})}),L&&i.jsx("input",{ref:We,type:"file",accept:"image/*",onChange:$t,className:"hidden"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[i.jsx("h2",{className:"text-2xl font-semibold text-white",children:m?i.jsx("input",{type:"text",value:y,onChange:E=>S(E.target.value),className:"bg-slate-950/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500/60",autoFocus:!0}):(l==null?void 0:l.full_name)||(l==null?void 0:l.username)||"User"}),!m&&(l==null?void 0:l.username)&&i.jsxs("span",{className:"text-slate-500 text-sm",children:["@",l.username]}),!m&&(l==null?void 0:l.is_developer)&&i.jsxs("span",{className:"px-2.5 py-1 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-500/40 rounded-lg text-cyan-400 text-xs font-semibold flex items-center gap-1.5",children:[i.jsx(Bt,{size:12}),n.profile.developer]}),!m&&(l==null?void 0:l.plan_type)&&l.plan_type!=="trial"&&i.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-semibold flex items-center gap-1.5 ${l.plan_type==="premium"?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/40 text-yellow-400":"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/40 text-blue-400"}`,children:[i.jsx(ti,{size:12}),l.plan_type==="premium"?"Premium":"Standard"]})]}),m?i.jsx("textarea",{value:A,onChange:E=>x(E.target.value),placeholder:n.profile.bioPlaceholder,className:"w-full mt-2 bg-slate-950/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 resize-none",rows:3}):(l==null?void 0:l.bio)&&i.jsx("p",{className:"text-slate-300 mb-2",children:l.bio}),L&&i.jsx("button",{onClick:()=>{var E;return(E=We.current)==null?void 0:E.click()},disabled:F,className:"mt-2 text-sm text-purple-400 hover:text-purple-300 transition-colors disabled:opacity-50",children:F?n.profile.uploading:n.profile.changeAvatar})]})]}),ae&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6 pb-6 border-b border-purple-500/20",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:i.jsx(xn,{className:"text-purple-400",size:18})}),i.jsx("p",{className:"text-2xl font-bold text-white",children:ae.public_dreams_count}),i.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.publicDreams})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:i.jsx(vr,{className:"text-pink-400",size:18})}),i.jsx("p",{className:"text-2xl font-bold text-white",children:ae.total_likes_received}),i.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.likesReceived})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:i.jsx(br,{className:"text-cyan-400",size:18})}),i.jsx("p",{className:"text-2xl font-bold text-white",children:ae.total_comments_received}),i.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.comments})]}),i.jsxs("button",{onClick:Er,className:"text-center hover:bg-slate-950/30 rounded-lg p-2 transition-colors",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:i.jsx(hm,{className:"text-purple-400",size:18})}),i.jsx("p",{className:"text-2xl font-bold text-white",children:ae.followers_count}),i.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.followers})]}),i.jsxs("button",{onClick:Et,className:"text-center hover:bg-slate-950/30 rounded-lg p-2 transition-colors",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:i.jsx(Qe,{className:"text-pink-400",size:18})}),i.jsx("p",{className:"text-2xl font-bold text-white",children:ae.following_count}),i.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.following})]})]}),L&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/30 rounded-lg",children:[i.jsx(um,{className:"text-purple-400",size:20}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-slate-400 text-sm",children:n.profile.email}),i.jsx("p",{className:"text-white",children:l==null?void 0:l.email})]})]}),i.jsx("div",{className:"p-4 bg-slate-950/30 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[i.jsx(gd,{className:"text-cyan-400",size:20}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"Username"}),m?i.jsx("input",{type:"text",value:f,onChange:E=>p(E.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),placeholder:"username",className:"w-full bg-slate-900/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60",maxLength:30}):i.jsxs("p",{className:"text-white",children:["@",(l==null?void 0:l.username)||"No username"]})]})]})}),L&&m&&i.jsxs("div",{className:"p-4 bg-slate-950/30 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Qe,{className:"text-pink-400",size:20}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-400 text-sm",children:"Password"}),i.jsx("p",{className:"text-white text-sm",children:""})]})]}),w?i.jsx("button",{onClick:()=>{C(!1),v(""),R(""),Q("")},className:"px-4 py-2 text-sm bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-lg text-slate-300 transition-all",children:"Cancel"}):i.jsx("button",{onClick:()=>C(!0),className:"px-4 py-2 text-sm bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/40 rounded-lg text-purple-400 transition-all",children:"Change Password"})]}),w&&i.jsxs("div",{className:"space-y-3 mt-4",children:[i.jsx("input",{type:"password",value:k,onChange:E=>v(E.target.value),placeholder:"Current password",className:"w-full bg-slate-900/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),i.jsx("input",{type:"password",value:j,onChange:E=>R(E.target.value),placeholder:"New password (min 6 characters)",className:"w-full bg-slate-900/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),i.jsx("input",{type:"password",value:P,onChange:E=>Q(E.target.value),placeholder:"Confirm new password",className:"w-full bg-slate-900/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),i.jsx("button",{onClick:Ae,className:"w-full px-4 py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold rounded-lg hover:from-pink-500 hover:to-purple-500 transition-all",children:"Update Password"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/30 rounded-lg",children:[i.jsx(To,{className:"text-pink-400",size:20}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-slate-400 text-sm",children:n.profile.memberSince}),i.jsx("p",{className:"text-white",children:l!=null&&l.created_at?new Date(l.created_at).toLocaleDateString(s==="tr"?"tr-TR":"en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]}),i.jsx("div",{className:"flex gap-4 pt-6 border-t border-purple-500/20",children:m?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:cs,className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:[i.jsx(Ay,{size:18}),n.profile.saveChanges]}),i.jsxs("button",{onClick:Zr,className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-slate-800 text-slate-300 font-semibold hover:bg-slate-700 transition-all duration-300",children:[i.jsx(qt,{size:18}),n.profile.cancel]})]}):i.jsx(i.Fragment,{children:L?i.jsxs("button",{onClick:()=>{S((l==null?void 0:l.full_name)||""),x((l==null?void 0:l.bio)||""),p((l==null?void 0:l.username)||""),g(!0)},className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 transition-all duration-300",children:[i.jsx(Py,{size:18}),n.profile.editProfile]}):i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:ge,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${bt?"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700":"bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-500 hover:to-purple-500"}`,children:bt?i.jsxs(i.Fragment,{children:[i.jsx($y,{size:18}),n.profile.followingButton]}):i.jsxs(i.Fragment,{children:[i.jsx($c,{size:18}),n.profile.follow]})}),i.jsxs("button",{onClick:()=>t(`/messages?user=${c}`),className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-slate-800 text-white hover:bg-slate-700 border border-slate-700 transition-all duration-300",children:[i.jsx(br,{size:18}),n.profile.message]})]})})})]})]}),!L&&i.jsxs("div",{className:"mt-12",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 pb-4 border-b border-purple-500/20",children:[i.jsx(gd,{className:"text-purple-400",size:20}),i.jsx("h2",{className:"text-2xl font-semibold text-white",children:n.profile.publicDreamsTitle})]}),B?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:32})}):N.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(xn,{className:"mx-auto mb-4 text-slate-600",size:48}),i.jsx("p",{className:"text-slate-400",children:n.profile.noPublicDreams})]}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:N.map(E=>i.jsxs("div",{onClick:()=>t("/social"),className:"group relative aspect-square bg-slate-900/50 border border-purple-500/20 rounded-xl overflow-hidden cursor-pointer hover:border-purple-500/40 transition-all",children:[E.image_url?i.jsx("img",{src:E.image_url,alt:"Dream",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:i.jsx(Bt,{className:"text-purple-400/50",size:32})}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:i.jsxs("div",{className:"flex items-center gap-6 text-white",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(vr,{size:20}),i.jsx("span",{className:"font-semibold",children:E.likes_count})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(br,{size:20}),i.jsx("span",{className:"font-semibold",children:E.comments_count})]})]})}),E.status==="pending"&&i.jsx("div",{className:"absolute top-2 left-2",children:i.jsx("span",{className:"px-2 py-1 bg-yellow-500/90 text-yellow-900 text-xs font-semibold rounded backdrop-blur-sm",children:n.social.pending})})]},E.id))})]})]}),W&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>de(!1)}),i.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 max-h-[70vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:n.profile.followers}),i.jsx("button",{onClick:()=>de(!1),className:"text-slate-400 hover:text-white transition-colors",children:i.jsx(qt,{size:20})})]}),i.jsx("div",{className:"overflow-y-auto flex-1 p-4",children:I?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:32})}):T.length===0?i.jsx("p",{className:"text-slate-400 text-center py-8",children:n.profile.noFollowers}):i.jsx("div",{className:"space-y-3",children:T.map(E=>i.jsxs("button",{onClick:()=>{de(!1),t(`/profile/${E.id}`)},className:"w-full flex items-center gap-3 p-3 hover:bg-slate-950/50 rounded-lg transition-colors",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:E.avatar_url?i.jsx("img",{src:E.avatar_url,alt:"",className:"w-full h-full object-cover"}):i.jsx(Qe,{size:24,className:"text-white"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-white font-medium",children:E.full_name}),E.username&&i.jsxs("p",{className:"text-slate-400 text-sm",children:["@",E.username]})]})]},E.id))})})]})]}),je&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>ce(!1)}),i.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 max-h-[70vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:n.profile.following}),i.jsx("button",{onClick:()=>ce(!1),className:"text-slate-400 hover:text-white transition-colors",children:i.jsx(qt,{size:20})})]}),i.jsx("div",{className:"overflow-y-auto flex-1 p-4",children:I?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:32})}):ne.length===0?i.jsx("p",{className:"text-slate-400 text-center py-8",children:n.profile.noFollowing}):i.jsx("div",{className:"space-y-3",children:ne.map(E=>i.jsxs("button",{onClick:()=>{ce(!1),t(`/profile/${E.id}`)},className:"w-full flex items-center gap-3 p-3 hover:bg-slate-950/50 rounded-lg transition-colors",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:E.avatar_url?i.jsx("img",{src:E.avatar_url,alt:"",className:"w-full h-full object-cover"}):i.jsx(Qe,{size:24,className:"text-white"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-white font-medium",children:E.full_name}),E.username&&i.jsxs("p",{className:"text-slate-400 text-sm",children:["@",E.username]})]})]},E.id))})})]})]})]})}function dv(){return null}function hv(){const{user:e}=zt(),t=ft(),{t:r,language:n}=Xe(),{showToast:s}=ur(),[a,l]=b.useState([]),[o,c]=b.useState(!0),[u,d]=b.useState(null),[h,m]=b.useState([]),[g,y]=b.useState(""),[S,A]=b.useState(!1),[x,f]=b.useState(!1),[p,w]=b.useState("recent"),[C,k]=b.useState("all"),[v,j]=b.useState(""),[R,P]=b.useState(0),[Q,F]=b.useState(!0),[q,ae]=b.useState(!1),[Se,bt]=b.useState(new Set),[Ze,L]=b.useState(!1),[X,N]=b.useState([]),[U,B]=b.useState(!1),[re,W]=b.useState(""),de=b.useRef(null),je=b.useRef(null),[ce,T]=b.useState({}),[$,ne]=b.useState(null),he=b.useRef(null),I=b.useRef(null),G=_=>{const ee=[];return _.image_url&&ee.push(_.image_url),_.image_url_2&&ee.push(_.image_url_2),_.image_url_3&&ee.push(_.image_url_3),ee},te=_=>{he.current=_.touches[0].clientX},ie=_=>{I.current=_.touches[0].clientX},Y=(_,ee)=>{if(!he.current||!I.current)return;const oe=he.current-I.current;if(Math.abs(oe)>50){const M=ce[_]||0;oe>0&&M<ee.length-1?T({...ce,[_]:M+1}):oe<0&&M>0&&T({...ce,[_]:M-1})}he.current=null,I.current=null};b.useEffect(()=>{we(),e&&se()},[e,p,C]),b.useEffect(()=>(de.current&&de.current.disconnect(),de.current=new IntersectionObserver(_=>{_[0].isIntersecting&&Q&&!q&&!o&&Ot()},{threshold:.1}),je.current&&de.current.observe(je.current),()=>{de.current&&de.current.disconnect()}),[Q,q,o,a]),b.useEffect(()=>{if(u){const _=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${_}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const _=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",_&&window.scrollTo(0,parseInt(_||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[u]);const se=async()=>{if(e)try{const{data:_,error:ee}=await z.from("follows").select("following_id").eq("follower_id",e.id);if(ee)throw ee;bt(new Set((_||[]).map(oe=>oe.following_id)))}catch(_){console.error("Error loading following users:",_)}},we=async(_=!0)=>{var ee,oe,pe;try{_?(c(!0),P(0),l([])):ae(!0);const M=_?0:R+1,Ne=10,mt=M*Ne;let ve=z.from("dreams").select(`
          *,
          profiles:user_id (
            full_name,
            avatar_url,
            username
          ),
          subscriptions:user_id (
            plan_type
          )
        `).eq("is_public",!0).in("status",["completed","pending"]);if(C==="following"&&e){const Ae=Array.from(Se);if(Ae.length===0){l([]),F(!1),c(!1),ae(!1);return}ve=ve.in("user_id",Ae)}v.trim()&&(ve=ve.or(`dream_text.ilike.%${v}%,analysis_text.ilike.%${v}%`)),p==="recent"?ve=ve.order("created_at",{ascending:!1}):p==="popular"?ve=ve.order("created_at",{ascending:!1}):p==="trending"&&(ve=ve.order("created_at",{ascending:!1})),ve=ve.range(mt,mt+Ne-1);let{data:Vt,error:zr}=await ve;if(zr)if((ee=zr.message)!=null&&ee.includes("is_public")||zr.code==="42703"||zr.code==="PGRST116"){console.warn("is_public column not found. Please run migration to enable public dreams feature.");let Ae=z.from("dreams").select(`
              *,
              profiles:user_id (
                full_name,
                avatar_url,
                username
              )
            `).in("status",["completed","pending"]);if(C==="following"&&e){const Et=Array.from(Se);if(Et.length===0){l([]),F(!1),c(!1),ae(!1);return}Ae=Ae.in("user_id",Et)}v.trim()&&(Ae=Ae.or(`dream_text.ilike.%${v}%,analysis_text.ilike.%${v}%`)),p==="recent"?Ae=Ae.order("created_at",{ascending:!1}):p==="popular"?Ae=Ae.order("created_at",{ascending:!1}):p==="trending"&&(Ae=Ae.order("created_at",{ascending:!1})),Ae=Ae.range(mt,mt+Ne-1);const{data:Zr,error:Er}=await Ae;if(Er)throw console.error("Error loading dreams:",Er),Er;Vt=Zr,Vt&&(Vt=Vt.filter(Et=>Et.is_public===!0||Et.is_public===void 0))}else throw console.error("Error loading dreams:",zr),zr;const kn=(Vt||[]).map(Ae=>Ae.id);let os=null,cs=null;if(kn.length>0){try{const{data:ge}=await z.from("dream_likes").select("dream_id, user_id").in("dream_id",kn);os=ge}catch{os=[]}try{const{data:ge}=await z.from("dream_comments").select("dream_id").in("dream_id",kn);cs=ge}catch{cs=[]}const Ae=new Map,Zr=new Map,Er=new Set;(os||[]).forEach(ge=>{Ae.set(ge.dream_id,(Ae.get(ge.dream_id)||0)+1),e&&ge.user_id===e.id&&Er.add(ge.dream_id)}),(cs||[]).forEach(ge=>{Zr.set(ge.dream_id,(Zr.get(ge.dream_id)||0)+1)});const Et=(Vt||[]).map(ge=>{let $t=null;return ge.subscriptions&&(Array.isArray(ge.subscriptions)?$t=ge.subscriptions.length>0?ge.subscriptions[0]:null:$t=ge.subscriptions),{...ge,likes_count:Ae.get(ge.id)||0,comments_count:Zr.get(ge.id)||0,is_liked:Er.has(ge.id),profiles:ge.profiles||{full_name:"Anonymous",avatar_url:null,username:null},subscriptions:$t}});p==="popular"?Et.sort((ge,$t)=>{const E=ge.likes_count*2+ge.comments_count;return $t.likes_count*2+$t.comments_count-E}):p==="trending"&&Et.sort((ge,$t)=>{const E=new Date(ge.created_at).getTime(),O=new Date($t.created_at).getTime(),V=(Date.now()-E)/(1e3*60*60*24),K=(ge.likes_count*2+ge.comments_count)/(V+1);return($t.likes_count*2+$t.comments_count)/(V+1)-K}),l(_?Et:ge=>[...ge,...Et]),F(Et.length===Ne),P(M)}else _&&l([]),F(!1)}catch(M){console.error("Error loading public dreams:",M),(oe=M==null?void 0:M.message)!=null&&oe.includes("is_public")||(M==null?void 0:M.code)==="42703"||(M==null?void 0:M.code)==="PGRST116"?s("Please run the database migration to enable social features","error"):(pe=M==null?void 0:M.message)!=null&&pe.includes("permission")||(M==null?void 0:M.code)==="42501"?s("Permission denied. Please check your database permissions.","error"):s("Failed to load dreams. Please try again later.","error")}finally{c(!1),ae(!1)}},Ot=()=>{!q&&Q&&we(!1)},ke=async _=>{if(!_.trim()||_.length<2){N([]);return}try{B(!0);let ee=[];if(e){const{data:Ne}=await z.from("user_blocks").select("blocked_id").eq("blocker_id",e.id);ee=(Ne||[]).map(mt=>mt.blocked_id)}const{data:oe,error:pe}=await z.from("profiles").select("id, full_name, username, avatar_url, bio").or(`full_name.ilike.%${_}%,username.ilike.%${_}%`).limit(10);if(pe)throw pe;const M=(oe||[]).filter(Ne=>Ne.id!==(e==null?void 0:e.id)&&!ee.includes(Ne.id));N(M)}catch(ee){console.error("Error searching users:",ee)}finally{B(!1)}};b.useEffect(()=>{const _=setTimeout(()=>{Ze&&ke(re)},300);return()=>clearTimeout(_)},[re,Ze]);const Z=async _=>{if(!e){t("/signin");return}try{const ee=a.find(oe=>oe.id===_);if(!ee)return;if(ee.is_liked){const{error:oe}=await z.from("dream_likes").delete().eq("dream_id",_).eq("user_id",e.id);if(oe)throw oe;l(pe=>pe.map(M=>M.id===_?{...M,is_liked:!1,likes_count:M.likes_count-1}:M))}else{const{error:oe}=await z.from("dream_likes").insert({dream_id:_,user_id:e.id});if(oe)throw oe;l(pe=>pe.map(M=>M.id===_?{...M,is_liked:!0,likes_count:M.likes_count+1}:M))}}catch(ee){console.error("Error toggling like:",ee),s("Failed to update like","error")}},Oe=async(_,ee)=>{if(ee.stopPropagation(),!e){t("/signin");return}if(confirm(r.social.deleteConfirm))try{try{await z.from("dream_likes").delete().eq("dream_id",_)}catch(pe){console.log("Error deleting likes:",pe)}try{await z.from("dream_comments").delete().eq("dream_id",_)}catch(pe){console.log("Error deleting comments:",pe)}const{error:oe}=await z.from("dreams").delete().eq("id",_).eq("user_id",e.id);if(oe)throw oe;l(pe=>pe.filter(M=>M.id!==_)),(u==null?void 0:u.id)===_&&d(null),s(r.social.dreamDeleted,"success")}catch(oe){console.error("Error deleting dream:",oe),s(r.social.deleteFailed,"error")}},Sr=async _=>{try{A(!0);const{data:ee,error:oe}=await z.from("dream_comments").select(`
          *,
          profiles:user_id (
            full_name,
            avatar_url
          )
        `).eq("dream_id",_).order("created_at",{ascending:!0});if(oe)throw oe;m((ee||[]).map(pe=>({...pe,profiles:pe.profiles||{full_name:"Anonymous",avatar_url:null}})))}catch(ee){console.error("Error loading comments:",ee),s("Failed to load comments","error")}finally{A(!1)}},lt=async()=>{if(!e){t("/signin");return}if(!(!u||!g.trim()))try{f(!0);const{error:_}=await z.from("dream_comments").insert({dream_id:u.id,user_id:e.id,comment_text:g.trim()});if(_)throw _;await Sr(u.id),l(ee=>ee.map(oe=>oe.id===u.id?{...oe,comments_count:oe.comments_count+1}:oe)),y(""),s(r.social.commentAdded,"success")}catch(_){console.error("Error adding comment:",_),s(r.social.commentFailed,"error")}finally{f(!1)}},ze=async _=>{if(!(!e||!u))try{const{error:ee}=await z.from("dream_comments").delete().eq("id",_).eq("user_id",e.id);if(ee)throw ee;await Sr(u.id),u&&(d({...u,comments_count:Math.max(0,u.comments_count-1)}),l(oe=>oe.map(pe=>pe.id===u.id?{...pe,comments_count:Math.max(0,pe.comments_count-1)}:pe))),s(r.social.commentDeleted,"success")}catch(ee){console.error("Error deleting comment:",ee),s(r.social.commentDeleteFailed,"error")}},We=_=>{const ee=new Date(_),oe=new Date,pe=oe.getTime()-ee.getTime(),M=Math.floor(pe/6e4),Ne=Math.floor(M/60),mt=Math.floor(Ne/24);if(M<1)return r.social.justNow;if(M<60)return`${M}${r.social.minutesAgo}`;if(Ne<24)return`${Ne}${r.social.hoursAgo}`;if(mt<7)return`${mt}${r.social.daysAgo}`;const ve=n==="tr"?"tr-TR":"en-US";return ee.toLocaleDateString(ve,{month:"long",day:"numeric",year:ee.getFullYear()!==oe.getFullYear()?"numeric":void 0})},wn=_=>{d(_),m([]),y(""),Sr(_.id)};return o?i.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:48})}):i.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[i.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[i.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",fontFeatureSettings:'"kern" 1',WebkitTextStroke:"0.5px rgba(236, 72, 153, 0.3)"},children:r.social.title}),i.jsx("p",{className:"text-slate-400 text-lg",children:r.social.subtitle})]}),i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"flex gap-2 border-b border-purple-500/20",children:[i.jsx("button",{onClick:()=>L(!1),className:`px-4 py-2 text-sm font-medium transition-colors ${Ze?"text-slate-400 hover:text-slate-300":"text-purple-400 border-b-2 border-purple-400"}`,children:r.social.searchDreams}),i.jsx("button",{onClick:()=>L(!0),className:`px-4 py-2 text-sm font-medium transition-colors ${Ze?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-slate-300"}`,children:r.social.searchUsers})]}),i.jsxs("div",{className:"relative",children:[i.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),Ze?i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",value:re,onChange:_=>W(_.target.value),placeholder:r.social.searchUsersPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),re&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-slate-900 border border-purple-500/30 rounded-lg shadow-2xl max-h-96 overflow-y-auto z-50",children:U?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:24})}):X.length===0?i.jsx("div",{className:"text-center py-8 text-slate-400",children:i.jsx("p",{children:r.social.noUsersFound})}):i.jsx("div",{className:"divide-y divide-purple-500/10",children:X.map(_=>i.jsxs("button",{onClick:()=>{t(`/profile/${_.id}`),L(!1),W("")},className:"w-full p-4 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0",children:_.avatar_url?i.jsx("img",{src:_.avatar_url,alt:_.full_name,className:"w-full h-full object-cover"}):i.jsx(Qe,{className:"text-pink-400",size:20})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-white font-semibold truncate",children:_.full_name||_.username||r.social.anonymous}),_.username&&i.jsxs("p",{className:"text-slate-400 text-sm truncate",children:["@",_.username]}),_.bio&&i.jsx("p",{className:"text-slate-500 text-xs truncate mt-1",children:_.bio})]})]},_.id))})})]}):i.jsx("input",{type:"text",value:v,onChange:_=>{j(_.target.value),setTimeout(()=>we(!0),500)},placeholder:r.social.searchDreamsPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"})]}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg p-2",children:[i.jsx(Ny,{size:18,className:"text-slate-400"}),i.jsx("button",{onClick:()=>{k("all"),we(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all ${C==="all"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:r.social.all}),e&&i.jsxs("button",{onClick:()=>{k("following"),we(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${C==="following"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[i.jsx(hm,{size:14}),r.social.following]})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg p-2",children:[i.jsxs("button",{onClick:()=>{w("recent"),we(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${p==="recent"?"bg-pink-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[i.jsx(md,{size:14}),r.social.recent]}),i.jsxs("button",{onClick:()=>{w("popular"),we(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${p==="popular"?"bg-pink-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[i.jsx(vr,{size:14}),r.social.popular]}),i.jsxs("button",{onClick:()=>{w("trending"),we(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${p==="trending"?"bg-pink-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[i.jsx(Lo,{size:14}),r.social.trending]})]})]})]}),a.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx(Qe,{className:"mx-auto mb-4 text-slate-600",size:64}),i.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.social.noDreams}),i.jsx("button",{onClick:()=>t("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:r.social.shareFirst})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:a.map((_,ee)=>{var oe,pe;return i.jsxs("div",{ref:ee===a.length-1?je:null,className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl overflow-hidden hover:border-purple-500/40 transition-all duration-300 group",children:[i.jsxs("div",{className:"relative aspect-square bg-slate-950 overflow-hidden group/image cursor-pointer",onTouchStart:te,onTouchMove:ie,onTouchEnd:()=>{const M=G(_);Y(_.id,M)},onClick:M=>{const Ne=M.target;Ne.closest("button")||Ne.tagName==="BUTTON"||wn(_)},children:[(()=>{const M=G(_);if(M.length===0)return i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:i.jsx(Bt,{className:"text-purple-400/50",size:48})});const Ne=ce[_.id]||0,mt=M[Ne];return i.jsxs(i.Fragment,{children:[i.jsx("img",{src:mt,alt:"Dream visualization",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 image-clickable cursor-pointer",onClick:ve=>{ve.stopPropagation(),ne(mt)}}),M.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1.5 z-10 pointer-events-none",children:M.map((ve,Vt)=>i.jsx("div",{className:`h-1.5 rounded-full transition-all ${Vt===Ne?"bg-white w-6":"bg-white/50 w-1.5"}`},Vt))}),i.jsx("button",{onClick:ve=>{ve.stopPropagation(),ve.preventDefault(),Ne>0&&T({...ce,[_.id]:Ne-1})},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-all z-20 md:block hidden",disabled:Ne===0,onMouseDown:ve=>{ve.stopPropagation(),ve.preventDefault()},children:i.jsx(xa,{size:20})}),i.jsx("button",{onClick:ve=>{ve.stopPropagation(),ve.preventDefault(),Ne<M.length-1&&T({...ce,[_.id]:Ne+1})},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-all z-20 md:block hidden",disabled:Ne===M.length-1,onMouseDown:ve=>{ve.stopPropagation(),ve.preventDefault()},children:i.jsx(ya,{size:20})})]})]})})(),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:i.jsxs("div",{className:"flex items-center gap-6 text-white pointer-events-none",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(vr,{size:24,className:_.is_liked?"fill-current text-pink-400":""}),i.jsx("span",{className:"font-semibold",children:_.likes_count})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(br,{size:24}),i.jsx("span",{className:"font-semibold",children:_.comments_count})]})]})}),_.status==="pending"&&i.jsx("div",{className:"absolute top-3 left-3",children:i.jsx("span",{className:"px-3 py-1 bg-yellow-500/90 text-yellow-900 text-xs font-semibold rounded-full backdrop-blur-sm",children:r.social.pending})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:M=>{M.stopPropagation(),t(`/profile/${_.user_id}`)},className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-white/30 flex items-center justify-center overflow-hidden hover:scale-110 transition-transform",children:_.profiles.avatar_url?i.jsx("img",{src:_.profiles.avatar_url,alt:_.profiles.full_name,className:"w-full h-full object-cover"}):i.jsx(Qe,{className:"text-pink-400",size:16})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("button",{onClick:M=>{M.stopPropagation(),t(`/profile/${_.user_id}`)},className:"text-white font-semibold text-sm hover:text-purple-300 transition-colors truncate",children:_.profiles.full_name||_.profiles.username||r.social.anonymous}),((oe=_.subscriptions)==null?void 0:oe.plan_type)&&_.subscriptions.plan_type!=="trial"&&i.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-semibold flex items-center gap-1 ${_.subscriptions.plan_type==="premium"?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/40 text-yellow-300":"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/40 text-blue-300"}`,children:[i.jsx(ti,{size:8}),_.subscriptions.plan_type==="premium"?"Premium":"Standard"]})]}),i.jsx("p",{className:"text-white/70 text-xs",children:We(_.created_at)})]})]})})]}),i.jsxs("div",{className:"p-4 bg-slate-900/50",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:M=>{M.stopPropagation(),Z(_.id)},className:`transition-all hover:scale-110 ${_.is_liked?"text-pink-400":"text-slate-400 hover:text-pink-400"}`,children:i.jsx(vr,{size:24,className:_.is_liked?"fill-current":""})}),i.jsx("button",{onClick:M=>{M.stopPropagation(),wn(_)},className:"text-slate-400 hover:text-purple-400 transition-all hover:scale-110",children:i.jsx(br,{size:24})}),i.jsx("button",{onClick:M=>{M.stopPropagation(),navigator.share?navigator.share({title:r.social.checkOutDream,text:_.dream_text.substring(0,100),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),s(r.social.linkCopied,"success"))},className:"text-slate-400 hover:text-cyan-400 transition-all hover:scale-110",children:i.jsx(Ry,{size:24})}),e&&_.user_id===e.id&&i.jsx("button",{onClick:M=>{M.stopPropagation(),Oe(_.id,M)},className:"text-slate-400 hover:text-red-400 transition-all hover:scale-110 ml-auto",title:r.social.deleteDream,children:i.jsx(ei,{size:20})})]})}),i.jsx("div",{className:"mb-2",children:_.likes_count>0&&i.jsxs("p",{className:"text-white font-semibold text-sm",children:[_.likes_count," ",_.likes_count===1?r.social.like:r.social.likes]})}),i.jsxs("div",{className:"mb-2 cursor-pointer",onClick:M=>{M.stopPropagation(),wn(_)},children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[i.jsx("button",{onClick:M=>{M.stopPropagation(),t(`/profile/${_.user_id}`)},className:"text-white font-semibold text-sm hover:text-purple-300 transition-colors",children:_.profiles.full_name||_.profiles.username||r.social.anonymous}),((pe=_.subscriptions)==null?void 0:pe.plan_type)&&_.subscriptions.plan_type!=="trial"&&i.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-semibold flex items-center gap-1 ${_.subscriptions.plan_type==="premium"?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/40 text-yellow-300":"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/40 text-blue-300"}`,children:[i.jsx(ti,{size:8}),_.subscriptions.plan_type==="premium"?"Premium":"Standard"]})]}),i.jsx("span",{className:"text-white/80 text-sm line-clamp-2",children:wa(_,n)})]}),_.comments_count>0&&i.jsxs("button",{onClick:M=>{M.stopPropagation(),wn(_)},className:"text-white/70 hover:text-white text-sm transition-colors",children:[r.social.viewAll," ",_.comments_count," ",_.comments_count===1?r.social.comment:r.social.comments]})]})]},_.id)})}),q&&i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:32})}),!Q&&a.length>0&&i.jsx("div",{className:"text-center py-8 text-slate-400",children:i.jsx("p",{children:r.social.endOfFeed})})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 md:p-6",onClick:()=>d(null),children:i.jsxs("div",{className:"bg-slate-900 border border-purple-500/30 rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:_=>_.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/20 flex-shrink-0",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-1",children:[i.jsx(md,{size:14}),We(u.created_at)]}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Dream Entry"})]}),i.jsx("button",{onClick:()=>d(null),className:"text-slate-400 hover:text-white transition-colors text-xl",children:""})]}),i.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[i.jsx("div",{className:"w-1/2 flex-shrink-0 bg-slate-950 overflow-hidden relative",children:(()=>{const _=G(u);if(_.length===0)return i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:i.jsx(Bt,{className:"text-purple-400/50",size:64})});const ee=ce[`modal-${u.id}`]||0,oe=_[ee];return i.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[i.jsx("img",{src:oe,alt:"Dream visualization",className:"max-w-full max-h-full object-contain cursor-zoom-in",onClick:()=>ne(oe)}),_.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:_.map((pe,M)=>i.jsx("div",{className:`h-2 rounded-full transition-all ${M===ee?"bg-white w-8":"bg-white/50 w-2"}`},M))}),i.jsx("button",{onClick:pe=>{pe.stopPropagation(),ee>0&&T({...ce,[`modal-${u.id}`]:ee-1})},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-opacity",disabled:ee===0,children:i.jsx(xa,{size:24})}),i.jsx("button",{onClick:pe=>{pe.stopPropagation(),ee<_.length-1&&T({...ce,[`modal-${u.id}`]:ee+1})},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-opacity",disabled:ee===_.length-1,children:i.jsx(ya,{size:24})})]})]})})()}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:r.library.yourDream}),i.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:wa(u,n)})]}),ka(u,n)&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-pink-400 mb-2",children:r.library.analysis}),i.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:ka(u,n)})]})]}),i.jsxs("div",{className:"border-t border-purple-500/20 pt-6 px-6 pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:r.social.comments}),e?i.jsxs("div",{className:"mb-6 flex gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0",children:i.jsx(Qe,{className:"text-pink-400",size:16})}),i.jsxs("div",{className:"flex-1 flex gap-2",children:[i.jsx("input",{type:"text",value:g,onChange:_=>y(_.target.value),onKeyPress:_=>_.key==="Enter"&&!_.shiftKey&&lt(),placeholder:r.social.writeComment,className:"flex-1 px-4 py-2 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),i.jsx("button",{onClick:lt,disabled:!g.trim()||x,className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-lg hover:from-pink-500 hover:to-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:x?i.jsx(Be,{className:"animate-spin",size:18}):i.jsx(Ha,{size:18})})]})]}):i.jsxs("div",{className:"mb-6 p-4 bg-slate-950/30 rounded-lg text-center",children:[i.jsx("p",{className:"text-slate-400 mb-2",children:r.social.signInToComment}),i.jsx("button",{onClick:()=>{d(null),t("/signin")},className:"text-purple-400 hover:text-purple-300",children:r.social.signIn})]}),S?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Be,{className:"animate-spin text-purple-400",size:24})}):h.length===0?i.jsx("p",{className:"text-slate-400 text-center py-8",children:r.social.noComments}):i.jsx("div",{className:"space-y-4",children:h.map(_=>i.jsxs("div",{className:"flex gap-3 group",children:[i.jsx("button",{onClick:()=>t(`/profile/${_.user_id}`),className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0 hover:border-purple-400/50 transition-colors",children:_.profiles.avatar_url?i.jsx("img",{src:_.profiles.avatar_url,alt:_.profiles.full_name,className:"w-full h-full object-cover"}):i.jsx(Qe,{className:"text-pink-400",size:16})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("button",{onClick:()=>t(`/profile/${_.user_id}`),className:"text-white font-semibold text-sm hover:text-purple-400 transition-colors",children:_.profiles.full_name||r.social.anonymous}),i.jsx("p",{className:"text-slate-500 text-xs",children:We(_.created_at)}),e&&_.user_id===e.id&&i.jsx("button",{onClick:()=>ze(_.id),className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity p-1 text-slate-500 hover:text-red-400",title:r.social.deleteComment,children:i.jsx(qt,{size:14})})]}),i.jsx("p",{className:"text-slate-300 text-sm",children:_.comment_text})]})]},_.id))})]})]})]})]})}),$&&i.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>ne(null),children:[i.jsx("button",{onClick:()=>ne(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10 bg-black/50 rounded-full p-2",children:i.jsx(qt,{size:24})}),i.jsx("img",{src:$,alt:"Dream visualization - full size",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:_=>_.stopPropagation()})]})]})}function fv(){const{user:e}=zt(),t=ft(),{t:r}=Xe(),{showToast:n}=ur(),[s,a]=b.useState(!1),[l,o]=b.useState(!1),[c,u]=b.useState(!1);b.useEffect(()=>{if(!e){t("/signin");return}d()},[e,t]);const d=async()=>{if(e)try{const{data:g,error:y}=await z.from("profiles").select("trial_used, trial_start, trial_end").eq("id",e.id).single();if(y)throw y;g!=null&&g.trial_used&&u(!0)}catch(g){console.error("Error checking trial status:",g)}},h=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch(g){console.error("Error fetching IP address:",g);try{return(await(await fetch("https://api64.ipify.org?format=json")).json()).ip}catch(y){throw console.error("Error fetching IP from fallback service:",y),new Error("Could not determine IP address")}}},m=async()=>{if(!e||c){n("Kullanc bulunamad veya deneme zaten kullanlm.","error");return}a(!0);try{const g=await h(),{data:y,error:S}=await z.rpc("check_ip_trial_eligibility",{p_ip_address:g});if(S)throw console.error("Error checking IP eligibility:",S),new Error(r.trial.ipCheckFailed);if(y===!1){n(r.trial.ipAlreadyUsed,"error"),a(!1);return}const{data:A,error:x}=await z.from("profiles").select("id").eq("id",e.id).single();if(x&&x.code==="PGRST116"){const{error:v}=await z.from("profiles").insert({id:e.id,email:e.email||"",full_name:"",trial_used:!1,trial_start:null,trial_end:null});if(v)throw console.error("Error creating profile:",v),v}else if(x)throw console.error("Error checking profile:",x),x;const f=new Date,p=new Date(f.getTime()+3*24*60*60*1e3);console.log("Activating trial for user:",e.id),console.log("Trial start:",f.toISOString()),console.log("Trial end:",p.toISOString());const{data:w,error:C}=await z.from("profiles").update({trial_used:!0,trial_start:f.toISOString(),trial_end:p.toISOString()}).eq("id",e.id).select();if(C)throw console.error("Supabase error:",C),console.error("Error code:",C.code),console.error("Error message:",C.message),console.error("Error details:",C.details),console.error("Error hint:",C.hint),C;if(!w||w.length===0)throw new Error("Profil gncellenemedi. Ltfen tekrar deneyin.");console.log("Trial activated successfully:",w);const{error:k}=await z.rpc("record_trial_activation",{p_ip_address:g,p_user_id:e.id});k&&console.error("Error recording trial activation:",k),o(!0),n(r.trial.activated,"success"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}catch(g){console.error("Error activating trial:",g);let y="cretsiz deneme balatlamad. Ltfen tekrar deneyin.";g!=null&&g.message?y=g.message:(g==null?void 0:g.code)==="PGRST301"?y="Yetkiniz yok. Ltfen giri yapn.":(g==null?void 0:g.code)==="23505"&&(y="Bu ilem zaten yaplm."),n(y,"error")}finally{a(!1)}};return e?i.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),i.jsx("div",{className:"relative max-w-2xl mx-auto z-10",children:c?i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-yellow-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500/20 flex items-center justify-center mx-auto mb-6",children:i.jsx(Bt,{className:"text-yellow-400",size:32})}),i.jsx("h1",{className:"text-3xl font-bold mb-4 text-white",children:r.trial.alreadyUsed}),i.jsx("p",{className:"text-slate-400 mb-8",children:r.trial.alreadyUsedDesc}),i.jsx("button",{onClick:()=>t("/pricing"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:r.trial.viewPlans})]}):l?i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-green-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-6",children:i.jsx(qe,{className:"text-green-400",size:32})}),i.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent",children:r.trial.activated}),i.jsx("p",{className:"text-slate-300 text-lg mb-2",children:r.trial.activatedDesc}),i.jsx("p",{className:"text-slate-400 mb-8",children:r.trial.enjoy3Days}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[i.jsx("p",{className:"text-slate-400 text-sm mb-1",children:r.trial.duration}),i.jsx("p",{className:"text-white font-semibold",children:r.trial.threeDays})]}),i.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[i.jsx("p",{className:"text-slate-400 text-sm mb-1",children:r.trial.analyses}),i.jsx("p",{className:"text-white font-semibold",children:r.trial.threeAnalyses})]}),i.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[i.jsx("p",{className:"text-slate-400 text-sm mb-1",children:r.trial.features}),i.jsx("p",{className:"text-white font-semibold",children:r.trial.fullAccess})]})]}),i.jsxs("button",{onClick:()=>t("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 inline-flex items-center gap-2",children:[r.trial.startAnalyzing,i.jsx(Lc,{size:20})]})]}):i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center mx-auto mb-6",children:i.jsx(Bt,{className:"text-purple-400",size:32})}),i.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:r.trial.activateTitle}),i.jsx("p",{className:"text-slate-300 text-lg mb-8",children:r.trial.activateDesc}),i.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-6 mb-8 text-left",children:[i.jsx("h3",{className:"text-white font-semibold mb-4",children:r.trial.whatsIncluded}),i.jsxs("ul",{className:"space-y-3",children:[i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx(qe,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),i.jsx("span",{className:"text-slate-300",children:r.trial.feature1})]}),i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx(qe,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),i.jsx("span",{className:"text-slate-300",children:r.trial.feature2})]}),i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx(qe,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),i.jsx("span",{className:"text-slate-300",children:r.trial.feature3})]})]})]}),i.jsx("button",{onClick:m,disabled:s,className:"w-full px-6 py-4 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:s?r.trial.activating:r.trial.activateNow})]})})]}):null}function mv(){const{user:e}=zt(),t=ft(),{t:r,language:n}=Xe(),[s,a]=b.useState([]),[l,o]=b.useState(null),[c,u]=b.useState([]),[d,h]=b.useState(""),[m,g]=b.useState(!0),[y,S]=b.useState(!1),[A,x]=b.useState(""),[f,p]=b.useState([]),[w,C]=b.useState(!1),[k,v]=b.useState(!1),[j,R]=b.useState(null),[P,Q]=b.useState(!0),[F,q]=b.useState(null),ae=b.useRef(null);b.useEffect(()=>{if(e){const $=new URLSearchParams(window.location.search).get("user");$&&$!==l&&o($)}},[e,l]),b.useEffect(()=>{try{if(!e){t("/signin");return}const T=async()=>{if(e)try{const I=`hidden_conversations_${e.id}`,G=new Set(JSON.parse(localStorage.getItem(I)||"[]")),{data:te}=await z.from("user_blocks").select("blocker_id, blocked_id").or(`blocker_id.eq.${e.id},blocked_id.eq.${e.id}`),ie=new Set;te==null||te.forEach(ke=>{ke.blocker_id===e.id?ie.add(ke.blocked_id):ie.add(ke.blocker_id)});const{data:Y,error:se}=await z.from("messages").select("sender_id, receiver_id, message_text, created_at").or(`sender_id.eq.${e.id},receiver_id.eq.${e.id}`).order("created_at",{ascending:!1});if(se)throw se;const we=new Map;for(const ke of Y||[]){const Z=ke.sender_id===e.id?ke.receiver_id:ke.sender_id;if(!ie.has(Z)&&!G.has(Z)&&!we.has(Z)){const{data:Oe}=await z.from("profiles").select("id, full_name, username, avatar_url").eq("id",Z).single();Oe&&we.set(Z,{user_id:Z,full_name:Oe.full_name,username:Oe.username,avatar_url:Oe.avatar_url,last_message:ke.message_text,last_message_at:ke.created_at,unread_count:0})}}for(const[ke,Z]of we){const{count:Oe}=await z.from("messages").select("*",{count:"exact",head:!0}).eq("sender_id",ke).eq("receiver_id",e.id).is("read_at",null);Z.unread_count=Oe||0}const Ot=Array.from(we.values());if(a(ke=>{if(ke.length===0&&Ot.length>0)return Ot;const Z=new Map;ke.forEach(ze=>{Z.set(ze.user_id,ze)}),Ot.forEach(ze=>{const We=Z.get(ze.user_id);We?Z.set(ze.user_id,{...We,last_message:ze.last_message||We.last_message,last_message_at:ze.last_message_at||We.last_message_at,unread_count:ze.unread_count}):Z.set(ze.user_id,ze)});const Oe=Array.from(Z.values()),Sr=new Map(ke.map(ze=>[ze.user_id,ze]));return Oe.some(ze=>{const We=Sr.get(ze.user_id);return We?We.last_message!==ze.last_message||We.last_message_at!==ze.last_message_at||We.unread_count!==ze.unread_count:!0})?Oe:ke}),l){const ke=Ot.find(Z=>Z.user_id===l);ke&&q(Z=>!Z||Z.user_id!==ke.user_id||Z.last_message!==ke.last_message||Z.last_message_at!==ke.last_message_at||Z.unread_count!==ke.unread_count?ke:Z)}}catch(I){console.error("Error loading conversations:",I)}finally{g(!1)}},$=async I=>{if(e)try{console.log(" Loading messages for conversation:",I);const{data:G,error:te}=await z.from("messages").select(`
            *,
            reply_message:reply_to (
              id,
              message_text,
              sender_id,
              created_at
            )
          `).or(`sender_id.eq.${e.id},receiver_id.eq.${e.id}`).eq("receiver_id",I).or(`sender_id.eq.${I},receiver_id.eq.${I}`).eq("sender_id",e.id).order("created_at",{ascending:!0});if(te)throw console.error(" Error loading messages:",te),te;console.log(" Loaded messages:",(G==null?void 0:G.length)||0,"messages");const ie=(G||[]).map(se=>({...se,reply_message:Array.isArray(se.reply_message)?se.reply_message[0]:se.reply_message}));u(ie),await z.from("messages").update({read_at:new Date().toISOString()}).eq("sender_id",I).eq("receiver_id",e.id).is("read_at",null);const{data:Y}=await z.from("profiles").select("show_read_receipts").eq("id",I).single();(Y==null?void 0:Y.show_read_receipts)!==!1&&await z.from("messages").update({seen_at:new Date().toISOString()}).eq("sender_id",I).eq("receiver_id",e.id).is("seen_at",null)}catch(G){console.error("Error loading messages:",G)}};T();const ne=z.channel("messages-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},I=>{var G;console.log(" New message received (real-time):",I),console.log(" Message details:",{id:I.new.id,sender_id:I.new.sender_id,receiver_id:I.new.receiver_id,message_text:((G=I.new.message_text)==null?void 0:G.substring(0,50))+"...",created_at:I.new.created_at}),a(te=>te.find(Y=>Y.user_id===I.new.sender_id)?te.map(Y=>Y.user_id===I.new.sender_id?{...Y,last_message:I.new.message_text,last_message_at:I.new.created_at}:Y):(setTimeout(()=>T(),100),te)),l&&I.new.sender_id===l?(console.log(" Adding message to current conversation"),u(te=>{if(te.find(Y=>Y.id===I.new.id))return console.log(" Message already exists, skipping"),te;console.log(" Adding new message to state");const ie=[...te,I.new];return setTimeout(()=>{var Y;(Y=ae.current)==null||Y.scrollIntoView({behavior:"smooth"})},100),ie})):l?(console.log(" Reloading messages for different conversation"),$(l)):console.log(" No conversation selected, message will appear in list")}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`sender_id=eq.${e.id}`},I=>{console.log("Message sent:",I),a(G=>G.find(ie=>ie.user_id===I.new.receiver_id)?G.map(ie=>ie.user_id===I.new.receiver_id?{...ie,last_message:I.new.message_text,last_message_at:I.new.created_at}:ie):(setTimeout(()=>T(),100),G)),l&&$(l)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},I=>{l&&I.new.sender_id===l&&u(G=>G.map(te=>te.id===I.new.id?{...te,seen_at:I.new.seen_at}:te))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`sender_id=eq.${e.id}`},I=>{l&&I.new.receiver_id===l&&u(G=>G.map(te=>te.id===I.new.id?{...te,seen_at:I.new.seen_at}:te))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},I=>{console.log("Message deleted (received):",I),u(G=>G.filter(te=>te.id!==I.old.id)),setTimeout(()=>T(),200)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`sender_id=eq.${e.id}`},I=>{console.log("Message deleted (sent):",I),u(G=>G.filter(te=>te.id!==I.old.id)),setTimeout(()=>T(),200)}).subscribe(I=>{console.log("Real-time subscription status:",I),I==="SUBSCRIBED"?console.log(" Real-time subscription active"):I==="CHANNEL_ERROR"&&console.error(" Real-time subscription error")}),he=setInterval(()=>{l&&(console.log(" Polling for new messages..."),$(l))},1e4);return()=>{z.removeChannel(ne),clearInterval(he)}}catch(T){console.error("Error in messages useEffect:",T),g(!1)}},[e,t,l]),b.useEffect(()=>{e&&!m&&(async()=>{if(!e)return;const ne=new URLSearchParams(window.location.search).get("user");if(ne&&ne!==e.id){console.log("URL parameter detected, starting conversation with:",ne),o(ne),console.log("Loading profile for URL parameter user...");const he=await Se(ne);he&&je(he);const I=window.location.pathname;window.history.replaceState({},"",I)}})()},[e,m]),b.useEffect(()=>{l&&!m&&(s.find($=>$.user_id===l)||(console.log("Selected user not found in conversations, loading profile for:",l),Se(l)))},[l,s,m]),b.useEffect(()=>{setTimeout(()=>{var T;(T=ae.current)==null||T.scrollIntoView({behavior:"smooth"})},100)},[c]),b.useEffect(()=>{const T=setTimeout(()=>{A.trim()?U():p([])},300);return()=>clearTimeout(T)},[A]);const Se=async T=>{if(!T)return null;try{console.log("Loading user profile for:",T);const{data:$,error:ne}=await z.from("profiles").select("id, full_name, username, avatar_url").eq("id",T).single();if(ne)return console.error("Error loading user profile:",ne),null;if($){console.log("Loaded user profile:",$),je($);const he={user_id:$.id,full_name:$.full_name,username:$.username,avatar_url:$.avatar_url,last_message:null,last_message_at:new Date().toISOString(),unread_count:0};return l===$.id&&q(he),a(I=>{const G=I.find(te=>te.user_id===$.id);return G?(console.log("User already exists in conversations"),l===$.id&&q(G),I):(console.log("Adding user to conversations list"),[he,...I])}),$}}catch($){console.error("Error loading user profile:",$)}return null},bt=async()=>{if(e)try{const T=`hidden_conversations_${e.id}`,$=new Set(JSON.parse(localStorage.getItem(T)||"[]")),{data:ne}=await z.from("user_blocks").select("blocker_id, blocked_id").or(`blocker_id.eq.${e.id},blocked_id.eq.${e.id}`),he=new Set;ne==null||ne.forEach(Y=>{Y.blocker_id===e.id?he.add(Y.blocked_id):he.add(Y.blocker_id)});const{data:I,error:G}=await z.from("messages").select("sender_id, receiver_id, message_text, created_at").or(`sender_id.eq.${e.id},receiver_id.eq.${e.id}`).order("created_at",{ascending:!1});if(G)throw G;const te=new Map;for(const Y of I||[]){const se=Y.sender_id===e.id?Y.receiver_id:Y.sender_id;if(!he.has(se)&&!$.has(se)&&!te.has(se)){const{data:we}=await z.from("profiles").select("id, full_name, username, avatar_url").eq("id",se).single();we&&te.set(se,{user_id:se,full_name:we.full_name,username:we.username,avatar_url:we.avatar_url,last_message:Y.message_text,last_message_at:Y.created_at,unread_count:0})}}for(const[Y,se]of te){const{count:we}=await z.from("messages").select("*",{count:"exact",head:!0}).eq("sender_id",Y).eq("receiver_id",e.id).is("read_at",null);se.unread_count=we||0}const ie=Array.from(te.values());if(a(Y=>{if(Y.length===0&&ie.length>0)return ie;const se=new Map;Y.forEach(Z=>{se.set(Z.user_id,Z)}),ie.forEach(Z=>{const Oe=se.get(Z.user_id);Oe?se.set(Z.user_id,{...Oe,last_message:Z.last_message||Oe.last_message,last_message_at:Z.last_message_at||Oe.last_message_at,unread_count:Z.unread_count}):se.set(Z.user_id,Z)});const we=Array.from(se.values()),Ot=new Map(Y.map(Z=>[Z.user_id,Z]));return we.some(Z=>{const Oe=Ot.get(Z.user_id);return Oe?Oe.last_message!==Z.last_message||Oe.last_message_at!==Z.last_message_at||Oe.unread_count!==Z.unread_count:!0})?we:Y}),l){const Y=ie.find(se=>se.user_id===l);Y&&q(se=>!se||se.user_id!==Y.user_id||se.last_message!==Y.last_message||se.last_message_at!==Y.last_message_at||se.unread_count!==Y.unread_count?Y:se)}}catch(T){console.error("Error loading conversations:",T)}finally{g(!1)}},Ze=async T=>{if(e)try{const{data:$,error:ne}=await z.from("messages").select(`
          *,
          reply_message:reply_to (
            id,
            message_text,
            sender_id,
            created_at
          )
        `).or(`sender_id.eq.${e.id}.and.receiver_id.eq.${T},sender_id.eq.${T}.and.receiver_id.eq.${e.id}`).order("created_at",{ascending:!0});if(ne)throw console.error(" Error loading messages:",ne),ne;console.log(" Loaded messages:",($==null?void 0:$.length)||0,"messages");const he=($||[]).map(G=>({...G,reply_message:Array.isArray(G.reply_message)?G.reply_message[0]:G.reply_message}));u(G=>{const te=new Set(G.map(Y=>Y.id)),ie=new Set(he.map(Y=>Y.id));return te.size!==ie.size||!Array.from(te).every(Y=>ie.has(Y))?(console.log(" Messages changed, updating state"),he):G}),await z.from("messages").update({read_at:new Date().toISOString()}).eq("sender_id",T).eq("receiver_id",e.id).is("read_at",null);const{data:I}=await z.from("profiles").select("show_read_receipts").eq("id",T).single();(I==null?void 0:I.show_read_receipts)!==!1&&await z.from("messages").update({seen_at:new Date().toISOString()}).eq("sender_id",T).eq("receiver_id",e.id).is("seen_at",null),bt()}catch($){console.error("Error loading messages:",$)}},L=async()=>{if(!(!e||!l||!confirm(n==="tr"?"Bu sohbeti silmek istediinizden emin misiniz? Sohbet listeden gizlenecek, ancak mesajlar korunacaktr.":"Are you sure you want to delete this conversation? The conversation will be hidden from your list, but messages will be preserved.")))try{const $=l,ne=`hidden_conversation_${e.id}_${$}`;localStorage.setItem(ne,"true");const he=`hidden_conversations_${e.id}`,I=JSON.parse(localStorage.getItem(he)||"[]");I.includes($)||(I.push($),localStorage.setItem(he,JSON.stringify(I))),o(null),u([]),v(!1),a(G=>G.filter(te=>te.user_id!==$)),bt()}catch($){console.error("Error deleting conversation:",$)}},X=async()=>{if(!(!e||!l)&&confirm("Are you sure you want to block this user? You will no longer see their messages."))try{console.log("Blocking user:",l);const{data:T,error:$}=await z.from("user_blocks").insert({blocker_id:e.id,blocked_id:l}).select();if($)throw console.error("Block error:",$),$;console.log("Block successful:",T),await L(),console.log("User blocked successfully")}catch(T){console.error("Error blocking user:",T),alert("Failed to block user. Please try again.")}},N=async()=>{var $,ne,he;if(!e||!l||!d.trim())return;S(!0);const T=d.trim();h("");try{const{data:I,error:G}=await z.from("user_blocks").select("id").eq("blocker_id",l).eq("blocked_id",e.id).single();if(G&&G.code!=="PGRST116"&&console.error("Error checking block status:",G),I){h(T),alert(n==="tr"?"Bu kullanc sizi engellemi. Mesaj gnderemezsiniz.":"This user has blocked you. You cannot send messages."),console.log("Cannot send message: user is blocked");return}console.log("Attempting to send message:",{sender_id:e.id,receiver_id:l,message_text:T,reply_to:(j==null?void 0:j.id)||null});const te={sender_id:e.id,receiver_id:l,message_text:T};j!=null&&j.id&&(te.reply_to=j.id);const{data:ie,error:Y}=await z.from("messages").insert(te).select();if(Y){console.error(" Error sending message:",Y),console.error("Error details:",{message:Y.message,code:Y.code,details:Y.details,hint:Y.hint});let se=n==="tr"?"Mesaj gnderilemedi. Ltfen tekrar deneyin.":"Failed to send message. Please try again.";Y.code==="42501"?se=n==="tr"?"Bu ilem iin yetkiniz yok. Ltfen tekrar giri yapn.":"You do not have permission for this action. Please sign in again.":Y.code==="23503"?se=n==="tr"?"Geersiz kullanc. Ltfen sayfay yenileyin.":"Invalid user. Please refresh the page.":($=Y.message)!=null&&$.includes("reply_to")&&(se=n==="tr"?"Yant gnderilemedi. Ltfen normal mesaj olarak gnderin.":"Reply failed. Please send as a normal message."),alert(se),h(T);return}if(console.log(" Message sent successfully:",ie),console.log(" Message ID:",(ne=ie==null?void 0:ie[0])==null?void 0:ne.id),console.log(" Receiver ID:",(he=ie==null?void 0:ie[0])==null?void 0:he.receiver_id),ie&&ie[0]){const{data:se,error:we}=await z.from("messages").select("*").eq("id",ie[0].id).single();we?console.error(" Message verification failed:",we):console.log(" Message verified in database:",se)}ie&&ie[0]&&(u(se=>[...se,ie[0]]),setTimeout(()=>{var se;(se=ae.current)==null||se.scrollIntoView({behavior:"smooth"})},100)),R(null),setTimeout(()=>{Ze(l)},100)}catch(I){console.error("Error sending message (catch):",I),alert(n==="tr"?"Beklenmeyen bir hata olutu. Ltfen tekrar deneyin.":"An unexpected error occurred. Please try again."),h(T)}finally{S(!1)}},U=async()=>{if(A.trim()){C(!0);try{const{data:T}=await z.from("user_blocks").select("blocker_id, blocked_id").or(`blocker_id.eq.${e==null?void 0:e.id},blocked_id.eq.${e==null?void 0:e.id}`),$=new Set;T==null||T.forEach(G=>{G.blocker_id===(e==null?void 0:e.id)?$.add(G.blocked_id):$.add(G.blocker_id)});const{data:ne,error:he}=await z.from("profiles").select("id, full_name, username, avatar_url").or(`full_name.ilike.%${A}%,username.ilike.%${A}%`).neq("id",(e==null?void 0:e.id)||"").limit(10);if(he)throw he;const I=(ne||[]).filter(G=>!$.has(G.id));p(I)}catch(T){console.error("Error searching users:",T)}finally{C(!1)}}},B=async T=>{if(console.log("Starting conversation with:",T),o(T),s.find(ne=>ne.user_id===T))console.log("User already in conversations"),je(null);else{console.log("User not in conversations, fetching profile...");const ne=await Se(T);ne&&je(ne)}x(""),setTimeout(()=>{p([])},100)},re=T=>{const $=new Date(T),ne=new Date,he=ne.getTime()-$.getTime(),I=Math.floor(he/6e4),G=Math.floor(I/60),te=Math.floor(G/24);if(I<60)return $.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});if($.toDateString()===ne.toDateString())return $.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});const ie=new Date(ne);return ie.setDate(ie.getDate()-1),$.toDateString()===ie.toDateString()?n==="tr"?"Dn":"Yesterday":te<7?$.toLocaleDateString("en-US",{weekday:"short"}):$.toLocaleDateString("en-US",{month:"short",day:"numeric",year:$.getFullYear()!==ne.getFullYear()?"numeric":void 0})},W=T=>new Date(T).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),[de,je]=b.useState(null),ce=Um.useMemo(()=>{var ne;if(!l)return null;if(F&&F.user_id===l)return F;const T=s.find(he=>he.user_id===l);if(T)return T;if(de&&de.id===l)return{user_id:de.id,full_name:de.full_name,username:de.username,avatar_url:de.avatar_url,last_message:null,last_message_at:null,unread_count:0};const $=f.find(he=>he.id===l);return $?{user_id:$.id,full_name:$.full_name,username:$.username,avatar_url:$.avatar_url,last_message:null,last_message_at:null,unread_count:0}:m?F||{user_id:l,full_name:((ne=r==null?void 0:r.messages)==null?void 0:ne.loading)||"Loading...",username:null,avatar_url:null,last_message:null,last_message_at:null,unread_count:0}:F},[l,F,s,f,de,m,r]);return e?i.jsxs("div",{className:"min-h-screen relative pt-24 pb-16",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),i.jsx("div",{className:"relative max-w-7xl mx-auto px-4 md:px-6 z-10",children:i.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl overflow-hidden",style:{height:"calc(100vh - 200px)"},children:i.jsxs("div",{className:"flex h-full",children:[i.jsx("div",{className:`w-full md:w-1/3 border-r border-purple-500/20 flex flex-col ${l?"hidden md:flex":"flex"}`,children:i.jsxs("div",{className:"p-4 border-b border-purple-500/20",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:r.messages.title}),i.jsxs("div",{className:"relative",children:[i.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),i.jsx("input",{type:"text",value:A,onChange:T=>x(T.target.value),placeholder:r.messages.searchPlaceholder,className:"w-full pl-10 pr-4 py-2 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"})]}),f.length>0&&A.length>0&&i.jsxs("div",{className:"mt-2 max-h-60 overflow-y-auto space-y-1 border-b border-purple-500/20 pb-2",children:[i.jsx("div",{className:"text-xs text-slate-400 px-3 py-1 font-medium",children:r.messages.searchResults}),f.map(T=>i.jsxs("button",{onClick:()=>B(T.id),className:"w-full flex items-center gap-3 p-3 hover:bg-slate-800/50 rounded-lg transition-colors",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center flex-shrink-0 overflow-hidden",children:T.avatar_url?i.jsx("img",{src:T.avatar_url,alt:"",className:"w-full h-full object-cover"}):i.jsx(Qe,{size:20,className:"text-white"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-white font-medium",children:T.full_name}),T.username&&i.jsxs("p",{className:"text-slate-400 text-sm",children:["@",T.username]})]})]},T.id))]}),w&&A.length>0&&i.jsxs("div",{className:"mt-2 flex items-center justify-center p-4",children:[i.jsx(Be,{className:"animate-spin text-purple-400",size:20}),i.jsx("span",{className:"ml-2 text-slate-400",children:r.messages.searching})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto mt-2",children:[s.length>0&&i.jsxs(i.Fragment,{children:[A.length>0&&i.jsx("div",{className:"text-xs text-slate-400 px-3 py-2 font-medium border-b border-purple-500/20",children:r.messages.conversations||"Conversations"}),s.map(T=>i.jsx("div",{className:`w-full flex items-center gap-3 p-4 border-b border-purple-500/10 hover:bg-slate-800/50 transition-colors group ${l===T.user_id?"bg-slate-800/50":""}`,children:i.jsxs("button",{onClick:()=>o(T.user_id),className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center flex-shrink-0 overflow-hidden",children:T.avatar_url?i.jsx("img",{src:T.avatar_url,alt:"",className:"w-full h-full object-cover"}):i.jsx(Qe,{size:24,className:"text-white"})}),i.jsxs("div",{className:"flex-1 text-left min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-white font-medium truncate",children:T.full_name}),T.last_message_at&&i.jsx("span",{className:"text-xs text-slate-400",children:re(T.last_message_at)})]}),T.last_message&&i.jsx("p",{className:"text-slate-400 text-sm truncate",children:T.last_message})]})]})},T.user_id))]}),!m&&s.length===0&&A.length===0&&i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 p-6",children:[i.jsx(br,{size:48,className:"mb-4"}),i.jsx("p",{children:r.messages.noMessages}),i.jsx("p",{className:"text-sm mt-2",children:r.messages.searchToStart})]})]})]})}),i.jsx("div",{className:`flex-1 flex flex-col ${l?"flex":"hidden md:flex"}`,children:l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center gap-3",children:[i.jsx("button",{onClick:()=>o(null),className:"md:hidden text-slate-400 hover:text-white",title:"Back to conversations","aria-label":"Back to conversations",children:i.jsx(by,{size:24})}),i.jsx("button",{onClick:()=>l&&t(`/profile/${l}`),className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden hover:scale-105 transition-transform",disabled:!l,children:ce!=null&&ce.avatar_url?i.jsx("img",{src:ce.avatar_url,alt:"",className:"w-full h-full object-cover"}):i.jsx(Qe,{size:20,className:"text-white"})}),i.jsx("div",{className:"flex-1",children:ce?i.jsxs("button",{onClick:()=>l&&t(`/profile/${l}`),className:"text-left hover:opacity-80 transition-opacity",title:`View ${ce.full_name}'s profile`,"aria-label":`View ${ce.full_name}'s profile`,children:[i.jsx("p",{className:"text-white font-medium hover:text-purple-300 transition-colors",children:ce.full_name}),ce.username&&i.jsxs("p",{className:"text-slate-400 text-sm hover:text-purple-400 transition-colors",children:["@",ce.username]})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{className:"animate-spin text-purple-400",size:16}),i.jsx("p",{className:"text-slate-400",children:r.messages.loadingUser})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>v(!k),className:"p-2 text-slate-400 hover:text-white transition-colors",title:"Menu","aria-label":"Open menu",children:i.jsx(dm,{size:20})}),k&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),i.jsxs("div",{className:"absolute right-0 top-12 w-48 bg-slate-900 border border-purple-500/30 rounded-lg shadow-2xl z-50 overflow-hidden",children:[i.jsxs("button",{onClick:()=>{v(!1),L()},className:"w-full px-4 py-3 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-3 text-red-400 hover:text-red-300",children:[i.jsx(ei,{size:18}),i.jsx("span",{children:r.messages.deleteConversation})]}),i.jsxs("button",{onClick:X,className:"w-full px-4 py-3 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-3 text-red-400 hover:text-red-300",children:[i.jsx(Co,{size:18}),i.jsx("span",{children:"Block User"})]})]})]})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.map(T=>{const $=T.sender_id===e.id,ne=$&&T.seen_at&&P;return i.jsxs("div",{className:`flex ${$?"justify-end":"justify-start"} group`,children:[i.jsxs("div",{className:`max-w-[70%] rounded-lg px-4 py-2 ${$?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800 text-white"}`,children:[T.reply_to&&T.reply_message&&i.jsxs("div",{className:`mb-2 pl-3 border-l-2 ${$?"border-white/30":"border-purple-400/30"}`,children:[i.jsx("p",{className:`text-xs ${$?"text-white/60":"text-slate-400"}`,children:T.reply_message.sender_id===e.id?n==="tr"?"Sen":"You":(ce==null?void 0:ce.full_name)||"User"}),i.jsx("p",{className:`text-sm truncate ${$?"text-white/80":"text-slate-300"}`,children:T.reply_message.message_text})]}),i.jsx("p",{className:"break-words",children:T.message_text}),i.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-1",children:[i.jsx("p",{className:`text-xs ${$?"text-white/70":"text-slate-400"}`,title:W(T.created_at),children:re(T.created_at)}),$&&i.jsx(i.Fragment,{children:T.read_at?i.jsx(wy,{size:14,className:ne?"text-blue-300":"text-white/50"}):i.jsx(qe,{size:14,className:"text-white/50"})})]})]}),!$&&i.jsx("button",{onClick:()=>R(T),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1.5 text-slate-400 hover:text-purple-400",title:r.messages.reply||"Reply",children:i.jsx(vd,{size:16})})]},T.id)}),i.jsx("div",{ref:ae})]}),j&&i.jsx("div",{className:"px-4 pt-2 border-t border-purple-500/20",children:i.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 rounded-lg p-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(vd,{size:14,className:"text-purple-400"}),i.jsx("p",{className:"text-xs text-purple-400 font-medium",children:j.sender_id===e.id?n==="tr"?"Kendine yant":"Replying to yourself":n==="tr"?"Yantlanyor":"Replying"})]}),i.jsx("p",{className:"text-sm text-slate-300 truncate",children:j.message_text})]}),i.jsx("button",{onClick:()=>R(null),className:"text-slate-400 hover:text-white p-1",children:i.jsx(qt,{size:16})})]})}),i.jsx("div",{className:"p-4 border-t border-purple-500/20",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:d,onChange:T=>h(T.target.value),onKeyPress:T=>T.key==="Enter"&&!y&&N(),placeholder:j?r.messages.replyPlaceholder||"Type your reply...":r.messages.typePlaceholder,className:"flex-1 px-4 py-2 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60",disabled:y}),i.jsx("button",{onClick:N,disabled:y||!d.trim(),className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-lg hover:from-pink-500 hover:to-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:y?i.jsx(Be,{className:"animate-spin",size:20}):i.jsx(Ha,{size:20})})]})})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(br,{size:64,className:"mx-auto mb-4"}),i.jsx("p",{children:"Select a conversation to start messaging"})]})})})]})})})]}):null}function pv(){const{t:e}=Xe(),t=ft();return i.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[i.jsx("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.terms.title})}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6 md:p-8 space-y-6 md:space-y-8 animate-fade-in-delay",children:[i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.acceptanceTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.terms.acceptanceText})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.serviceTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.terms.serviceText}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[i.jsx("li",{children:e.terms.serviceFeature1}),i.jsx("li",{children:e.terms.serviceFeature2}),i.jsx("li",{children:e.terms.serviceFeature3})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.userAccountTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.terms.userAccountText}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[i.jsx("li",{children:e.terms.userAccountFeature1}),i.jsx("li",{children:e.terms.userAccountFeature2}),i.jsx("li",{children:e.terms.userAccountFeature3})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.contentTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.terms.contentText}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[i.jsx("li",{children:e.terms.contentFeature1}),i.jsx("li",{children:e.terms.contentFeature2}),i.jsx("li",{children:e.terms.contentFeature3})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.privacyTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.terms.privacyText.includes("Privacy Policy")?i.jsxs(i.Fragment,{children:["Your privacy is important to us. Please review our"," ",i.jsx("button",{onClick:()=>t("/privacy"),className:"text-purple-400 hover:text-purple-300 transition-colors underline",children:"Privacy Policy"}),", which also governs your use of the service, to understand our practices."]}):i.jsxs(i.Fragment,{children:["Gizliliiniz bizim iin nemlidir. Uygulamalarmz anlamak iin ltfen hizmetin kullanmnz da yneten"," ",i.jsx("button",{onClick:()=>t("/privacy"),className:"text-purple-400 hover:text-purple-300 transition-colors underline",children:"Gizlilik Politikamz"})," ","inceleyin."]})})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.paymentTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.terms.paymentText}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[i.jsx("li",{children:e.terms.paymentFeature1}),i.jsx("li",{children:e.terms.paymentFeature2}),i.jsx("li",{children:e.terms.paymentFeature3})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.terminationTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.terms.terminationText})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.contactTitle}),i.jsxs("p",{className:"text-slate-300 leading-relaxed",children:[e.terms.contactText," ",i.jsx("button",{onClick:()=>t("/contact"),className:"text-purple-400 hover:text-purple-300 transition-colors underline",children:e.terms.contactLink})]})]})]})]})]})}function gv(){const{t:e}=Xe(),t=ft();return i.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[i.jsx("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.privacy.title})}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6 md:p-8 space-y-6 md:space-y-8 animate-fade-in-delay",children:[i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.introductionTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.introductionText})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.dataCollectionTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.privacy.dataCollectionText}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[i.jsx("li",{children:e.privacy.dataCollectionItem1}),i.jsx("li",{children:e.privacy.dataCollectionItem2}),i.jsx("li",{children:e.privacy.dataCollectionItem3}),i.jsx("li",{children:e.privacy.dataCollectionItem4})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.dataUsageTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.privacy.dataUsageText}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[i.jsx("li",{children:e.privacy.dataUsageItem1}),i.jsx("li",{children:e.privacy.dataUsageItem2}),i.jsx("li",{children:e.privacy.dataUsageItem3}),i.jsx("li",{children:e.privacy.dataUsageItem4})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.dataStorageTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.dataStorageText})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.dataSecurityTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.privacy.dataSecurityText}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[i.jsx("li",{children:e.privacy.dataSecurityItem1}),i.jsx("li",{children:e.privacy.dataSecurityItem2}),i.jsx("li",{children:e.privacy.dataSecurityItem3})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.userRightsTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.privacy.userRightsText}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[i.jsx("li",{children:e.privacy.userRightsItem1}),i.jsx("li",{children:e.privacy.userRightsItem2}),i.jsx("li",{children:e.privacy.userRightsItem3}),i.jsx("li",{children:e.privacy.userRightsItem4})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.cookiesTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.cookiesText})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.thirdPartyTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.thirdPartyText})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.changesTitle}),i.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.changesText})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.contactTitle}),i.jsxs("p",{className:"text-slate-300 leading-relaxed",children:[e.privacy.contactText," ",i.jsx("button",{onClick:()=>t("/contact"),className:"text-purple-400 hover:text-purple-300 transition-colors underline",children:e.privacy.contactLink})]})]})]})]})]})}function xv(){const{t:e}=Xe(),{user:t}=zt(),{showToast:r}=ur(),[n,s]=b.useState(""),[a,l]=b.useState("other"),[o,c]=b.useState(!1),[u,d]=b.useState(!1),h="AdvA9XekMYHYYOhcF";b.useEffect(()=>{ba.init(h)},[]);const m=async g=>{if(g.preventDefault(),!n.trim()){r(e.feedback.emptyError,"error");return}c(!0);try{const{error:y}=await z.from("feedback").insert({user_id:(t==null?void 0:t.id)||null,category:a,message:n.trim(),user_email:(t==null?void 0:t.email)||null});if(y)throw y;try{const S={name:(t==null?void 0:t.email)||"Anonymous User",email:(t==null?void 0:t.email)||"no-reply@submirra.ai",time:new Date().toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),message:`Kategori: ${a}

${n.trim()}`};if(await ba.send("service_6btsv5d","template_x7aji5u",S),console.log(" Feedback email sent successfully"),t)try{const f="ded2c1c6-7064-499f-a1e7-a8f90c95904a",p=` Feedback: ${a}

Kullanc: ${t.email||"Anonymous"}
Kategori: ${a}

Mesaj:
${n.trim()}`,{error:w}=await z.from("messages").insert({sender_id:t.id,receiver_id:f,message_text:p});w?console.error(" Feedback mesaj kaydetme hatas:",w):console.log(" Feedback mesaj site ii mesajlama sistemine kaydedildi")}catch(f){console.error(" Feedback mesaj kaydetme hatas:",f)}}catch(S){console.error(" EmailJS Error (feedback):",S)}d(!0),s(""),r(e.feedback.successMessage,"success"),setTimeout(()=>{d(!1)},3e3)}catch(y){console.error("Error submitting feedback:",y),r(e.feedback.errorMessage,"error")}finally{c(!1)}};return i.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-cyan-500/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative max-w-2xl mx-auto z-10",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.feedback.title}),i.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:e.feedback.subtitle})]}),i.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6 md:p-8 hover:border-purple-500/30 transition-all duration-300 animate-fade-in-delay",children:u?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Oc,{className:"text-green-400 mx-auto mb-4",size:48}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:e.feedback.thankYou}),i.jsx("p",{className:"text-slate-400",children:e.feedback.thankYouMessage})]}):i.jsxs("form",{onSubmit:m,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-300 mb-2",children:e.feedback.categoryLabel}),i.jsxs("select",{id:"category",value:a,onChange:g=>l(g.target.value),className:"w-full px-4 py-3 bg-slate-800/50 border border-purple-500/30 rounded-lg text-white focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all",children:[i.jsx("option",{value:"bug",children:e.feedback.categoryBug}),i.jsx("option",{value:"feature",children:e.feedback.categoryFeature}),i.jsx("option",{value:"improvement",children:e.feedback.categoryImprovement}),i.jsx("option",{value:"other",children:e.feedback.categoryOther})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-slate-300 mb-2",children:e.feedback.messageLabel}),i.jsx("textarea",{id:"feedback",value:n,onChange:g=>s(g.target.value),rows:8,placeholder:e.feedback.placeholder,className:"w-full px-4 py-3 bg-slate-800/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none",required:!0})]}),i.jsx("button",{type:"submit",disabled:o||!n.trim(),className:"w-full px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-semibold rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"animate-spin",size:20}),i.jsx("span",{children:e.feedback.submitting})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ha,{size:20}),i.jsx("span",{children:e.feedback.submitButton})]})})]})}),i.jsx("div",{className:"mt-6 text-center text-sm text-slate-500",children:i.jsx("p",{children:e.feedback.privacyNote})})]})]})}function yv(){const e=Uc(),t=()=>{if(window.location.pathname.startsWith("/profile/"))return i.jsx(kd,{});switch(e){case"/":return i.jsx(wd,{});case"/about":return i.jsx(Vy,{});case"/contact":return i.jsx(av,{});case"/analyze":return i.jsx(lv,{});case"/library":return i.jsx(ov,{});case"/pricing":return i.jsx(uv,{});case"/profile":return i.jsx(kd,{});case"/dashboard":return i.jsx(dv,{});case"/social":return i.jsx(hv,{});case"/activate-trial":return i.jsx(fv,{});case"/messages":return i.jsx(mv,{});case"/terms":return i.jsx(pv,{});case"/privacy":return i.jsx(gv,{});case"/feedback":return i.jsx(xv,{});case"/signin":case"/signup":return i.jsx(cv,{});default:return i.jsx(wd,{})}};return i.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col",children:[i.jsx(Gy,{}),i.jsx(Hy,{}),i.jsx("div",{className:"flex-1",children:t()}),i.jsx(Wy,{})]})}function vv(){return i.jsx(gy,{children:i.jsx(my,{children:i.jsx(Iy,{children:i.jsx(My,{children:i.jsx(yv,{})})})})})}Of(document.getElementById("root")).render(i.jsx(b.StrictMode,{children:i.jsx(vv,{})}));
