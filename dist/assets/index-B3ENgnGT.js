(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Gf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Ku={exports:{}},ea={},Gu={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Os=Symbol.for("react.element"),Qf=Symbol.for("react.portal"),Yf=Symbol.for("react.fragment"),Jf=Symbol.for("react.strict_mode"),Xf=Symbol.for("react.profiler"),Zf=Symbol.for("react.provider"),ep=Symbol.for("react.context"),tp=Symbol.for("react.forward_ref"),rp=Symbol.for("react.suspense"),np=Symbol.for("react.memo"),sp=Symbol.for("react.lazy"),gc=Symbol.iterator;function ip(e){return e===null||typeof e!="object"?null:(e=gc&&e[gc]||e["@@iterator"],typeof e=="function"?e:null)}var Qu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yu=Object.assign,Ju={};function An(e,t,r){this.props=e,this.context=t,this.refs=Ju,this.updater=r||Qu}An.prototype.isReactComponent={};An.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};An.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xu(){}Xu.prototype=An.prototype;function uo(e,t,r){this.props=e,this.context=t,this.refs=Ju,this.updater=r||Qu}var ho=uo.prototype=new Xu;ho.constructor=uo;Yu(ho,An.prototype);ho.isPureReactComponent=!0;var vc=Array.isArray,Zu=Object.prototype.hasOwnProperty,fo={current:null},ed={key:!0,ref:!0,__self:!0,__source:!0};function td(e,t,r){var n,s={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Zu.call(t,n)&&!ed.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Os,type:e,key:i,ref:l,props:s,_owner:fo.current}}function ap(e,t){return{$$typeof:Os,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function po(e){return typeof e=="object"&&e!==null&&e.$$typeof===Os}function lp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var yc=/\/+/g;function _a(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lp(""+e.key):t.toString(36)}function hi(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Os:case Qf:l=!0}}if(l)return l=e,s=s(l),e=n===""?"."+_a(l,0):n,vc(s)?(r="",e!=null&&(r=e.replace(yc,"$&/")+"/"),hi(s,t,r,"",function(u){return u})):s!=null&&(po(s)&&(s=ap(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(yc,"$&/")+"/")+e)),t.push(s)),1;if(l=0,n=n===""?".":n+":",vc(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+_a(i,o);l+=hi(i,t,r,c,s)}else if(c=ip(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+_a(i,o++),l+=hi(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ws(e,t,r){if(e==null)return e;var n=[],s=0;return hi(e,n,"","",function(i){return t.call(r,i,s++)}),n}function op(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var He={current:null},fi={transition:null},cp={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:fi,ReactCurrentOwner:fo};function rd(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Ws,forEach:function(e,t,r){Ws(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ws(e,function(){t++}),t},toArray:function(e){return Ws(e,function(t){return t})||[]},only:function(e){if(!po(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=An;G.Fragment=Yf;G.Profiler=Xf;G.PureComponent=uo;G.StrictMode=Jf;G.Suspense=rp;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cp;G.act=rd;G.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Yu({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=fo.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Zu.call(t,c)&&!ed.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Os,type:e.type,key:s,ref:i,props:n,_owner:l}};G.createContext=function(e){return e={$$typeof:ep,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zf,_context:e},e.Consumer=e};G.createElement=td;G.createFactory=function(e){var t=td.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:tp,render:e}};G.isValidElement=po;G.lazy=function(e){return{$$typeof:sp,_payload:{_status:-1,_result:e},_init:op}};G.memo=function(e,t){return{$$typeof:np,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=fi.transition;fi.transition={};try{e()}finally{fi.transition=t}};G.unstable_act=rd;G.useCallback=function(e,t){return He.current.useCallback(e,t)};G.useContext=function(e){return He.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return He.current.useDeferredValue(e)};G.useEffect=function(e,t){return He.current.useEffect(e,t)};G.useId=function(){return He.current.useId()};G.useImperativeHandle=function(e,t,r){return He.current.useImperativeHandle(e,t,r)};G.useInsertionEffect=function(e,t){return He.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return He.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return He.current.useMemo(e,t)};G.useReducer=function(e,t,r){return He.current.useReducer(e,t,r)};G.useRef=function(e){return He.current.useRef(e)};G.useState=function(e){return He.current.useState(e)};G.useSyncExternalStore=function(e,t,r){return He.current.useSyncExternalStore(e,t,r)};G.useTransition=function(){return He.current.useTransition()};G.version="18.3.1";Gu.exports=G;var j=Gu.exports;const up=Kf(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp=j,hp=Symbol.for("react.element"),fp=Symbol.for("react.fragment"),pp=Object.prototype.hasOwnProperty,mp=dp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gp={key:!0,ref:!0,__self:!0,__source:!0};function nd(e,t,r){var n,s={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)pp.call(t,n)&&!gp.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:hp,type:e,key:i,ref:l,props:s,_owner:mp.current}}ea.Fragment=fp;ea.jsx=nd;ea.jsxs=nd;Ku.exports=ea;var a=Ku.exports,sd={exports:{}},it={},id={exports:{}},ad={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,I){var F=D.length;D.push(I);e:for(;0<F;){var Y=F-1>>>1,C=D[Y];if(0<s(C,I))D[Y]=I,D[F]=C,F=Y;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var I=D[0],F=D.pop();if(F!==I){D[0]=F;e:for(var Y=0,C=D.length,O=C>>>1;Y<O;){var q=2*(Y+1)-1,J=D[q],ae=q+1,ee=D[ae];if(0>s(J,F))ae<C&&0>s(ee,J)?(D[Y]=ee,D[ae]=F,Y=ae):(D[Y]=J,D[q]=F,Y=q);else if(ae<C&&0>s(ee,F))D[Y]=ee,D[ae]=F,Y=ae;else break e}}return I}function s(D,I){var F=D.sortIndex-I.sortIndex;return F!==0?F:D.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,h=null,p=3,v=!1,w=!1,N=!1,z=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(D){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=D)n(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=r(u)}}function x(D){if(N=!1,f(D),!w)if(r(c)!==null)w=!0,It(S);else{var I=r(u);I!==null&&Oe(x,I.startTime-D)}}function S(D,I){w=!1,N&&(N=!1,g(_),_=-1),v=!0;var F=p;try{for(f(I),h=r(c);h!==null&&(!(h.expirationTime>I)||D&&!re());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var C=Y(h.expirationTime<=I);I=e.unstable_now(),typeof C=="function"?h.callback=C:h===r(c)&&n(c),f(I)}else n(c);h=r(c)}if(h!==null)var O=!0;else{var q=r(u);q!==null&&Oe(x,q.startTime-I),O=!1}return O}finally{h=null,p=F,v=!1}}var y=!1,b=null,_=-1,L=5,R=-1;function re(){return!(e.unstable_now()-R<L)}function Ke(){if(b!==null){var D=e.unstable_now();R=D;var I=!0;try{I=b(!0,D)}finally{I?Ue():(y=!1,b=null)}}else y=!1}var Ue;if(typeof m=="function")Ue=function(){m(Ke)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,ct=yt.port2;yt.port1.onmessage=Ke,Ue=function(){ct.postMessage(null)}}else Ue=function(){z(Ke,0)};function It(D){b=D,y||(y=!0,Ue())}function Oe(D,I){_=z(function(){D(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,It(S))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var F=p;p=I;try{return D()}finally{p=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,I){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=p;p=D;try{return I()}finally{p=F}},e.unstable_scheduleCallback=function(D,I,F){var Y=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,D){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=F+C,D={id:d++,callback:I,priorityLevel:D,startTime:F,expirationTime:C,sortIndex:-1},F>Y?(D.sortIndex=F,t(u,D),r(c)===null&&D===r(u)&&(N?(g(_),_=-1):N=!0,Oe(x,F-Y))):(D.sortIndex=C,t(c,D),w||v||(w=!0,It(S))),D},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(D){var I=p;return function(){var F=p;p=I;try{return D.apply(this,arguments)}finally{p=F}}}})(ad);id.exports=ad;var vp=id.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=j,st=vp;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ld=new Set,gs={};function Kr(e,t){jn(e,t),jn(e+"Capture",t)}function jn(e,t){for(gs[e]=t,e=0;e<t.length;e++)ld.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nl=Object.prototype.hasOwnProperty,xp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xc={},wc={};function wp(e){return nl.call(wc,e)?!0:nl.call(xc,e)?!1:xp.test(e)?wc[e]=!0:(xc[e]=!0,!1)}function bp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kp(e,t,r,n){if(t===null||typeof t>"u"||bp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,r,n,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){De[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];De[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){De[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){De[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){De[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){De[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){De[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){De[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){De[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var mo=/[\-:]([a-z])/g;function go(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mo,go);De[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mo,go);De[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mo,go);De[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){De[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});De.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){De[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function vo(e,t,r,n){var s=De.hasOwnProperty(t)?De[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kp(t,r,s,n)&&(r=null),n||s===null?wp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xt=yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vs=Symbol.for("react.element"),an=Symbol.for("react.portal"),ln=Symbol.for("react.fragment"),yo=Symbol.for("react.strict_mode"),sl=Symbol.for("react.profiler"),od=Symbol.for("react.provider"),cd=Symbol.for("react.context"),xo=Symbol.for("react.forward_ref"),il=Symbol.for("react.suspense"),al=Symbol.for("react.suspense_list"),wo=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),ud=Symbol.for("react.offscreen"),bc=Symbol.iterator;function Hn(e){return e===null||typeof e!="object"?null:(e=bc&&e[bc]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,ja;function Zn(e){if(ja===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ja=t&&t[1]||""}return`
`+ja+e}var Na=!1;function Sa(e,t){if(!e||Na)return"";Na=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),l=s.length-1,o=i.length-1;1<=l&&0<=o&&s[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(s[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||s[l]!==i[o]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Na=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zn(e):""}function _p(e){switch(e.tag){case 5:return Zn(e.type);case 16:return Zn("Lazy");case 13:return Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 2:case 15:return e=Sa(e.type,!1),e;case 11:return e=Sa(e.type.render,!1),e;case 1:return e=Sa(e.type,!0),e;default:return""}}function ll(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ln:return"Fragment";case an:return"Portal";case sl:return"Profiler";case yo:return"StrictMode";case il:return"Suspense";case al:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cd:return(e.displayName||"Context")+".Consumer";case od:return(e._context.displayName||"Context")+".Provider";case xo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wo:return t=e.displayName||null,t!==null?t:ll(e.type)||"Memo";case ir:t=e._payload,e=e._init;try{return ll(e(t))}catch{}}return null}function jp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ll(t);case 8:return t===yo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Np(e){var t=dd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ks(e){e._valueTracker||(e._valueTracker=Np(e))}function hd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=dd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ol(e,t){var r=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function kc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=kr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fd(e,t){t=t.checked,t!=null&&vo(e,"checked",t,!1)}function cl(e,t){fd(e,t);var r=kr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ul(e,t.type,r):t.hasOwnProperty("defaultValue")&&ul(e,t.type,kr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _c(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ul(e,t,r){(t!=="number"||Ni(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var es=Array.isArray;function yn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+kr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function dl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(es(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:kr(r)}}function pd(e,t){var r=kr(t.value),n=kr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Nc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function md(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?md(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gs,gd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sp=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(e){Sp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ss[t]=ss[e]})});function vd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ss.hasOwnProperty(e)&&ss[e]?(""+t).trim():t+"px"}function yd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=vd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Ep=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fl(e,t){if(t){if(Ep[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function pl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=null;function bo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gl=null,xn=null,wn=null;function Sc(e){if(e=$s(e)){if(typeof gl!="function")throw Error(P(280));var t=e.stateNode;t&&(t=ia(t),gl(e.stateNode,e.type,t))}}function xd(e){xn?wn?wn.push(e):wn=[e]:xn=e}function wd(){if(xn){var e=xn,t=wn;if(wn=xn=null,Sc(e),t)for(e=0;e<t.length;e++)Sc(t[e])}}function bd(e,t){return e(t)}function kd(){}var Ea=!1;function _d(e,t,r){if(Ea)return e(t,r);Ea=!0;try{return bd(e,t,r)}finally{Ea=!1,(xn!==null||wn!==null)&&(kd(),wd())}}function ys(e,t){var r=e.stateNode;if(r===null)return null;var n=ia(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var vl=!1;if(Kt)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){vl=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{vl=!1}function Cp(e,t,r,n,s,i,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var is=!1,Si=null,Ei=!1,yl=null,zp={onError:function(e){is=!0,Si=e}};function Tp(e,t,r,n,s,i,l,o,c){is=!1,Si=null,Cp.apply(zp,arguments)}function Pp(e,t,r,n,s,i,l,o,c){if(Tp.apply(this,arguments),is){if(is){var u=Si;is=!1,Si=null}else throw Error(P(198));Ei||(Ei=!0,yl=u)}}function Gr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function jd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ec(e){if(Gr(e)!==e)throw Error(P(188))}function Ap(e){var t=e.alternate;if(!t){if(t=Gr(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ec(s),e;if(i===n)return Ec(s),t;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,o=s.child;o;){if(o===r){l=!0,r=s,n=i;break}if(o===n){l=!0,n=s,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=s;break}if(o===n){l=!0,n=i,r=s;break}o=o.sibling}if(!l)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function Nd(e){return e=Ap(e),e!==null?Sd(e):null}function Sd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sd(e);if(t!==null)return t;e=e.sibling}return null}var Ed=st.unstable_scheduleCallback,Cc=st.unstable_cancelCallback,Dp=st.unstable_shouldYield,Op=st.unstable_requestPaint,ve=st.unstable_now,Rp=st.unstable_getCurrentPriorityLevel,ko=st.unstable_ImmediatePriority,Cd=st.unstable_UserBlockingPriority,Ci=st.unstable_NormalPriority,Lp=st.unstable_LowPriority,zd=st.unstable_IdlePriority,ta=null,Rt=null;function $p(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(ta,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:Mp,Ip=Math.log,Up=Math.LN2;function Mp(e){return e>>>=0,e===0?32:31-(Ip(e)/Up|0)|0}var Qs=64,Ys=4194304;function ts(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~s;o!==0?n=ts(o):(i&=l,i!==0&&(n=ts(i)))}else l=r&~s,l!==0?n=ts(l):i!==0&&(n=ts(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Et(t),s=1<<r,n|=e[r],t&=~s;return n}function Fp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Et(i),o=1<<l,c=s[l];c===-1?(!(o&r)||o&n)&&(s[l]=Fp(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function xl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Td(){var e=Qs;return Qs<<=1,!(Qs&4194240)&&(Qs=64),e}function Ca(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Rs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=r}function qp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Et(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function _o(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Et(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var te=0;function Pd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ad,jo,Dd,Od,Rd,wl=!1,Js=[],hr=null,fr=null,pr=null,xs=new Map,ws=new Map,lr=[],Hp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zc(e,t){switch(e){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":xs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(t.pointerId)}}function Vn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=$s(t),t!==null&&jo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Wp(e,t,r,n,s){switch(t){case"focusin":return hr=Vn(hr,e,t,r,n,s),!0;case"dragenter":return fr=Vn(fr,e,t,r,n,s),!0;case"mouseover":return pr=Vn(pr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return xs.set(i,Vn(xs.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ws.set(i,Vn(ws.get(i)||null,e,t,r,n,s)),!0}return!1}function Ld(e){var t=Lr(e.target);if(t!==null){var r=Gr(t);if(r!==null){if(t=r.tag,t===13){if(t=jd(r),t!==null){e.blockedOn=t,Rd(e.priority,function(){Dd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=bl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ml=n,r.target.dispatchEvent(n),ml=null}else return t=$s(r),t!==null&&jo(t),e.blockedOn=r,!1;t.shift()}return!0}function Tc(e,t,r){pi(e)&&r.delete(t)}function Vp(){wl=!1,hr!==null&&pi(hr)&&(hr=null),fr!==null&&pi(fr)&&(fr=null),pr!==null&&pi(pr)&&(pr=null),xs.forEach(Tc),ws.forEach(Tc)}function Kn(e,t){e.blockedOn===t&&(e.blockedOn=null,wl||(wl=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,Vp)))}function bs(e){function t(s){return Kn(s,e)}if(0<Js.length){Kn(Js[0],e);for(var r=1;r<Js.length;r++){var n=Js[r];n.blockedOn===e&&(n.blockedOn=null)}}for(hr!==null&&Kn(hr,e),fr!==null&&Kn(fr,e),pr!==null&&Kn(pr,e),xs.forEach(t),ws.forEach(t),r=0;r<lr.length;r++)n=lr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<lr.length&&(r=lr[0],r.blockedOn===null);)Ld(r),r.blockedOn===null&&lr.shift()}var bn=Xt.ReactCurrentBatchConfig,Ti=!0;function Kp(e,t,r,n){var s=te,i=bn.transition;bn.transition=null;try{te=1,No(e,t,r,n)}finally{te=s,bn.transition=i}}function Gp(e,t,r,n){var s=te,i=bn.transition;bn.transition=null;try{te=4,No(e,t,r,n)}finally{te=s,bn.transition=i}}function No(e,t,r,n){if(Ti){var s=bl(e,t,r,n);if(s===null)Ia(e,t,n,Pi,r),zc(e,n);else if(Wp(s,e,t,r,n))n.stopPropagation();else if(zc(e,n),t&4&&-1<Hp.indexOf(e)){for(;s!==null;){var i=$s(s);if(i!==null&&Ad(i),i=bl(e,t,r,n),i===null&&Ia(e,t,n,Pi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ia(e,t,n,null,r)}}var Pi=null;function bl(e,t,r,n){if(Pi=null,e=bo(n),e=Lr(e),e!==null)if(t=Gr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=jd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pi=e,null}function $d(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rp()){case ko:return 1;case Cd:return 4;case Ci:case Lp:return 16;case zd:return 536870912;default:return 16}default:return 16}}var ur=null,So=null,mi=null;function Id(){if(mi)return mi;var e,t=So,r=t.length,n,s="value"in ur?ur.value:ur.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===s[i-n];n++);return mi=s.slice(e,1<n?1-n:void 0)}function gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xs(){return!0}function Pc(){return!1}function at(e){function t(r,n,s,i,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xs:Pc,this.isPropagationStopped=Pc,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),t}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eo=at(Dn),Ls=pe({},Dn,{view:0,detail:0}),Qp=at(Ls),za,Ta,Gn,ra=pe({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Co,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gn&&(Gn&&e.type==="mousemove"?(za=e.screenX-Gn.screenX,Ta=e.screenY-Gn.screenY):Ta=za=0,Gn=e),za)},movementY:function(e){return"movementY"in e?e.movementY:Ta}}),Ac=at(ra),Yp=pe({},ra,{dataTransfer:0}),Jp=at(Yp),Xp=pe({},Ls,{relatedTarget:0}),Pa=at(Xp),Zp=pe({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),em=at(Zp),tm=pe({},Dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rm=at(tm),nm=pe({},Dn,{data:0}),Dc=at(nm),sm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},im={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},am={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=am[e])?!!t[e]:!1}function Co(){return lm}var om=pe({},Ls,{key:function(e){if(e.key){var t=sm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?im[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Co,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cm=at(om),um=pe({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oc=at(um),dm=pe({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Co}),hm=at(dm),fm=pe({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pm=at(fm),mm=pe({},ra,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gm=at(mm),vm=[9,13,27,32],zo=Kt&&"CompositionEvent"in window,as=null;Kt&&"documentMode"in document&&(as=document.documentMode);var ym=Kt&&"TextEvent"in window&&!as,Ud=Kt&&(!zo||as&&8<as&&11>=as),Rc=" ",Lc=!1;function Md(e,t){switch(e){case"keyup":return vm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var on=!1;function xm(e,t){switch(e){case"compositionend":return Fd(t);case"keypress":return t.which!==32?null:(Lc=!0,Rc);case"textInput":return e=t.data,e===Rc&&Lc?null:e;default:return null}}function wm(e,t){if(on)return e==="compositionend"||!zo&&Md(e,t)?(e=Id(),mi=So=ur=null,on=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ud&&t.locale!=="ko"?null:t.data;default:return null}}var bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bm[e.type]:t==="textarea"}function Bd(e,t,r,n){xd(n),t=Ai(t,"onChange"),0<t.length&&(r=new Eo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ls=null,ks=null;function km(e){Zd(e,0)}function na(e){var t=dn(e);if(hd(t))return e}function _m(e,t){if(e==="change")return t}var qd=!1;if(Kt){var Aa;if(Kt){var Da="oninput"in document;if(!Da){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),Da=typeof Ic.oninput=="function"}Aa=Da}else Aa=!1;qd=Aa&&(!document.documentMode||9<document.documentMode)}function Uc(){ls&&(ls.detachEvent("onpropertychange",Hd),ks=ls=null)}function Hd(e){if(e.propertyName==="value"&&na(ks)){var t=[];Bd(t,ks,e,bo(e)),_d(km,t)}}function jm(e,t,r){e==="focusin"?(Uc(),ls=t,ks=r,ls.attachEvent("onpropertychange",Hd)):e==="focusout"&&Uc()}function Nm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return na(ks)}function Sm(e,t){if(e==="click")return na(t)}function Em(e,t){if(e==="input"||e==="change")return na(t)}function Cm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:Cm;function _s(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!nl.call(t,s)||!zt(e[s],t[s]))return!1}return!0}function Mc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fc(e,t){var r=Mc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mc(r)}}function Wd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vd(){for(var e=window,t=Ni();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ni(e.document)}return t}function To(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zm(e){var t=Vd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Wd(r.ownerDocument.documentElement,r)){if(n!==null&&To(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Fc(r,i);var l=Fc(r,n);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Tm=Kt&&"documentMode"in document&&11>=document.documentMode,cn=null,kl=null,os=null,_l=!1;function Bc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_l||cn==null||cn!==Ni(n)||(n=cn,"selectionStart"in n&&To(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),os&&_s(os,n)||(os=n,n=Ai(kl,"onSelect"),0<n.length&&(t=new Eo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=cn)))}function Zs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var un={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},Oa={},Kd={};Kt&&(Kd=document.createElement("div").style,"AnimationEvent"in window||(delete un.animationend.animation,delete un.animationiteration.animation,delete un.animationstart.animation),"TransitionEvent"in window||delete un.transitionend.transition);function sa(e){if(Oa[e])return Oa[e];if(!un[e])return e;var t=un[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Kd)return Oa[e]=t[r];return e}var Gd=sa("animationend"),Qd=sa("animationiteration"),Yd=sa("animationstart"),Jd=sa("transitionend"),Xd=new Map,qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Xd.set(e,t),Kr(t,[e])}for(var Ra=0;Ra<qc.length;Ra++){var La=qc[Ra],Pm=La.toLowerCase(),Am=La[0].toUpperCase()+La.slice(1);jr(Pm,"on"+Am)}jr(Gd,"onAnimationEnd");jr(Qd,"onAnimationIteration");jr(Yd,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(Jd,"onTransitionEnd");jn("onMouseEnter",["mouseout","mouseover"]);jn("onMouseLeave",["mouseout","mouseover"]);jn("onPointerEnter",["pointerout","pointerover"]);jn("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dm=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function Hc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Pp(n,t,void 0,e),e.currentTarget=null}function Zd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&s.isPropagationStopped())break e;Hc(s,o,u),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&s.isPropagationStopped())break e;Hc(s,o,u),i=c}}}if(Ei)throw e=yl,Ei=!1,yl=null,e}function le(e,t){var r=t[Cl];r===void 0&&(r=t[Cl]=new Set);var n=e+"__bubble";r.has(n)||(eh(t,e,2,!1),r.add(n))}function $a(e,t,r){var n=0;t&&(n|=4),eh(r,e,n,t)}var ei="_reactListening"+Math.random().toString(36).slice(2);function js(e){if(!e[ei]){e[ei]=!0,ld.forEach(function(r){r!=="selectionchange"&&(Dm.has(r)||$a(r,!1,e),$a(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ei]||(t[ei]=!0,$a("selectionchange",!1,t))}}function eh(e,t,r,n){switch($d(t)){case 1:var s=Kp;break;case 4:s=Gp;break;default:s=No}r=s.bind(null,t,r,e),s=void 0,!vl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ia(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;o!==null;){if(l=Lr(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}_d(function(){var u=i,d=bo(r),h=[];e:{var p=Xd.get(e);if(p!==void 0){var v=Eo,w=e;switch(e){case"keypress":if(gi(r)===0)break e;case"keydown":case"keyup":v=cm;break;case"focusin":w="focus",v=Pa;break;case"focusout":w="blur",v=Pa;break;case"beforeblur":case"afterblur":v=Pa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Jp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=hm;break;case Gd:case Qd:case Yd:v=em;break;case Jd:v=pm;break;case"scroll":v=Qp;break;case"wheel":v=gm;break;case"copy":case"cut":case"paste":v=rm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Oc}var N=(t&4)!==0,z=!N&&e==="scroll",g=N?p!==null?p+"Capture":null:p;N=[];for(var m=u,f;m!==null;){f=m;var x=f.stateNode;if(f.tag===5&&x!==null&&(f=x,g!==null&&(x=ys(m,g),x!=null&&N.push(Ns(m,x,f)))),z)break;m=m.return}0<N.length&&(p=new v(p,w,null,r,d),h.push({event:p,listeners:N}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",p&&r!==ml&&(w=r.relatedTarget||r.fromElement)&&(Lr(w)||w[Gt]))break e;if((v||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,v?(w=r.relatedTarget||r.toElement,v=u,w=w?Lr(w):null,w!==null&&(z=Gr(w),w!==z||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=u),v!==w)){if(N=Ac,x="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(N=Oc,x="onPointerLeave",g="onPointerEnter",m="pointer"),z=v==null?p:dn(v),f=w==null?p:dn(w),p=new N(x,m+"leave",v,r,d),p.target=z,p.relatedTarget=f,x=null,Lr(d)===u&&(N=new N(g,m+"enter",w,r,d),N.target=f,N.relatedTarget=z,x=N),z=x,v&&w)t:{for(N=v,g=w,m=0,f=N;f;f=Jr(f))m++;for(f=0,x=g;x;x=Jr(x))f++;for(;0<m-f;)N=Jr(N),m--;for(;0<f-m;)g=Jr(g),f--;for(;m--;){if(N===g||g!==null&&N===g.alternate)break t;N=Jr(N),g=Jr(g)}N=null}else N=null;v!==null&&Wc(h,p,v,N,!1),w!==null&&z!==null&&Wc(h,z,w,N,!0)}}e:{if(p=u?dn(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var S=_m;else if($c(p))if(qd)S=Em;else{S=Nm;var y=jm}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Sm);if(S&&(S=S(e,u))){Bd(h,S,r,d);break e}y&&y(e,p,u),e==="focusout"&&(y=p._wrapperState)&&y.controlled&&p.type==="number"&&ul(p,"number",p.value)}switch(y=u?dn(u):window,e){case"focusin":($c(y)||y.contentEditable==="true")&&(cn=y,kl=u,os=null);break;case"focusout":os=kl=cn=null;break;case"mousedown":_l=!0;break;case"contextmenu":case"mouseup":case"dragend":_l=!1,Bc(h,r,d);break;case"selectionchange":if(Tm)break;case"keydown":case"keyup":Bc(h,r,d)}var b;if(zo)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else on?Md(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Ud&&r.locale!=="ko"&&(on||_!=="onCompositionStart"?_==="onCompositionEnd"&&on&&(b=Id()):(ur=d,So="value"in ur?ur.value:ur.textContent,on=!0)),y=Ai(u,_),0<y.length&&(_=new Dc(_,e,null,r,d),h.push({event:_,listeners:y}),b?_.data=b:(b=Fd(r),b!==null&&(_.data=b)))),(b=ym?xm(e,r):wm(e,r))&&(u=Ai(u,"onBeforeInput"),0<u.length&&(d=new Dc("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=b))}Zd(h,t)})}function Ns(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ai(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ys(e,r),i!=null&&n.unshift(Ns(e,i,s)),i=ys(e,t),i!=null&&n.push(Ns(e,i,s))),e=e.return}return n}function Jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wc(e,t,r,n,s){for(var i=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,s?(c=ys(r,i),c!=null&&l.unshift(Ns(r,c,o))):s||(c=ys(r,i),c!=null&&l.push(Ns(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Om=/\r\n?/g,Rm=/\u0000|\uFFFD/g;function Vc(e){return(typeof e=="string"?e:""+e).replace(Om,`
`).replace(Rm,"")}function ti(e,t,r){if(t=Vc(t),Vc(e)!==t&&r)throw Error(P(425))}function Di(){}var jl=null,Nl=null;function Sl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var El=typeof setTimeout=="function"?setTimeout:void 0,Lm=typeof clearTimeout=="function"?clearTimeout:void 0,Kc=typeof Promise=="function"?Promise:void 0,$m=typeof queueMicrotask=="function"?queueMicrotask:typeof Kc<"u"?function(e){return Kc.resolve(null).then(e).catch(Im)}:El;function Im(e){setTimeout(function(){throw e})}function Ua(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),bs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);bs(t)}function mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),Ot="__reactFiber$"+On,Ss="__reactProps$"+On,Gt="__reactContainer$"+On,Cl="__reactEvents$"+On,Um="__reactListeners$"+On,Mm="__reactHandles$"+On;function Lr(e){var t=e[Ot];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Gt]||r[Ot]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Gc(e);e!==null;){if(r=e[Ot])return r;e=Gc(e)}return t}e=r,r=e.parentNode}return null}function $s(e){return e=e[Ot]||e[Gt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function ia(e){return e[Ss]||null}var zl=[],hn=-1;function Nr(e){return{current:e}}function oe(e){0>hn||(e.current=zl[hn],zl[hn]=null,hn--)}function ie(e,t){hn++,zl[hn]=e.current,e.current=t}var _r={},Ie=Nr(_r),Xe=Nr(!1),Fr=_r;function Nn(e,t){var r=e.type.contextTypes;if(!r)return _r;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ze(e){return e=e.childContextTypes,e!=null}function Oi(){oe(Xe),oe(Ie)}function Qc(e,t,r){if(Ie.current!==_r)throw Error(P(168));ie(Ie,t),ie(Xe,r)}function th(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(P(108,jp(e)||"Unknown",s));return pe({},r,n)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,Fr=Ie.current,ie(Ie,e),ie(Xe,Xe.current),!0}function Yc(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=th(e,t,Fr),n.__reactInternalMemoizedMergedChildContext=e,oe(Xe),oe(Ie),ie(Ie,e)):oe(Xe),ie(Xe,r)}var qt=null,aa=!1,Ma=!1;function rh(e){qt===null?qt=[e]:qt.push(e)}function Fm(e){aa=!0,rh(e)}function Sr(){if(!Ma&&qt!==null){Ma=!0;var e=0,t=te;try{var r=qt;for(te=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}qt=null,aa=!1}catch(s){throw qt!==null&&(qt=qt.slice(e+1)),Ed(ko,Sr),s}finally{te=t,Ma=!1}}return null}var fn=[],pn=0,Li=null,$i=0,dt=[],ht=0,Br=null,Ht=1,Wt="";function Ar(e,t){fn[pn++]=$i,fn[pn++]=Li,Li=e,$i=t}function nh(e,t,r){dt[ht++]=Ht,dt[ht++]=Wt,dt[ht++]=Br,Br=e;var n=Ht;e=Wt;var s=32-Et(n)-1;n&=~(1<<s),r+=1;var i=32-Et(t)+s;if(30<i){var l=s-s%5;i=(n&(1<<l)-1).toString(32),n>>=l,s-=l,Ht=1<<32-Et(t)+s|r<<s|n,Wt=i+e}else Ht=1<<i|r<<s|n,Wt=e}function Po(e){e.return!==null&&(Ar(e,1),nh(e,1,0))}function Ao(e){for(;e===Li;)Li=fn[--pn],fn[pn]=null,$i=fn[--pn],fn[pn]=null;for(;e===Br;)Br=dt[--ht],dt[ht]=null,Wt=dt[--ht],dt[ht]=null,Ht=dt[--ht],dt[ht]=null}var nt=null,rt=null,ce=!1,St=null;function sh(e,t){var r=ft(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Jc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nt=e,rt=mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nt=e,rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Br!==null?{id:Ht,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ft(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,nt=e,rt=null,!0):!1;default:return!1}}function Tl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pl(e){if(ce){var t=rt;if(t){var r=t;if(!Jc(e,t)){if(Tl(e))throw Error(P(418));t=mr(r.nextSibling);var n=nt;t&&Jc(e,t)?sh(n,r):(e.flags=e.flags&-4097|2,ce=!1,nt=e)}}else{if(Tl(e))throw Error(P(418));e.flags=e.flags&-4097|2,ce=!1,nt=e}}}function Xc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nt=e}function ri(e){if(e!==nt)return!1;if(!ce)return Xc(e),ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sl(e.type,e.memoizedProps)),t&&(t=rt)){if(Tl(e))throw ih(),Error(P(418));for(;t;)sh(e,t),t=mr(t.nextSibling)}if(Xc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){rt=mr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}rt=null}}else rt=nt?mr(e.stateNode.nextSibling):null;return!0}function ih(){for(var e=rt;e;)e=mr(e.nextSibling)}function Sn(){rt=nt=null,ce=!1}function Do(e){St===null?St=[e]:St.push(e)}var Bm=Xt.ReactCurrentBatchConfig;function Qn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=s.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zc(e){var t=e._init;return t(e._payload)}function ah(e){function t(g,m){if(e){var f=g.deletions;f===null?(g.deletions=[m],g.flags|=16):f.push(m)}}function r(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=xr(g,m),g.index=0,g.sibling=null,g}function i(g,m,f){return g.index=f,e?(f=g.alternate,f!==null?(f=f.index,f<m?(g.flags|=2,m):f):(g.flags|=2,m)):(g.flags|=1048576,m)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,m,f,x){return m===null||m.tag!==6?(m=Ka(f,g.mode,x),m.return=g,m):(m=s(m,f),m.return=g,m)}function c(g,m,f,x){var S=f.type;return S===ln?d(g,m,f.props.children,x,f.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ir&&Zc(S)===m.type)?(x=s(m,f.props),x.ref=Qn(g,m,f),x.return=g,x):(x=_i(f.type,f.key,f.props,null,g.mode,x),x.ref=Qn(g,m,f),x.return=g,x)}function u(g,m,f,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==f.containerInfo||m.stateNode.implementation!==f.implementation?(m=Ga(f,g.mode,x),m.return=g,m):(m=s(m,f.children||[]),m.return=g,m)}function d(g,m,f,x,S){return m===null||m.tag!==7?(m=Mr(f,g.mode,x,S),m.return=g,m):(m=s(m,f),m.return=g,m)}function h(g,m,f){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ka(""+m,g.mode,f),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vs:return f=_i(m.type,m.key,m.props,null,g.mode,f),f.ref=Qn(g,null,m),f.return=g,f;case an:return m=Ga(m,g.mode,f),m.return=g,m;case ir:var x=m._init;return h(g,x(m._payload),f)}if(es(m)||Hn(m))return m=Mr(m,g.mode,f,null),m.return=g,m;ni(g,m)}return null}function p(g,m,f,x){var S=m!==null?m.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return S!==null?null:o(g,m,""+f,x);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Vs:return f.key===S?c(g,m,f,x):null;case an:return f.key===S?u(g,m,f,x):null;case ir:return S=f._init,p(g,m,S(f._payload),x)}if(es(f)||Hn(f))return S!==null?null:d(g,m,f,x,null);ni(g,f)}return null}function v(g,m,f,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(f)||null,o(m,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vs:return g=g.get(x.key===null?f:x.key)||null,c(m,g,x,S);case an:return g=g.get(x.key===null?f:x.key)||null,u(m,g,x,S);case ir:var y=x._init;return v(g,m,f,y(x._payload),S)}if(es(x)||Hn(x))return g=g.get(f)||null,d(m,g,x,S,null);ni(m,x)}return null}function w(g,m,f,x){for(var S=null,y=null,b=m,_=m=0,L=null;b!==null&&_<f.length;_++){b.index>_?(L=b,b=null):L=b.sibling;var R=p(g,b,f[_],x);if(R===null){b===null&&(b=L);break}e&&b&&R.alternate===null&&t(g,b),m=i(R,m,_),y===null?S=R:y.sibling=R,y=R,b=L}if(_===f.length)return r(g,b),ce&&Ar(g,_),S;if(b===null){for(;_<f.length;_++)b=h(g,f[_],x),b!==null&&(m=i(b,m,_),y===null?S=b:y.sibling=b,y=b);return ce&&Ar(g,_),S}for(b=n(g,b);_<f.length;_++)L=v(b,g,_,f[_],x),L!==null&&(e&&L.alternate!==null&&b.delete(L.key===null?_:L.key),m=i(L,m,_),y===null?S=L:y.sibling=L,y=L);return e&&b.forEach(function(re){return t(g,re)}),ce&&Ar(g,_),S}function N(g,m,f,x){var S=Hn(f);if(typeof S!="function")throw Error(P(150));if(f=S.call(f),f==null)throw Error(P(151));for(var y=S=null,b=m,_=m=0,L=null,R=f.next();b!==null&&!R.done;_++,R=f.next()){b.index>_?(L=b,b=null):L=b.sibling;var re=p(g,b,R.value,x);if(re===null){b===null&&(b=L);break}e&&b&&re.alternate===null&&t(g,b),m=i(re,m,_),y===null?S=re:y.sibling=re,y=re,b=L}if(R.done)return r(g,b),ce&&Ar(g,_),S;if(b===null){for(;!R.done;_++,R=f.next())R=h(g,R.value,x),R!==null&&(m=i(R,m,_),y===null?S=R:y.sibling=R,y=R);return ce&&Ar(g,_),S}for(b=n(g,b);!R.done;_++,R=f.next())R=v(b,g,_,R.value,x),R!==null&&(e&&R.alternate!==null&&b.delete(R.key===null?_:R.key),m=i(R,m,_),y===null?S=R:y.sibling=R,y=R);return e&&b.forEach(function(Ke){return t(g,Ke)}),ce&&Ar(g,_),S}function z(g,m,f,x){if(typeof f=="object"&&f!==null&&f.type===ln&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Vs:e:{for(var S=f.key,y=m;y!==null;){if(y.key===S){if(S=f.type,S===ln){if(y.tag===7){r(g,y.sibling),m=s(y,f.props.children),m.return=g,g=m;break e}}else if(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ir&&Zc(S)===y.type){r(g,y.sibling),m=s(y,f.props),m.ref=Qn(g,y,f),m.return=g,g=m;break e}r(g,y);break}else t(g,y);y=y.sibling}f.type===ln?(m=Mr(f.props.children,g.mode,x,f.key),m.return=g,g=m):(x=_i(f.type,f.key,f.props,null,g.mode,x),x.ref=Qn(g,m,f),x.return=g,g=x)}return l(g);case an:e:{for(y=f.key;m!==null;){if(m.key===y)if(m.tag===4&&m.stateNode.containerInfo===f.containerInfo&&m.stateNode.implementation===f.implementation){r(g,m.sibling),m=s(m,f.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else t(g,m);m=m.sibling}m=Ga(f,g.mode,x),m.return=g,g=m}return l(g);case ir:return y=f._init,z(g,m,y(f._payload),x)}if(es(f))return w(g,m,f,x);if(Hn(f))return N(g,m,f,x);ni(g,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,m!==null&&m.tag===6?(r(g,m.sibling),m=s(m,f),m.return=g,g=m):(r(g,m),m=Ka(f,g.mode,x),m.return=g,g=m),l(g)):r(g,m)}return z}var En=ah(!0),lh=ah(!1),Ii=Nr(null),Ui=null,mn=null,Oo=null;function Ro(){Oo=mn=Ui=null}function Lo(e){var t=Ii.current;oe(Ii),e._currentValue=t}function Al(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function kn(e,t){Ui=e,Oo=mn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Je=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(Oo!==e)if(e={context:e,memoizedValue:t,next:null},mn===null){if(Ui===null)throw Error(P(308));mn=e,Ui.dependencies={lanes:0,firstContext:e}}else mn=mn.next=e;return t}var $r=null;function $o(e){$r===null?$r=[e]:$r.push(e)}function oh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,$o(t)):(r.next=s.next,s.next=r),t.interleaved=r,Qt(e,n)}function Qt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ar=!1;function Io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ch(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,X&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Qt(e,r)}return s=n.interleaved,s===null?(t.next=t,$o(n)):(t.next=s.next,s.next=t),n.interleaved=t,Qt(e,r)}function vi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,_o(e,r)}}function eu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Mi(e,t,r,n){var s=e.updateQueue;ar=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==l&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;l=0,d=u=c=null,o=i;do{var p=o.lane,v=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=e,N=o;switch(p=t,v=r,N.tag){case 1:if(w=N.payload,typeof w=="function"){h=w.call(v,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,p=typeof w=="function"?w.call(v,h,p):w,p==null)break e;h=pe({},h,p);break e;case 2:ar=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else v={eventTime:v,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=v,c=h):d=d.next=v,l|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Hr|=l,e.lanes=l,e.memoizedState=h}}function tu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var Is={},Lt=Nr(Is),Es=Nr(Is),Cs=Nr(Is);function Ir(e){if(e===Is)throw Error(P(174));return e}function Uo(e,t){switch(ie(Cs,t),ie(Es,e),ie(Lt,Is),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hl(t,e)}oe(Lt),ie(Lt,t)}function Cn(){oe(Lt),oe(Es),oe(Cs)}function uh(e){Ir(Cs.current);var t=Ir(Lt.current),r=hl(t,e.type);t!==r&&(ie(Es,e),ie(Lt,r))}function Mo(e){Es.current===e&&(oe(Lt),oe(Es))}var he=Nr(0);function Fi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fa=[];function Fo(){for(var e=0;e<Fa.length;e++)Fa[e]._workInProgressVersionPrimary=null;Fa.length=0}var yi=Xt.ReactCurrentDispatcher,Ba=Xt.ReactCurrentBatchConfig,qr=0,fe=null,ke=null,Ee=null,Bi=!1,cs=!1,zs=0,qm=0;function Re(){throw Error(P(321))}function Bo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!zt(e[r],t[r]))return!1;return!0}function qo(e,t,r,n,s,i){if(qr=i,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yi.current=e===null||e.memoizedState===null?Km:Gm,e=r(n,s),cs){i=0;do{if(cs=!1,zs=0,25<=i)throw Error(P(301));i+=1,Ee=ke=null,t.updateQueue=null,yi.current=Qm,e=r(n,s)}while(cs)}if(yi.current=qi,t=ke!==null&&ke.next!==null,qr=0,Ee=ke=fe=null,Bi=!1,t)throw Error(P(300));return e}function Ho(){var e=zs!==0;return zs=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?fe.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function vt(){if(ke===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=Ee===null?fe.memoizedState:Ee.next;if(t!==null)Ee=t,ke=e;else{if(e===null)throw Error(P(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ee===null?fe.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function Ts(e,t){return typeof t=="function"?t(e):t}function qa(e){var t=vt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=ke,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=l=null,c=null,u=i;do{var d=u.lane;if((qr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,fe.lanes|=d,Hr|=d}u=u.next}while(u!==null&&u!==i);c===null?l=n:c.next=o,zt(n,t.memoizedState)||(Je=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,fe.lanes|=i,Hr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ha(e){var t=vt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);zt(i,t.memoizedState)||(Je=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function dh(){}function hh(e,t){var r=fe,n=vt(),s=t(),i=!zt(n.memoizedState,s);if(i&&(n.memoizedState=s,Je=!0),n=n.queue,Wo(mh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ee!==null&&Ee.memoizedState.tag&1){if(r.flags|=2048,Ps(9,ph.bind(null,r,n,s,t),void 0,null),Ce===null)throw Error(P(349));qr&30||fh(r,t,s)}return s}function fh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ph(e,t,r,n){t.value=r,t.getSnapshot=n,gh(t)&&vh(e)}function mh(e,t,r){return r(function(){gh(t)&&vh(e)})}function gh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!zt(e,r)}catch{return!0}}function vh(e){var t=Qt(e,1);t!==null&&Ct(t,e,1,-1)}function ru(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=Vm.bind(null,fe,e),[t.memoizedState,e]}function Ps(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function yh(){return vt().memoizedState}function xi(e,t,r,n){var s=At();fe.flags|=e,s.memoizedState=Ps(1|t,r,void 0,n===void 0?null:n)}function la(e,t,r,n){var s=vt();n=n===void 0?null:n;var i=void 0;if(ke!==null){var l=ke.memoizedState;if(i=l.destroy,n!==null&&Bo(n,l.deps)){s.memoizedState=Ps(t,r,i,n);return}}fe.flags|=e,s.memoizedState=Ps(1|t,r,i,n)}function nu(e,t){return xi(8390656,8,e,t)}function Wo(e,t){return la(2048,8,e,t)}function xh(e,t){return la(4,2,e,t)}function wh(e,t){return la(4,4,e,t)}function bh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kh(e,t,r){return r=r!=null?r.concat([e]):null,la(4,4,bh.bind(null,t,e),r)}function Vo(){}function _h(e,t){var r=vt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Bo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function jh(e,t){var r=vt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Bo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Nh(e,t,r){return qr&21?(zt(r,t)||(r=Td(),fe.lanes|=r,Hr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Je=!0),e.memoizedState=r)}function Hm(e,t){var r=te;te=r!==0&&4>r?r:4,e(!0);var n=Ba.transition;Ba.transition={};try{e(!1),t()}finally{te=r,Ba.transition=n}}function Sh(){return vt().memoizedState}function Wm(e,t,r){var n=yr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Eh(e))Ch(t,r);else if(r=oh(e,t,r,n),r!==null){var s=qe();Ct(r,e,n,s),zh(r,t,n)}}function Vm(e,t,r){var n=yr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Eh(e))Ch(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(s.hasEagerState=!0,s.eagerState=o,zt(o,l)){var c=t.interleaved;c===null?(s.next=s,$o(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=oh(e,t,s,n),r!==null&&(s=qe(),Ct(r,e,n,s),zh(r,t,n))}}function Eh(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function Ch(e,t){cs=Bi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function zh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,_o(e,r)}}var qi={readContext:gt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Km={readContext:gt,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:nu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,xi(4194308,4,bh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return xi(4,2,e,t)},useMemo:function(e,t){var r=At();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=At();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Wm.bind(null,fe,e),[n.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:ru,useDebugValue:Vo,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=ru(!1),t=e[0];return e=Hm.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=fe,s=At();if(ce){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),Ce===null)throw Error(P(349));qr&30||fh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,nu(mh.bind(null,n,i,e),[e]),n.flags|=2048,Ps(9,ph.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=At(),t=Ce.identifierPrefix;if(ce){var r=Wt,n=Ht;r=(n&~(1<<32-Et(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=zs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=qm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Gm={readContext:gt,useCallback:_h,useContext:gt,useEffect:Wo,useImperativeHandle:kh,useInsertionEffect:xh,useLayoutEffect:wh,useMemo:jh,useReducer:qa,useRef:yh,useState:function(){return qa(Ts)},useDebugValue:Vo,useDeferredValue:function(e){var t=vt();return Nh(t,ke.memoizedState,e)},useTransition:function(){var e=qa(Ts)[0],t=vt().memoizedState;return[e,t]},useMutableSource:dh,useSyncExternalStore:hh,useId:Sh,unstable_isNewReconciler:!1},Qm={readContext:gt,useCallback:_h,useContext:gt,useEffect:Wo,useImperativeHandle:kh,useInsertionEffect:xh,useLayoutEffect:wh,useMemo:jh,useReducer:Ha,useRef:yh,useState:function(){return Ha(Ts)},useDebugValue:Vo,useDeferredValue:function(e){var t=vt();return ke===null?t.memoizedState=e:Nh(t,ke.memoizedState,e)},useTransition:function(){var e=Ha(Ts)[0],t=vt().memoizedState;return[e,t]},useMutableSource:dh,useSyncExternalStore:hh,useId:Sh,unstable_isNewReconciler:!1};function _t(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Dl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var oa={isMounted:function(e){return(e=e._reactInternals)?Gr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=qe(),s=yr(e),i=Vt(n,s);i.payload=t,r!=null&&(i.callback=r),t=gr(e,i,s),t!==null&&(Ct(t,e,s,n),vi(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=qe(),s=yr(e),i=Vt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=gr(e,i,s),t!==null&&(Ct(t,e,s,n),vi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=qe(),n=yr(e),s=Vt(r,n);s.tag=2,t!=null&&(s.callback=t),t=gr(e,s,n),t!==null&&(Ct(t,e,n,r),vi(t,e,n))}};function su(e,t,r,n,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!_s(r,n)||!_s(s,i):!0}function Th(e,t,r){var n=!1,s=_r,i=t.contextType;return typeof i=="object"&&i!==null?i=gt(i):(s=Ze(t)?Fr:Ie.current,n=t.contextTypes,i=(n=n!=null)?Nn(e,s):_r),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oa,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function iu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&oa.enqueueReplaceState(t,t.state,null)}function Ol(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Io(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=gt(i):(i=Ze(t)?Fr:Ie.current,s.context=Nn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Dl(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&oa.enqueueReplaceState(s,s.state,null),Mi(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function zn(e,t){try{var r="",n=t;do r+=_p(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Wa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Rl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ym=typeof WeakMap=="function"?WeakMap:Map;function Ph(e,t,r){r=Vt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wi||(Wi=!0,Wl=n),Rl(e,t)},r}function Ah(e,t,r){r=Vt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Rl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Rl(e,t),typeof n!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function au(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Ym;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=u0.bind(null,e,t,r),t.then(e,e))}function lu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ou(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Vt(-1,1),t.tag=2,gr(r,t,1))),r.lanes|=1),e)}var Jm=Xt.ReactCurrentOwner,Je=!1;function Be(e,t,r,n){t.child=e===null?lh(t,null,r,n):En(t,e.child,r,n)}function cu(e,t,r,n,s){r=r.render;var i=t.ref;return kn(t,s),n=qo(e,t,r,n,i,s),r=Ho(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yt(e,t,s)):(ce&&r&&Po(t),t.flags|=1,Be(e,t,n,s),t.child)}function uu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!ec(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Dh(e,t,i,n,s)):(e=_i(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:_s,r(l,n)&&e.ref===t.ref)return Yt(e,t,s)}return t.flags|=1,e=xr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Dh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(_s(i,n)&&e.ref===t.ref)if(Je=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Je=!0);else return t.lanes=e.lanes,Yt(e,t,s)}return Ll(e,t,r,n,s)}function Oh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(vn,tt),tt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(vn,tt),tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ie(vn,tt),tt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ie(vn,tt),tt|=n;return Be(e,t,s,r),t.child}function Rh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ll(e,t,r,n,s){var i=Ze(r)?Fr:Ie.current;return i=Nn(t,i),kn(t,s),r=qo(e,t,r,n,i,s),n=Ho(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yt(e,t,s)):(ce&&n&&Po(t),t.flags|=1,Be(e,t,r,s),t.child)}function du(e,t,r,n,s){if(Ze(r)){var i=!0;Ri(t)}else i=!1;if(kn(t,s),t.stateNode===null)wi(e,t),Th(t,r,n),Ol(t,r,n,s),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=gt(u):(u=Ze(r)?Fr:Ie.current,u=Nn(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==u)&&iu(t,l,n,u),ar=!1;var p=t.memoizedState;l.state=p,Mi(t,n,l,s),c=t.memoizedState,o!==n||p!==c||Xe.current||ar?(typeof d=="function"&&(Dl(t,r,d,n),c=t.memoizedState),(o=ar||su(t,r,o,n,p,c,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=u,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,ch(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:_t(t.type,o),l.props=u,h=t.pendingProps,p=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=gt(c):(c=Ze(r)?Fr:Ie.current,c=Nn(t,c));var v=r.getDerivedStateFromProps;(d=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||p!==c)&&iu(t,l,n,c),ar=!1,p=t.memoizedState,l.state=p,Mi(t,n,l,s);var w=t.memoizedState;o!==h||p!==w||Xe.current||ar?(typeof v=="function"&&(Dl(t,r,v,n),w=t.memoizedState),(u=ar||su(t,r,u,n,p,w,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,w,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,w,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),l.props=n,l.state=w,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return $l(e,t,r,n,i,s)}function $l(e,t,r,n,s,i){Rh(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return s&&Yc(t,r,!1),Yt(e,t,i);n=t.stateNode,Jm.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=En(t,e.child,null,i),t.child=En(t,null,o,i)):Be(e,t,o,i),t.memoizedState=n.state,s&&Yc(t,r,!0),t.child}function Lh(e){var t=e.stateNode;t.pendingContext?Qc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qc(e,t.context,!1),Uo(e,t.containerInfo)}function hu(e,t,r,n,s){return Sn(),Do(s),t.flags|=256,Be(e,t,r,n),t.child}var Il={dehydrated:null,treeContext:null,retryLane:0};function Ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function $h(e,t,r){var n=t.pendingProps,s=he.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ie(he,s&1),e===null)return Pl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=da(l,n,0,null),e=Mr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ul(r),t.memoizedState=Il,e):Ko(t,l));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return Xm(e,t,l,n,o,s,r);if(i){i=n.fallback,l=t.mode,s=e.child,o=s.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=xr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=xr(o,i):(i=Mr(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?Ul(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Il,n}return i=e.child,e=i.sibling,n=xr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ko(e,t){return t=da({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function si(e,t,r,n){return n!==null&&Do(n),En(t,e.child,null,r),e=Ko(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xm(e,t,r,n,s,i,l){if(r)return t.flags&256?(t.flags&=-257,n=Wa(Error(P(422))),si(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=da({mode:"visible",children:n.children},s,0,null),i=Mr(i,s,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&En(t,e.child,null,l),t.child.memoizedState=Ul(l),t.memoizedState=Il,i);if(!(t.mode&1))return si(e,t,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(P(419)),n=Wa(i,n,void 0),si(e,t,l,n)}if(o=(l&e.childLanes)!==0,Je||o){if(n=Ce,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qt(e,s),Ct(n,e,s,-1))}return Zo(),n=Wa(Error(P(421))),si(e,t,l,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=d0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,rt=mr(s.nextSibling),nt=t,ce=!0,St=null,e!==null&&(dt[ht++]=Ht,dt[ht++]=Wt,dt[ht++]=Br,Ht=e.id,Wt=e.overflow,Br=t),t=Ko(t,n.children),t.flags|=4096,t)}function fu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Al(e.return,t,r)}function Va(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Ih(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Be(e,t,n.children,r),n=he.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fu(e,r,t);else if(e.tag===19)fu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ie(he,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Fi(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Va(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Fi(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Va(t,!0,r,null,i);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Hr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=xr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=xr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Zm(e,t,r){switch(t.tag){case 3:Lh(t),Sn();break;case 5:uh(t);break;case 1:Ze(t.type)&&Ri(t);break;case 4:Uo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ie(Ii,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ie(he,he.current&1),t.flags|=128,null):r&t.child.childLanes?$h(e,t,r):(ie(he,he.current&1),e=Yt(e,t,r),e!==null?e.sibling:null);ie(he,he.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Ih(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(he,he.current),n)break;return null;case 22:case 23:return t.lanes=0,Oh(e,t,r)}return Yt(e,t,r)}var Uh,Ml,Mh,Fh;Uh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ml=function(){};Mh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ir(Lt.current);var i=null;switch(r){case"input":s=ol(e,s),n=ol(e,n),i=[];break;case"select":s=pe({},s,{value:void 0}),n=pe({},n,{value:void 0}),i=[];break;case"textarea":s=dl(e,s),n=dl(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Di)}fl(r,n);var l;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&le("scroll",e),i||o===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Fh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Yn(e,t){if(!ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function e0(e,t,r){var n=t.pendingProps;switch(Ao(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return Ze(t.type)&&Oi(),Le(t),null;case 3:return n=t.stateNode,Cn(),oe(Xe),oe(Ie),Fo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,St!==null&&(Gl(St),St=null))),Ml(e,t),Le(t),null;case 5:Mo(t);var s=Ir(Cs.current);if(r=t.type,e!==null&&t.stateNode!=null)Mh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return Le(t),null}if(e=Ir(Lt.current),ri(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ot]=t,n[Ss]=i,e=(t.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(s=0;s<rs.length;s++)le(rs[s],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":kc(n,i),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},le("invalid",n);break;case"textarea":jc(n,i),le("invalid",n)}fl(r,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&ti(n.textContent,o,e),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ti(n.textContent,o,e),s=["children",""+o]):gs.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&le("scroll",n)}switch(r){case"input":Ks(n),_c(n,i,!0);break;case"textarea":Ks(n),Nc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Di)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=md(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Ot]=t,e[Ss]=n,Uh(e,t,!1,!1),t.stateNode=e;e:{switch(l=pl(r,n),r){case"dialog":le("cancel",e),le("close",e),s=n;break;case"iframe":case"object":case"embed":le("load",e),s=n;break;case"video":case"audio":for(s=0;s<rs.length;s++)le(rs[s],e);s=n;break;case"source":le("error",e),s=n;break;case"img":case"image":case"link":le("error",e),le("load",e),s=n;break;case"details":le("toggle",e),s=n;break;case"input":kc(e,n),s=ol(e,n),le("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=pe({},n,{value:void 0}),le("invalid",e);break;case"textarea":jc(e,n),s=dl(e,n),le("invalid",e);break;default:s=n}fl(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?yd(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gd(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&vs(e,c):typeof c=="number"&&vs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&le("scroll",e):c!=null&&vo(e,i,c,l))}switch(r){case"input":Ks(e),_c(e,n,!1);break;case"textarea":Ks(e),Nc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+kr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?yn(e,!!n.multiple,i,!1):n.defaultValue!=null&&yn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Di)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Le(t),null;case 6:if(e&&t.stateNode!=null)Fh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=Ir(Cs.current),Ir(Lt.current),ri(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ot]=t,(i=n.nodeValue!==r)&&(e=nt,e!==null))switch(e.tag){case 3:ti(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ti(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ot]=t,t.stateNode=n}return Le(t),null;case 13:if(oe(he),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ce&&rt!==null&&t.mode&1&&!(t.flags&128))ih(),Sn(),t.flags|=98560,i=!1;else if(i=ri(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[Ot]=t}else Sn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Le(t),i=!1}else St!==null&&(Gl(St),St=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||he.current&1?Ne===0&&(Ne=3):Zo())),t.updateQueue!==null&&(t.flags|=4),Le(t),null);case 4:return Cn(),Ml(e,t),e===null&&js(t.stateNode.containerInfo),Le(t),null;case 10:return Lo(t.type._context),Le(t),null;case 17:return Ze(t.type)&&Oi(),Le(t),null;case 19:if(oe(he),i=t.memoizedState,i===null)return Le(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Yn(i,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Fi(e),l!==null){for(t.flags|=128,Yn(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ie(he,he.current&1|2),t.child}e=e.sibling}i.tail!==null&&ve()>Tn&&(t.flags|=128,n=!0,Yn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Fi(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ce)return Le(t),null}else 2*ve()-i.renderingStartTime>Tn&&r!==1073741824&&(t.flags|=128,n=!0,Yn(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ve(),t.sibling=null,r=he.current,ie(he,n?r&1|2:r&1),t):(Le(t),null);case 22:case 23:return Xo(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?tt&1073741824&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function t0(e,t){switch(Ao(t),t.tag){case 1:return Ze(t.type)&&Oi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(),oe(Xe),oe(Ie),Fo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Mo(t),null;case 13:if(oe(he),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Sn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(he),null;case 4:return Cn(),null;case 10:return Lo(t.type._context),null;case 22:case 23:return Xo(),null;case 24:return null;default:return null}}var ii=!1,$e=!1,r0=typeof WeakSet=="function"?WeakSet:Set,$=null;function gn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ge(e,t,n)}else r.current=null}function Fl(e,t,r){try{r()}catch(n){ge(e,t,n)}}var pu=!1;function n0(e,t){if(jl=Ti,e=Vd(),To(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var v;h!==r||s!==0&&h.nodeType!==3||(o=l+s),h!==i||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(v=h.firstChild)!==null;)p=h,h=v;for(;;){if(h===e)break t;if(p===r&&++u===s&&(o=l),p===i&&++d===n&&(c=l),(v=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=v}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nl={focusedElem:e,selectionRange:r},Ti=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,z=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?N:_t(t.type,N),z);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(x){ge(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return w=pu,pu=!1,w}function us(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fl(t,r,i)}s=s.next}while(s!==n)}}function ca(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Bl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Bh(e){var t=e.alternate;t!==null&&(e.alternate=null,Bh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[Ss],delete t[Cl],delete t[Um],delete t[Mm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qh(e){return e.tag===5||e.tag===3||e.tag===4}function mu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ql(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Di));else if(n!==4&&(e=e.child,e!==null))for(ql(e,t,r),e=e.sibling;e!==null;)ql(e,t,r),e=e.sibling}function Hl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Hl(e,t,r),e=e.sibling;e!==null;)Hl(e,t,r),e=e.sibling}var Te=null,jt=!1;function rr(e,t,r){for(r=r.child;r!==null;)Hh(e,t,r),r=r.sibling}function Hh(e,t,r){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(ta,r)}catch{}switch(r.tag){case 5:$e||gn(r,t);case 6:var n=Te,s=jt;Te=null,rr(e,t,r),Te=n,jt=s,Te!==null&&(jt?(e=Te,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Te.removeChild(r.stateNode));break;case 18:Te!==null&&(jt?(e=Te,r=r.stateNode,e.nodeType===8?Ua(e.parentNode,r):e.nodeType===1&&Ua(e,r),bs(e)):Ua(Te,r.stateNode));break;case 4:n=Te,s=jt,Te=r.stateNode.containerInfo,jt=!0,rr(e,t,r),Te=n,jt=s;break;case 0:case 11:case 14:case 15:if(!$e&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Fl(r,t,l),s=s.next}while(s!==n)}rr(e,t,r);break;case 1:if(!$e&&(gn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ge(r,t,o)}rr(e,t,r);break;case 21:rr(e,t,r);break;case 22:r.mode&1?($e=(n=$e)||r.memoizedState!==null,rr(e,t,r),$e=n):rr(e,t,r);break;default:rr(e,t,r)}}function gu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new r0),t.forEach(function(n){var s=h0.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function bt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Te=o.stateNode,jt=!1;break e;case 3:Te=o.stateNode.containerInfo,jt=!0;break e;case 4:Te=o.stateNode.containerInfo,jt=!0;break e}o=o.return}if(Te===null)throw Error(P(160));Hh(i,l,s),Te=null,jt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ge(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wh(t,e),t=t.sibling}function Wh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),Pt(e),n&4){try{us(3,e,e.return),ca(3,e)}catch(N){ge(e,e.return,N)}try{us(5,e,e.return)}catch(N){ge(e,e.return,N)}}break;case 1:bt(t,e),Pt(e),n&512&&r!==null&&gn(r,r.return);break;case 5:if(bt(t,e),Pt(e),n&512&&r!==null&&gn(r,r.return),e.flags&32){var s=e.stateNode;try{vs(s,"")}catch(N){ge(e,e.return,N)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&fd(s,i),pl(o,l);var u=pl(o,i);for(l=0;l<c.length;l+=2){var d=c[l],h=c[l+1];d==="style"?yd(s,h):d==="dangerouslySetInnerHTML"?gd(s,h):d==="children"?vs(s,h):vo(s,d,h,u)}switch(o){case"input":cl(s,i);break;case"textarea":pd(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?yn(s,!!i.multiple,v,!1):p!==!!i.multiple&&(i.defaultValue!=null?yn(s,!!i.multiple,i.defaultValue,!0):yn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ss]=i}catch(N){ge(e,e.return,N)}}break;case 6:if(bt(t,e),Pt(e),n&4){if(e.stateNode===null)throw Error(P(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){ge(e,e.return,N)}}break;case 3:if(bt(t,e),Pt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{bs(t.containerInfo)}catch(N){ge(e,e.return,N)}break;case 4:bt(t,e),Pt(e);break;case 13:bt(t,e),Pt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Yo=ve())),n&4&&gu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?($e=(u=$e)||d,bt(t,e),$e=u):bt(t,e),Pt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for($=e,d=e.child;d!==null;){for(h=$=d;$!==null;){switch(p=$,v=p.child,p.tag){case 0:case 11:case 14:case 15:us(4,p,p.return);break;case 1:gn(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){ge(n,r,N)}}break;case 5:gn(p,p.return);break;case 22:if(p.memoizedState!==null){yu(h);continue}}v!==null?(v.return=p,$=v):yu(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=vd("display",l))}catch(N){ge(e,e.return,N)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(N){ge(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bt(t,e),Pt(e),n&4&&gu(e);break;case 21:break;default:bt(t,e),Pt(e)}}function Pt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qh(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(vs(s,""),n.flags&=-33);var i=mu(e);Hl(e,i,s);break;case 3:case 4:var l=n.stateNode.containerInfo,o=mu(e);ql(e,o,l);break;default:throw Error(P(161))}}catch(c){ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function s0(e,t,r){$=e,Vh(e)}function Vh(e,t,r){for(var n=(e.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||ii;if(!l){var o=s.alternate,c=o!==null&&o.memoizedState!==null||$e;o=ii;var u=$e;if(ii=l,($e=c)&&!u)for($=s;$!==null;)l=$,c=l.child,l.tag===22&&l.memoizedState!==null?xu(s):c!==null?(c.return=l,$=c):xu(s);for(;i!==null;)$=i,Vh(i),i=i.sibling;$=s,ii=o,$e=u}vu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):vu(e)}}function vu(e){for(;$!==null;){var t=$;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$e||ca(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!$e)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:_t(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&tu(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}tu(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&bs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}$e||t.flags&512&&Bl(t)}catch(p){ge(t,t.return,p)}}if(t===e){$=null;break}if(r=t.sibling,r!==null){r.return=t.return,$=r;break}$=t.return}}function yu(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$=r;break}$=t.return}}function xu(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ca(4,t)}catch(c){ge(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ge(t,s,c)}}var i=t.return;try{Bl(t)}catch(c){ge(t,i,c)}break;case 5:var l=t.return;try{Bl(t)}catch(c){ge(t,l,c)}}}catch(c){ge(t,t.return,c)}if(t===e){$=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$=o;break}$=t.return}}var i0=Math.ceil,Hi=Xt.ReactCurrentDispatcher,Go=Xt.ReactCurrentOwner,pt=Xt.ReactCurrentBatchConfig,X=0,Ce=null,ye=null,Ae=0,tt=0,vn=Nr(0),Ne=0,As=null,Hr=0,ua=0,Qo=0,ds=null,Qe=null,Yo=0,Tn=1/0,Ft=null,Wi=!1,Wl=null,vr=null,ai=!1,dr=null,Vi=0,hs=0,Vl=null,bi=-1,ki=0;function qe(){return X&6?ve():bi!==-1?bi:bi=ve()}function yr(e){return e.mode&1?X&2&&Ae!==0?Ae&-Ae:Bm.transition!==null?(ki===0&&(ki=Td()),ki):(e=te,e!==0||(e=window.event,e=e===void 0?16:$d(e.type)),e):1}function Ct(e,t,r,n){if(50<hs)throw hs=0,Vl=null,Error(P(185));Rs(e,r,n),(!(X&2)||e!==Ce)&&(e===Ce&&(!(X&2)&&(ua|=r),Ne===4&&or(e,Ae)),et(e,n),r===1&&X===0&&!(t.mode&1)&&(Tn=ve()+500,aa&&Sr()))}function et(e,t){var r=e.callbackNode;Bp(e,t);var n=zi(e,e===Ce?Ae:0);if(n===0)r!==null&&Cc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Cc(r),t===1)e.tag===0?Fm(wu.bind(null,e)):rh(wu.bind(null,e)),$m(function(){!(X&6)&&Sr()}),r=null;else{switch(Pd(n)){case 1:r=ko;break;case 4:r=Cd;break;case 16:r=Ci;break;case 536870912:r=zd;break;default:r=Ci}r=ef(r,Kh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Kh(e,t){if(bi=-1,ki=0,X&6)throw Error(P(327));var r=e.callbackNode;if(_n()&&e.callbackNode!==r)return null;var n=zi(e,e===Ce?Ae:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ki(e,n);else{t=n;var s=X;X|=2;var i=Qh();(Ce!==e||Ae!==t)&&(Ft=null,Tn=ve()+500,Ur(e,t));do try{o0();break}catch(o){Gh(e,o)}while(!0);Ro(),Hi.current=i,X=s,ye!==null?t=0:(Ce=null,Ae=0,t=Ne)}if(t!==0){if(t===2&&(s=xl(e),s!==0&&(n=s,t=Kl(e,s))),t===1)throw r=As,Ur(e,0),or(e,n),et(e,ve()),r;if(t===6)or(e,n);else{if(s=e.current.alternate,!(n&30)&&!a0(s)&&(t=Ki(e,n),t===2&&(i=xl(e),i!==0&&(n=i,t=Kl(e,i))),t===1))throw r=As,Ur(e,0),or(e,n),et(e,ve()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:Dr(e,Qe,Ft);break;case 3:if(or(e,n),(n&130023424)===n&&(t=Yo+500-ve(),10<t)){if(zi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){qe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=El(Dr.bind(null,e,Qe,Ft),t);break}Dr(e,Qe,Ft);break;case 4:if(or(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-Et(n);i=1<<l,l=t[l],l>s&&(s=l),n&=~i}if(n=s,n=ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*i0(n/1960))-n,10<n){e.timeoutHandle=El(Dr.bind(null,e,Qe,Ft),n);break}Dr(e,Qe,Ft);break;case 5:Dr(e,Qe,Ft);break;default:throw Error(P(329))}}}return et(e,ve()),e.callbackNode===r?Kh.bind(null,e):null}function Kl(e,t){var r=ds;return e.current.memoizedState.isDehydrated&&(Ur(e,t).flags|=256),e=Ki(e,t),e!==2&&(t=Qe,Qe=r,t!==null&&Gl(t)),e}function Gl(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function a0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!zt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function or(e,t){for(t&=~Qo,t&=~ua,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Et(t),n=1<<r;e[r]=-1,t&=~n}}function wu(e){if(X&6)throw Error(P(327));_n();var t=zi(e,0);if(!(t&1))return et(e,ve()),null;var r=Ki(e,t);if(e.tag!==0&&r===2){var n=xl(e);n!==0&&(t=n,r=Kl(e,n))}if(r===1)throw r=As,Ur(e,0),or(e,t),et(e,ve()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dr(e,Qe,Ft),et(e,ve()),null}function Jo(e,t){var r=X;X|=1;try{return e(t)}finally{X=r,X===0&&(Tn=ve()+500,aa&&Sr())}}function Wr(e){dr!==null&&dr.tag===0&&!(X&6)&&_n();var t=X;X|=1;var r=pt.transition,n=te;try{if(pt.transition=null,te=1,e)return e()}finally{te=n,pt.transition=r,X=t,!(X&6)&&Sr()}}function Xo(){tt=vn.current,oe(vn)}function Ur(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Lm(r)),ye!==null)for(r=ye.return;r!==null;){var n=r;switch(Ao(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Oi();break;case 3:Cn(),oe(Xe),oe(Ie),Fo();break;case 5:Mo(n);break;case 4:Cn();break;case 13:oe(he);break;case 19:oe(he);break;case 10:Lo(n.type._context);break;case 22:case 23:Xo()}r=r.return}if(Ce=e,ye=e=xr(e.current,null),Ae=tt=t,Ne=0,As=null,Qo=ua=Hr=0,Qe=ds=null,$r!==null){for(t=0;t<$r.length;t++)if(r=$r[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=s,n.next=l}r.pending=n}$r=null}return e}function Gh(e,t){do{var r=ye;try{if(Ro(),yi.current=qi,Bi){for(var n=fe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Bi=!1}if(qr=0,Ee=ke=fe=null,cs=!1,zs=0,Go.current=null,r===null||r.return===null){Ne=1,As=t,ye=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Ae,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=lu(l);if(v!==null){v.flags&=-257,ou(v,l,o,i,t),v.mode&1&&au(i,u,t),t=v,c=u;var w=t.updateQueue;if(w===null){var N=new Set;N.add(c),t.updateQueue=N}else w.add(c);break e}else{if(!(t&1)){au(i,u,t),Zo();break e}c=Error(P(426))}}else if(ce&&o.mode&1){var z=lu(l);if(z!==null){!(z.flags&65536)&&(z.flags|=256),ou(z,l,o,i,t),Do(zn(c,o));break e}}i=c=zn(c,o),Ne!==4&&(Ne=2),ds===null?ds=[i]:ds.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Ph(i,c,t);eu(i,g);break e;case 1:o=c;var m=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(vr===null||!vr.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=Ah(i,o,t);eu(i,x);break e}}i=i.return}while(i!==null)}Jh(r)}catch(S){t=S,ye===r&&r!==null&&(ye=r=r.return);continue}break}while(!0)}function Qh(){var e=Hi.current;return Hi.current=qi,e===null?qi:e}function Zo(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Ce===null||!(Hr&268435455)&&!(ua&268435455)||or(Ce,Ae)}function Ki(e,t){var r=X;X|=2;var n=Qh();(Ce!==e||Ae!==t)&&(Ft=null,Ur(e,t));do try{l0();break}catch(s){Gh(e,s)}while(!0);if(Ro(),X=r,Hi.current=n,ye!==null)throw Error(P(261));return Ce=null,Ae=0,Ne}function l0(){for(;ye!==null;)Yh(ye)}function o0(){for(;ye!==null&&!Dp();)Yh(ye)}function Yh(e){var t=Zh(e.alternate,e,tt);e.memoizedProps=e.pendingProps,t===null?Jh(e):ye=t,Go.current=null}function Jh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=t0(r,t),r!==null){r.flags&=32767,ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,ye=null;return}}else if(r=e0(r,t,tt),r!==null){ye=r;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=e}while(t!==null);Ne===0&&(Ne=5)}function Dr(e,t,r){var n=te,s=pt.transition;try{pt.transition=null,te=1,c0(e,t,r,n)}finally{pt.transition=s,te=n}return null}function c0(e,t,r,n){do _n();while(dr!==null);if(X&6)throw Error(P(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(qp(e,i),e===Ce&&(ye=Ce=null,Ae=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ai||(ai=!0,ef(Ci,function(){return _n(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=pt.transition,pt.transition=null;var l=te;te=1;var o=X;X|=4,Go.current=null,n0(e,r),Wh(r,e),zm(Nl),Ti=!!jl,Nl=jl=null,e.current=r,s0(r),Op(),X=o,te=l,pt.transition=i}else e.current=r;if(ai&&(ai=!1,dr=e,Vi=s),i=e.pendingLanes,i===0&&(vr=null),$p(r.stateNode),et(e,ve()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Wi)throw Wi=!1,e=Wl,Wl=null,e;return Vi&1&&e.tag!==0&&_n(),i=e.pendingLanes,i&1?e===Vl?hs++:(hs=0,Vl=e):hs=0,Sr(),null}function _n(){if(dr!==null){var e=Pd(Vi),t=pt.transition,r=te;try{if(pt.transition=null,te=16>e?16:e,dr===null)var n=!1;else{if(e=dr,dr=null,Vi=0,X&6)throw Error(P(331));var s=X;for(X|=4,$=e.current;$!==null;){var i=$,l=i.child;if($.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:us(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var p=d.sibling,v=d.return;if(Bh(d),d===u){$=null;break}if(p!==null){p.return=v,$=p;break}$=v}}}var w=i.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var z=N.sibling;N.sibling=null,N=z}while(N!==null)}}$=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,$=l;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:us(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,$=g;break e}$=i.return}}var m=e.current;for($=m;$!==null;){l=$;var f=l.child;if(l.subtreeFlags&2064&&f!==null)f.return=l,$=f;else e:for(l=m;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ca(9,o)}}catch(S){ge(o,o.return,S)}if(o===l){$=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,$=x;break e}$=o.return}}if(X=s,Sr(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(ta,e)}catch{}n=!0}return n}finally{te=r,pt.transition=t}}return!1}function bu(e,t,r){t=zn(r,t),t=Ph(e,t,1),e=gr(e,t,1),t=qe(),e!==null&&(Rs(e,1,t),et(e,t))}function ge(e,t,r){if(e.tag===3)bu(e,e,r);else for(;t!==null;){if(t.tag===3){bu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(vr===null||!vr.has(n))){e=zn(r,e),e=Ah(t,e,1),t=gr(t,e,1),e=qe(),t!==null&&(Rs(t,1,e),et(t,e));break}}t=t.return}}function u0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&r,Ce===e&&(Ae&r)===r&&(Ne===4||Ne===3&&(Ae&130023424)===Ae&&500>ve()-Yo?Ur(e,0):Qo|=r),et(e,t)}function Xh(e,t){t===0&&(e.mode&1?(t=Ys,Ys<<=1,!(Ys&130023424)&&(Ys=4194304)):t=1);var r=qe();e=Qt(e,t),e!==null&&(Rs(e,t,r),et(e,r))}function d0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Xh(e,r)}function h0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),Xh(e,r)}var Zh;Zh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Je=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Je=!1,Zm(e,t,r);Je=!!(e.flags&131072)}else Je=!1,ce&&t.flags&1048576&&nh(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;wi(e,t),e=t.pendingProps;var s=Nn(t,Ie.current);kn(t,r),s=qo(null,t,n,e,s,r);var i=Ho();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ze(n)?(i=!0,Ri(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Io(t),s.updater=oa,t.stateNode=s,s._reactInternals=t,Ol(t,n,e,r),t=$l(null,t,n,!0,i,r)):(t.tag=0,ce&&i&&Po(t),Be(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(wi(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=p0(n),e=_t(n,e),s){case 0:t=Ll(null,t,n,e,r);break e;case 1:t=du(null,t,n,e,r);break e;case 11:t=cu(null,t,n,e,r);break e;case 14:t=uu(null,t,n,_t(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),Ll(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),du(e,t,n,s,r);case 3:e:{if(Lh(t),e===null)throw Error(P(387));n=t.pendingProps,i=t.memoizedState,s=i.element,ch(e,t),Mi(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=zn(Error(P(423)),t),t=hu(e,t,n,r,s);break e}else if(n!==s){s=zn(Error(P(424)),t),t=hu(e,t,n,r,s);break e}else for(rt=mr(t.stateNode.containerInfo.firstChild),nt=t,ce=!0,St=null,r=lh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Sn(),n===s){t=Yt(e,t,r);break e}Be(e,t,n,r)}t=t.child}return t;case 5:return uh(t),e===null&&Pl(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,Sl(n,s)?l=null:i!==null&&Sl(n,i)&&(t.flags|=32),Rh(e,t),Be(e,t,l,r),t.child;case 6:return e===null&&Pl(t),null;case 13:return $h(e,t,r);case 4:return Uo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=En(t,null,n,r):Be(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),cu(e,t,n,s,r);case 7:return Be(e,t,t.pendingProps,r),t.child;case 8:return Be(e,t,t.pendingProps.children,r),t.child;case 12:return Be(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,ie(Ii,n._currentValue),n._currentValue=l,i!==null)if(zt(i.value,l)){if(i.children===s.children&&!Xe.current){t=Yt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Vt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Al(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(P(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Al(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Be(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,kn(t,r),s=gt(s),n=n(s),t.flags|=1,Be(e,t,n,r),t.child;case 14:return n=t.type,s=_t(n,t.pendingProps),s=_t(n.type,s),uu(e,t,n,s,r);case 15:return Dh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),wi(e,t),t.tag=1,Ze(n)?(e=!0,Ri(t)):e=!1,kn(t,r),Th(t,n,s),Ol(t,n,s,r),$l(null,t,n,!0,e,r);case 19:return Ih(e,t,r);case 22:return Oh(e,t,r)}throw Error(P(156,t.tag))};function ef(e,t){return Ed(e,t)}function f0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,r,n){return new f0(e,t,r,n)}function ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function p0(e){if(typeof e=="function")return ec(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xo)return 11;if(e===wo)return 14}return 2}function xr(e,t){var r=e.alternate;return r===null?(r=ft(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function _i(e,t,r,n,s,i){var l=2;if(n=e,typeof e=="function")ec(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case ln:return Mr(r.children,s,i,t);case yo:l=8,s|=8;break;case sl:return e=ft(12,r,t,s|2),e.elementType=sl,e.lanes=i,e;case il:return e=ft(13,r,t,s),e.elementType=il,e.lanes=i,e;case al:return e=ft(19,r,t,s),e.elementType=al,e.lanes=i,e;case ud:return da(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case od:l=10;break e;case cd:l=9;break e;case xo:l=11;break e;case wo:l=14;break e;case ir:l=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=ft(l,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Mr(e,t,r,n){return e=ft(7,e,n,t),e.lanes=r,e}function da(e,t,r,n){return e=ft(22,e,n,t),e.elementType=ud,e.lanes=r,e.stateNode={isHidden:!1},e}function Ka(e,t,r){return e=ft(6,e,null,t),e.lanes=r,e}function Ga(e,t,r){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function m0(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ca(0),this.expirationTimes=Ca(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ca(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tc(e,t,r,n,s,i,l,o,c){return e=new m0(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ft(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Io(i),e}function g0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:an,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function tf(e){if(!e)return _r;e=e._reactInternals;e:{if(Gr(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(Ze(r))return th(e,r,t)}return t}function rf(e,t,r,n,s,i,l,o,c){return e=tc(r,n,!0,e,s,i,l,o,c),e.context=tf(null),r=e.current,n=qe(),s=yr(r),i=Vt(n,s),i.callback=t??null,gr(r,i,s),e.current.lanes=s,Rs(e,s,n),et(e,n),e}function ha(e,t,r,n){var s=t.current,i=qe(),l=yr(s);return r=tf(r),t.context===null?t.context=r:t.pendingContext=r,t=Vt(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=gr(s,t,l),e!==null&&(Ct(e,s,l,i),vi(e,s,l)),l}function Gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ku(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function rc(e,t){ku(e,t),(e=e.alternate)&&ku(e,t)}function v0(){return null}var nf=typeof reportError=="function"?reportError:function(e){console.error(e)};function nc(e){this._internalRoot=e}fa.prototype.render=nc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));ha(e,t,null,null)};fa.prototype.unmount=nc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){ha(null,e,null,null)}),t[Gt]=null}};function fa(e){this._internalRoot=e}fa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Od();e={blockedOn:null,target:e,priority:t};for(var r=0;r<lr.length&&t!==0&&t<lr[r].priority;r++);lr.splice(r,0,e),r===0&&Ld(e)}};function sc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _u(){}function y0(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Gi(l);i.call(u)}}var l=rf(t,n,e,0,null,!1,!1,"",_u);return e._reactRootContainer=l,e[Gt]=l.current,js(e.nodeType===8?e.parentNode:e),Wr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var u=Gi(c);o.call(u)}}var c=tc(e,0,!1,null,null,!1,!1,"",_u);return e._reactRootContainer=c,e[Gt]=c.current,js(e.nodeType===8?e.parentNode:e),Wr(function(){ha(t,c,r,n)}),c}function ma(e,t,r,n,s){var i=r._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var o=s;s=function(){var c=Gi(l);o.call(c)}}ha(t,l,e,s)}else l=y0(r,t,e,s,n);return Gi(l)}Ad=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ts(t.pendingLanes);r!==0&&(_o(t,r|1),et(t,ve()),!(X&6)&&(Tn=ve()+500,Sr()))}break;case 13:Wr(function(){var n=Qt(e,1);if(n!==null){var s=qe();Ct(n,e,1,s)}}),rc(e,1)}};jo=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var r=qe();Ct(t,e,134217728,r)}rc(e,134217728)}};Dd=function(e){if(e.tag===13){var t=yr(e),r=Qt(e,t);if(r!==null){var n=qe();Ct(r,e,t,n)}rc(e,t)}};Od=function(){return te};Rd=function(e,t){var r=te;try{return te=e,t()}finally{te=r}};gl=function(e,t,r){switch(t){case"input":if(cl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ia(n);if(!s)throw Error(P(90));hd(n),cl(n,s)}}}break;case"textarea":pd(e,r);break;case"select":t=r.value,t!=null&&yn(e,!!r.multiple,t,!1)}};bd=Jo;kd=Wr;var x0={usingClientEntryPoint:!1,Events:[$s,dn,ia,xd,wd,Jo]},Jn={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w0={bundleType:Jn.bundleType,version:Jn.version,rendererPackageName:Jn.rendererPackageName,rendererConfig:Jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nd(e),e===null?null:e.stateNode},findFiberByHostInstance:Jn.findFiberByHostInstance||v0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!li.isDisabled&&li.supportsFiber)try{ta=li.inject(w0),Rt=li}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x0;it.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sc(t))throw Error(P(200));return g0(e,t,null,r)};it.createRoot=function(e,t){if(!sc(e))throw Error(P(299));var r=!1,n="",s=nf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=tc(e,1,!1,null,null,r,!1,n,s),e[Gt]=t.current,js(e.nodeType===8?e.parentNode:e),new nc(t)};it.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Nd(t),e=e===null?null:e.stateNode,e};it.flushSync=function(e){return Wr(e)};it.hydrate=function(e,t,r){if(!pa(t))throw Error(P(200));return ma(null,e,t,!0,r)};it.hydrateRoot=function(e,t,r){if(!sc(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",l=nf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=rf(t,null,e,1,r??null,s,!1,i,l),e[Gt]=t.current,js(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new fa(t)};it.render=function(e,t,r){if(!pa(t))throw Error(P(200));return ma(null,e,t,!1,r)};it.unmountComponentAtNode=function(e){if(!pa(e))throw Error(P(40));return e._reactRootContainer?(Wr(function(){ma(null,null,e,!1,function(){e._reactRootContainer=null,e[Gt]=null})}),!0):!1};it.unstable_batchedUpdates=Jo;it.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!pa(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return ma(e,t,r,!1,n)};it.version="18.3.1-next-f1338f8080-20240426";function sf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sf)}catch(e){console.error(e)}}sf(),sd.exports=it;var b0=sd.exports,af,ju=b0;af=ju.createRoot,ju.hydrateRoot;const k0="modulepreload",_0=function(e){return"/"+e},Nu={},Us=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=_0(c),c in Nu)return;Nu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":k0,u||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((p,v)=>{h.addEventListener("load",p),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},j0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Us(async()=>{const{default:n}=await Promise.resolve().then(()=>Rn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class ic extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class N0 extends ic{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Su extends ic{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Eu extends ic{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ql;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ql||(Ql={}));var S0=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class E0{constructor(t,{headers:r={},customFetch:n,region:s=Ql.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=j0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return S0(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:l}=r;let o={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(o["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(o["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(o["Content-Type"]="application/json",d=JSON.stringify(l)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:d}).catch(N=>{throw new N0(N)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new Su(h);if(!h.ok)throw new Eu(h);let v=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield h.json():v==="application/octet-stream"?w=yield h.blob():v==="text/event-stream"?w=h:v==="multipart/form-data"?w=yield h.formData():w=yield h.text(),{data:w,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Eu||s instanceof Su?s.context:void 0}}})}}var Ye={},ac={},ga={},Ms={},va={},ya={},C0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pn=C0();const z0=Pn.fetch,lf=Pn.fetch.bind(Pn),of=Pn.Headers,T0=Pn.Request,P0=Pn.Response,Rn=Object.freeze(Object.defineProperty({__proto__:null,Headers:of,Request:T0,Response:P0,default:lf,fetch:z0},Symbol.toStringTag,{value:"Module"})),A0=Gf(Rn);var xa={};Object.defineProperty(xa,"__esModule",{value:!0});let D0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};xa.default=D0;var cf=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ya,"__esModule",{value:!0});const O0=cf(A0),R0=cf(xa);let L0=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=O0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c,u;let d=null,h=null,p=null,v=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const z=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");z&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,v=406,w="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const z=await i.text();try{d=JSON.parse(z),Array.isArray(d)&&i.status===404&&(h=[],d=null,v=200,w="OK")}catch{i.status===404&&z===""?(v=204,w="No Content"):d={message:z}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,v=200,w="OK"),d&&this.shouldThrowOnError)throw new R0.default(d)}return{error:d,data:h,count:p,status:v,statusText:w}});return this.shouldThrowOnError||(s=s.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};ya.default=L0;var $0=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(va,"__esModule",{value:!0});const I0=$0(ya);let U0=class extends I0.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${u}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};va.default=U0;var M0=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ms,"__esModule",{value:!0});const F0=M0(va);let B0=class extends F0.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Ms.default=B0;var q0=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ga,"__esModule",{value:!0});const Xn=q0(Ms);let H0=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new Xn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new Xn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Xn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Xn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Xn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};ga.default=H0;var uf=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ac,"__esModule",{value:!0});const W0=uf(ga),V0=uf(Ms);let K0=class df{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new W0.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new df(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(o="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new V0.default({method:o,url:c,headers:d,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};ac.default=K0;var Ln=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const hf=Ln(ac);Ye.PostgrestClient=hf.default;const ff=Ln(ga);Ye.PostgrestQueryBuilder=ff.default;const pf=Ln(Ms);Ye.PostgrestFilterBuilder=pf.default;const mf=Ln(va);Ye.PostgrestTransformBuilder=mf.default;const gf=Ln(ya);Ye.PostgrestBuilder=gf.default;const vf=Ln(xa);Ye.PostgrestError=vf.default;var G0=Ye.default={PostgrestClient:hf.default,PostgrestQueryBuilder:ff.default,PostgrestFilterBuilder:pf.default,PostgrestTransformBuilder:mf.default,PostgrestBuilder:gf.default,PostgrestError:vf.default};const{PostgrestClient:Q0,PostgrestQueryBuilder:Jy,PostgrestFilterBuilder:Xy,PostgrestTransformBuilder:Zy,PostgrestBuilder:ex,PostgrestError:tx}=G0;class Y0{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const J0="2.15.5",X0=`realtime-js/${J0}`,Z0="1.0.0",Yl=1e4,eg=1e3,tg=100;var fs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(fs||(fs={}));var we;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(we||(we={}));var Nt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Nt||(Nt={}));var Jl;(function(e){e.websocket="websocket"})(Jl||(Jl={}));var Rr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Rr||(Rr={}));class rg{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+s));l=l+s;const c=n.decode(t.slice(l,l+i));l=l+i;const u=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class yf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(se||(se={}));const Cu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,l)=>(i[l]=ng(l,e,t,s),i),{})},ng=(e,t,r,n)=>{const s=t.find(o=>o.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?xf(i,l):Xl(l)},xf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return lg(t,r)}switch(e){case se.bool:return sg(t);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return ig(t);case se.json:case se.jsonb:return ag(t);case se.timestamp:return og(t);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return Xl(t);default:return Xl(t)}},Xl=e=>e,sg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ig=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ag=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},lg=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>xf(t,o))}return e},og=e=>typeof e=="string"?e.replace(" ","T"):e,wf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Qa{constructor(t,r,n={},s=Yl){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zu||(zu={}));class ps{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ps.syncState(this.state,s,i,l),this.pendingDiffs.forEach(c=>{this.state=ps.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ps.syncDiff(this.state,s,i,l),o())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(i,(u,d)=>{l[u]||(c[u]=d)}),this.map(l,(u,d)=>{const h=i[u];if(h){const p=d.map(z=>z.presence_ref),v=h.map(z=>z.presence_ref),w=d.filter(z=>v.indexOf(z.presence_ref)<0),N=h.filter(z=>p.indexOf(z.presence_ref)<0);w.length>0&&(o[u]=w),N.length>0&&(c[u]=N)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const h=t[o].map(v=>v.presence_ref),p=d.filter(v=>h.indexOf(v.presence_ref)<0);t[o].unshift(...p)}n(o,d,c)}),this.map(l,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[o]=u,s(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Tu||(Tu={}));var ms;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ms||(ms={}));var Bt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Bt||(Bt={}));class lc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=we.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Qa(this,Nt.join,this.params,this.timeout),this.rejoinTimer=new yf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=we.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ps(this),this.broadcastEndpointURL=wf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==we.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[ms.PRESENCE]&&this.bindings[ms.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(Bt.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Bt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket.setAuth(),v===void 0){t==null||t(Bt.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,z=(w=N==null?void 0:N.length)!==null&&w!==void 0?w:0,g=[];for(let m=0;m<z;m++){const f=N[m],{filter:{event:x,schema:S,table:y,filter:b}}=f,_=v&&v[m];if(_&&_.event===x&&_.schema===S&&_.table===y&&_.filter===b)g.push(Object.assign(Object.assign({},f),{id:_.id}));else{this.unsubscribe(),this.state=we.errored,t==null||t(Bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Bt.SUBSCRIBED);return}}).receive("error",v=>{this.state=we.errored,t==null||t(Bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===we.joined&&t===ms.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=we.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Qa(this,Nt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=we.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Qa(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>tg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=Nt;if(n&&[o,c,u,d].indexOf(l)>=0&&n!==this._joinRef())return;let p=this._onMessage(l,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var w,N,z;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((z=(N=v.filter)===null||N===void 0?void 0:N.event)===null||z===void 0?void 0:z.toLocaleLowerCase())===l}).map(v=>v.callback(p,n)):(i=this.bindings[l])===null||i===void 0||i.filter(v=>{var w,N,z,g,m,f;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const x=v.id,S=(w=v.filter)===null||w===void 0?void 0:w.event;return x&&((N=r.ids)===null||N===void 0?void 0:N.includes(x))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((z=r.data)===null||z===void 0?void 0:z.type.toLocaleLowerCase()))}else{const x=(m=(g=v==null?void 0:v.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return x==="*"||x===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:N,table:z,commit_timestamp:g,type:m,errors:f}=w;p=Object.assign(Object.assign({},{schema:N,table:z,commit_timestamp:g,eventType:m,new:{},old:{},errors:f}),this._getPayloadRecords(w))}v.callback(p,n)})}_isClosed(){return this.state===we.closed}_isJoined(){return this.state===we.joined}_isJoining(){return this.state===we.joining}_isLeaving(){return this.state===we.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&lc.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Nt.close,{},t)}_onError(t){this._on(Nt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Cu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Cu(t.columns,t.old_record)),r}}const Ya=()=>{},oi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cg=[1e3,2e3,5e3,1e4],ug=1e4,dg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hg{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yl,this.transport=null,this.heartbeatIntervalMs=oi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ya,this.ref=0,this.reconnectTimer=null,this.logger=Ya,this.conn=null,this.sendBuffer=[],this.serializer=new rg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>Us(async()=>{const{default:o}=await Promise.resolve().then(()=>Rn);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Jl.websocket}`,this.httpEndpoint=wf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Y0.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Z0}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fs.connecting:return Rr.Connecting;case fs.open:return Rr.Open;case fs.closing:return Rr.Closing;default:return Rr.Closed}}isConnected(){return this.connectionState()===Rr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new lc(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(eg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},oi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Nt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([dg],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:X0};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Nt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new yf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},oi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,o,c,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Yl,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:oi.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:Ya,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>cg[h-1]||ug,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,p)=>p(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class oc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function be(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class fg extends oc{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zl extends oc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var pg=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const bf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Us(async()=>{const{default:n}=await Promise.resolve().then(()=>Rn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},mg=()=>pg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Us(()=>Promise.resolve().then(()=>Rn),void 0)).Response:Response}),eo=e=>{if(Array.isArray(e))return e.map(r=>eo(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=eo(n)}),t},gg=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Qr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Ja=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),vg=(e,t,r)=>Qr(void 0,void 0,void 0,function*(){const n=yield mg();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new fg(Ja(s),i,l))}).catch(s=>{t(new Zl(Ja(s),s))}):t(new Zl(Ja(e),e))}),yg=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(gg(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Fs(e,t,r,n,s,i){return Qr(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,yg(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>vg(c,o,n))})})}function Qi(e,t,r,n){return Qr(this,void 0,void 0,function*(){return Fs(e,"GET",t,r,n)})}function Dt(e,t,r,n,s){return Qr(this,void 0,void 0,function*(){return Fs(e,"POST",t,n,s,r)})}function to(e,t,r,n,s){return Qr(this,void 0,void 0,function*(){return Fs(e,"PUT",t,n,s,r)})}function xg(e,t,r,n){return Qr(this,void 0,void 0,function*(){return Fs(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function kf(e,t,r,n,s){return Qr(this,void 0,void 0,function*(){return Fs(e,"DELETE",t,n,s,r)})}var Fe=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const wg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bg{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=bf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Fe(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Pu),s);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?to:Dt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(be(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Fe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Pu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield to(this.fetch,o.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(be(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Dt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new oc("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}update(t,r,n){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(be(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(be(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Dt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(be(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Fe(this,void 0,void 0,function*(){try{const s=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(be(s))return{data:null,error:s};throw s}})}download(t,r){return Fe(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Qi(this.fetch,`${this.url}/${s}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(be(o))return{data:null,error:o};throw o}})}info(t){return Fe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Qi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:eo(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}exists(t){return Fe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield xg(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n)&&n instanceof Zl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(be(r))return{data:null,error:r};throw r}})}list(t,r,n){return Fe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},wg),r),{prefix:t||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(be(s))return{data:null,error:s};throw s}})}listV2(t,r){return Fe(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Dt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const kg="2.12.1",_g={"X-Client-Info":`storage-js/${kg}`};var Xr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class jg{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},_g),r),this.fetch=bf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Xr(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}getBucket(t){return Xr(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(be(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Xr(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Xr(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Xr(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(be(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Xr(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(be(r))return{data:null,error:r};throw r}})}}class Ng extends jg{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new bg(this.url,this.headers,t,this.fetch)}}const Sg="2.57.4";let ns="";typeof Deno<"u"?ns="deno":typeof document<"u"?ns="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ns="react-native":ns="node";const Eg={"X-Client-Info":`supabase-js-${ns}/${Sg}`},Cg={headers:Eg},zg={schema:"public"},Tg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Pg={};var Ag=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Dg=e=>{let t;return e?t=e:typeof fetch>"u"?t=lf:t=fetch,(...r)=>t(...r)},Og=()=>typeof Headers>"u"?of:Headers,Rg=(e,t,r)=>{const n=Dg(r),s=Og();return(i,l)=>Ag(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let u=new s(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},l),{headers:u}))})};var Lg=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};function $g(e){return e.endsWith("/")?e:e+"/"}function Ig(e,t){var r,n;const{db:s,auth:i,realtime:l,global:o}=e,{db:c,auth:u,realtime:d,global:h}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),l),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Lg(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function Ug(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($g(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _f="2.71.1",nn=30*1e3,ro=3,Xa=ro*nn,Mg="http://localhost:9999",Fg="supabase.auth.token",Bg={"X-Client-Info":`gotrue-js/${_f}`},no="X-Supabase-Api-Version",jf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Hg=10*60*1e3;class cc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function H(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Wg extends cc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Vg(e){return H(e)&&e.name==="AuthApiError"}class Nf extends cc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Er extends cc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class sr extends Er{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Kg(e){return H(e)&&e.name==="AuthSessionMissingError"}class ci extends Er{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ui extends Er{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class di extends Er{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gg(e){return H(e)&&e.name==="AuthImplicitGrantRedirectError"}class Au extends Er{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class so extends Er{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Za(e){return H(e)&&e.name==="AuthRetryableFetchError"}class Du extends Er{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class io extends Er{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ou=` 	
\r=`.split(""),Qg=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ou.length;t+=1)e[Ou[t].charCodeAt(0)]=-2;for(let t=0;t<Yi.length;t+=1)e[Yi[t].charCodeAt(0)]=t;return e})();function Ru(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Yi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Yi[n]),t.queuedBits-=6}}function Sf(e,t,r){const n=Qg[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Lu(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{Xg(l,n,r)};for(let l=0;l<e.length;l+=1)Sf(e.charCodeAt(l),s,i);return t.join("")}function Yg(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Jg(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Yg(n,t)}}function Xg(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Zg(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Sf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function ev(e){const t=[];return Jg(e,r=>t.push(r)),new Uint8Array(t)}function tv(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Ru(s,r,n)),Ru(null,r,n),t.join("")}function rv(e){return Math.round(Date.now()/1e3)+e}function nv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const kt=()=>typeof window<"u"&&typeof document<"u",Tr={tested:!1,writable:!1},Ef=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tr.tested)return Tr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Tr.tested=!0,Tr.writable=!0}catch{Tr.tested=!0,Tr.writable=!1}return Tr.writable};function sv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Cf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Us(async()=>{const{default:n}=await Promise.resolve().then(()=>Rn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},iv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",sn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Pr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},nr=async(e,t)=>{await e.removeItem(t)};class wa{constructor(){this.promise=new wa.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}wa.promiseConstructor=Promise;function el(e){const t=e.split(".");if(t.length!==3)throw new io("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!qg.test(t[n]))throw new io("JWT not in base64url format");return{header:JSON.parse(Lu(t[0])),payload:JSON.parse(Lu(t[1])),signature:Zg(t[2]),raw:{header:t[0],payload:t[1]}}}async function av(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lv(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function ov(e){return("0"+e.toString(16)).substr(-2)}function cv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,ov).join("")}async function uv(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function dv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await uv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zr(e,t,r=!1){const n=cv();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await sn(e,`${t}-code-verifier`,s);const i=await dv(n);return[i,n===i?"plain":"s256"]}const hv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fv(e){const t=e.headers.get(no);if(!t||!t.match(hv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function pv(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function mv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function en(e){if(!gv.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tl(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $u(e){return JSON.parse(JSON.stringify(e))}var vv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Or=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yv=[502,503,504];async function Iu(e){var t;if(!iv(e))throw new so(Or(e),0);if(yv.includes(e.status))throw new so(Or(e),e.status);let r;try{r=await e.json()}catch(i){throw new Nf(Or(i),i)}let n;const s=fv(e);if(s&&s.getTime()>=jf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Du(Or(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new sr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Du(Or(r),e.status,r.weak_password.reasons);throw new Wg(Or(r),e.status||500,n)}const xv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function K(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[no]||(i[no]=jf["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await wv(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function wv(e,t,r,n,s,i){const l=xv(t,n,s,i);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new so(Or(c),0)}if(o.ok||await Iu(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await Iu(c)}}function Mt(e){var t;let r=null;jv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=rv(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Uu(e){const t=Mt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function cr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function bv(e){return{data:e,error:null}}function kv(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=vv(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function _v(e){return e}function jv(e){return e.access_token&&e.refresh_token&&e.expires_in}const rl=["global","local","others"];var Nv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Sv{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Cf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=rl[0]){if(rl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rl.join(", ")}`);try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:cr})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Nv(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:kv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(H(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:cr})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:_v});if(d.error)throw d.error;const h=await d.json(),p=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(w=>{const N=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(w.split(";")[1].split("=")[1]);u[`${z}Page`]=N}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(H(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){en(t);try{return await K(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:cr})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){en(t);try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:cr})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){en(t);try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:cr})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){en(t.userId);try{const{data:r,error:n}=await K(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteFactor(t){en(t.userId),en(t.id);try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}}function Mu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Ev(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const tn={debug:!!(globalThis&&Ef()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Cv extends zf{}async function zv(e,t,r){tn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),tn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){tn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{tn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw tn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Cv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(tn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Ev();const Tv={url:Mg,storageKey:Fg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Bg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fu(e,t,r){return await r()}const rn={};class Ds{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ds.nextInstanceID,Ds.nextInstanceID+=1,this.instanceID>0&&kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Tv),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Sv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Cf(s.fetch),this.lock=s.lock||Fu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:kt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=zv:this.lock=Fu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Ef()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Mu(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=rn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){rn[this.storageKey]=Object.assign(Object.assign({},rn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=rn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){rn[this.storageKey]=Object.assign(Object.assign({},rn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_f}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=sv(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),kt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Gg(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return H(r)?{error:r}:{error:new Nf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Mt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:p}=t;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await Zr(this.storage,this.storageKey)),i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:v,code_challenge_method:w},xform:Mt})}else if("phone"in t){const{phone:d,password:h,options:p}=t;i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Mt})}else throw new ui("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Uu})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Uu})}else throw new ui("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ci}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,l,o,c,u,d,h,p,v;let w,N;if("message"in t)w=t.message,N=t.signature;else{const{chain:z,wallet:g,statement:m,options:f}=t;let x;if(kt())if(typeof g=="object")x=g;else{const y=window;if("solana"in y&&typeof y.solana=="object"&&("signIn"in y.solana&&typeof y.solana.signIn=="function"||"signMessage"in y.solana&&typeof y.solana.signMessage=="function"))x=y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const S=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const y=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let b;if(Array.isArray(y)&&y[0]&&typeof y[0]=="object")b=y[0];else if(y&&typeof y=="object"&&"signedMessage"in y&&"signature"in y)b=y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)w=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),N=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(d=f==null?void 0:f.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const y=await x.signMessage(new TextEncoder().encode(w),"utf8");if(!y||!(y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=y}}try{const{data:z,error:g}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:tv(N)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Mt});if(g)throw g;return!z||!z.session||!z.user?{data:{user:null,session:null},error:new ci}:(z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),{data:Object.assign({},z),error:g})}catch(z){if(H(z))return{data:{user:null,session:null},error:z};throw z}}async _exchangeCodeForSession(t){const r=await Pr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Mt});if(await nr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ci}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(H(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,o=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Mt}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ci}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Zr(this.storage,this.storageKey));const{error:h}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ui("You must provide either an email or phone number.")}catch(o){if(H(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Mt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Zr(this.storage,this.storageKey)),await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:bv})}catch(i){if(H(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new sr;const{error:s}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(H(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await K(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:o}=await K(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new ui("You must provide either an email or phone number and a type")}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Pr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Xa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await Pr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=tl()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:cr}):await this._useSession(async r=>{var n,s,i;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sr}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:cr})})}catch(r){if(H(r))return Kg(r)&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new sr;const l=s.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Zr(this.storage,this.storageKey));const{data:u,error:d}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:cr});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new sr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=el(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(H(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new sr;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!kt())throw new di("No browser detected.");if(t.error||t.error_description||t.error_code)throw new di(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Au("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new di("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Au("No code detected.");const{data:m,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=t;if(!i||!o||!l||!u)throw new di("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let p=d+h;c&&(p=parseInt(c));const v=p-d;v*1e3<=nn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const w=p-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,d);const{data:N,error:z}=await this._getUser(i);if(z)throw z;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:p,refresh_token:l,token_type:u,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(H(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Pr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(Vg(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=nv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Zr(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(H(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,o,c,u,d;const{data:h,error:p}=i;if(p)throw p;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return kt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(H(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await lv(async s=>(s>0&&await av(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Mt})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Za(i)&&Date.now()+l-n<nn})}catch(n){if(this._debug(r,"error",n),H(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),kt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Pr(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Pr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await sn(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:tl()}else if(s&&!s.user&&!s.user){const l=await Pr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await nr(this.storage,this.storageKey+"-user"),await sn(this.storage,this.storageKey,s)):s.user=tl()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xa;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Xa}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Za(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(s.access_token);!o&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new wa;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new sr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),H(i)){const l={session:null,error:i};return Za(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await sn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=$u(s);await sn(this.storage,this.storageKey,i)}else{const s=$u(r);await sn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await nr(this.storage,this.storageKey),await nr(this.storage,this.storageKey+"-code-verifier"),await nr(this.storage,this.storageKey+"-user"),this.userStorage&&await nr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),nn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/nn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${nn}ms, refresh threshold is ${ro} ticks`),s<=ro&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof zf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Zr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await K(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await K(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await K(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await K(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=el(s.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+Hg>s)return n;const{data:i,error:l}=await K(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:w}=await this.getSession();if(w||!v.session)return{data:null,error:w};n=v.session.access_token}const{header:s,payload:i,signature:l,raw:{header:o,payload:c}}=el(n);r!=null&&r.allowExpired||pv(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:l},error:null}}const d=mv(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,l,ev(`${o}.${c}`)))throw new io("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}}Ds.nextInstanceID=0;const Pv=Ds;class Av extends Pv{constructor(t){super(t)}}var Dv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class Ov{constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const o=Ug(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:zg,realtime:Pg,auth:Object.assign(Object.assign({},Tg),{storageKey:c}),global:Cg},d=Ig(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=d.auth)!==null&&l!==void 0?l:{},this.headers,d.global.fetch),this.fetch=Rg(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Q0(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Ng(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new E0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Dv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:o,lock:c,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Av({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:o,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new hg(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rv=(e,t,r)=>new Ov(e,t,r);function Lv(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Lv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $v="https://soewlqmskqmpycaevhoc.supabase.co",Iv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvZXdscW1za3FtcHljYWV2aG9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNDExODksImV4cCI6MjA3ODYxNzE4OX0.0CAOUF-SVUIx5udgzNBkrggovWaafHWYFN1j-HzYTFU",T=Rv($v,Iv,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),Tf=j.createContext(void 0);function Uv({children:e}){const[t,r]=j.useState(null),[n,s]=j.useState(!0);j.useEffect(()=>{T.auth.getSession().then(({data:{session:u}})=>{r((u==null?void 0:u.user)??null),s(!1)}).catch(()=>{s(!1)});const{data:{subscription:c}}=T.auth.onAuthStateChange((u,d)=>{r((d==null?void 0:d.user)??null),s(!1)});return()=>c.unsubscribe()},[]);const i=async(c,u)=>{try{const{error:d}=await T.auth.signInWithPassword({email:c,password:u});return d?{error:new Error(d.message.includes("Invalid login credentials")||d.message.includes("Email not confirmed")?"Geersiz e-posta veya ifre. Ltfen tekrar deneyin.":d.message.includes("Email not confirmed")?"E-posta adresiniz henz onaylanmam. Ltfen e-postanz kontrol edin.":"Giri yaplamad. Bilgilerinizi kontrol edip tekrar deneyin.")}:{error:null}}catch{return{error:new Error("Giri yaplamad. Ltfen daha sonra tekrar deneyin.")}}},l=async(c,u,d,h)=>{try{const{data:p,error:v}=await T.from("profiles").select("username").eq("username",h.toLowerCase()).single();if(p)return{error:new Error("Bu kullanc ad zaten alnm. Ltfen farkl bir tane sein.")};v&&v.code!=="PGRST116"&&console.error("Username check error:",v);const{data:w,error:N}=await T.auth.signUp({email:c,password:u,options:{emailRedirectTo:`${window.location.origin}`,data:{full_name:d,username:h.toLowerCase()}}});if(N)throw new Error(N.message.includes("already registered")||N.message.includes("already exists")||N.message.includes("User already registered")?"Bu e-posta adresi zaten kaytl. Ltfen giri yapn veya farkl bir e-posta kullann.":N.message.includes("Password should be at least")?"ifre en az 6 karakter olmaldr.":"Hesap oluturulamad. Ltfen tekrar deneyin.");if(w.user)try{const{error:z}=await T.from("profiles").upsert({id:w.user.id,email:w.user.email,full_name:d,username:h.toLowerCase()},{onConflict:"id"})}catch{}return w.user&&!w.session?{error:null}:{error:null}}catch(p){return{error:p instanceof Error?p:new Error("Hesap oluturulamad. Ltfen tekrar deneyin.")}}},o=async()=>{await T.auth.signOut()};return a.jsx(Tf.Provider,{value:{user:t,loading:n,signIn:i,signUp:l,signOut:o},children:e})}function lt(){const e=j.useContext(Tf);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Mv={en:{nav:{home:"Home",about:"About",social:"Social",analyze:"Analyze",library:"Library",contact:"Contact",dashboard:"Dashboard",buy:"Buy",freeTrial:"3-Day Free Trial",signIn:"Sign In",signOut:"Sign Out",messages:"Messages"},home:{title:"Submirra",subtitle:"Unlock the Secrets of Your Subconscious",description:"Experience the power of advanced dream analysis. Submirra combines sophisticated subconscious interpretation with stunning visual generation to help you understand the hidden meanings behind your dreams.",cta:"Analyze Your Dream",getStarted:"Get Started",learnMore:"Learn More",feature1Title:"Deep Analysis",feature1Desc:"Advanced AI-powered analysis techniques reveal hidden meanings in your dreams through sophisticated subconscious interpretation. Our neural networks decode symbolic patterns, emotional undertones, and psychological connections.",feature1Details:"AI Analysis  Symbols  Emotions  Patterns",feature2Title:"Visual Generation",feature2Desc:"Transform your dreams into stunning surreal visualizations that capture their essence and emotion. Our advanced AI creates personalized artwork that brings your subconscious visions to life.",feature2Details:"Surreal Art  Color Mapping  Symbolic Visual  HD Output",feature3Title:"Personal Library",feature3Desc:"Build your personal dream journal with all your analyses and visualizations in one place. Track patterns, explore recurring themes, and discover your subconscious evolution over time.",feature3Details:"Dream Journal  Pattern Track  Theme Analysis  Progress"},about:{title:"About Submirra",subtitle:"Bridging the conscious and subconscious",missionTitle:"Our Mission",missionDesc:"Submirra is dedicated to helping you understand the hidden messages within your dreams. Using advanced analysis technology, we analyze your dreams to reveal insights about your subconscious mind, emotional state, and inner desires.",howItWorksTitle:"How It Works",howItWorksDesc:"Our platform combines the power of advanced analysis with artistic visualization:",step1:"Share your dream in up to 5000 characters",step2:"Our system processes your dream through advanced analysis",step3:"Receive a detailed subconscious analysis",step4:"Get a unique surreal visualization of your dream",step5:"Build your personal dream library over time",privacyTitle:"Privacy & Security",privacyDesc:"Your dreams are deeply personal, and we treat them with the utmost respect. All dream entries are encrypted and stored securely. Only you can access your dream library, and we never share your data with third parties. Your subconscious secrets are safe with us.",quote:'"Dreams are the royal road to the unconscious" - Sigmund Freud'},analyze:{title:"Analyze Your Dream",subtitle:"Describe your dream in detail and discover its hidden meanings",label:"Tell us about your dream",placeholder:"I was walking through a forest filled with glowing trees...",characters:"characters",submit:"Analyze Dream",saving:"Saving...",analysisTitle:"Analysis",visualizationTitle:"Dream Visualization",analyzeAnother:"Analyze Another Dream",confirmationMessage:"Your dream has been saved and will be analyzed shortly.",savedMessage:"Your dream has been saved and will be analyzed shortly.",trialBadge:"3-Day Free Trial",privacyLabel:"Privacy",privacyPublic:"Public",privacyPrivate:"Private",privacyPublicDesc:"Share with the community",privacyPrivateDesc:"Only visible to you"},library:{title:"Your Dream Library",subtitle:"Explore your collection of analyzed dreams and visualizations",empty:"Your library is empty",analyzeFirst:"Analyze Your First Dream",yourDream:"Your Dream",analysis:"Analysis",pending:"Pending Analysis",processingMessage:"Analysis is being processed",searchPlaceholder:"Search your dreams...",noDreamsFound:"No dreams found matching your search"},social:{title:"Social Feed",subtitle:"Explore public dream analyses from the community",searchDreams:"Search Dreams",searchUsers:"Search Users",searchDreamsPlaceholder:"Search dreams...",searchUsersPlaceholder:"Search users by name or username...",all:"All",following:"Following",recent:"Recent",popular:"Popular",trending:"Trending",pending:"Pending",noDreams:"No public dreams yet",shareFirst:"Share Your First Dream",likes:"likes",like:"like",comments:"comments",comment:"comment",viewAll:"View all",noComments:"No comments yet",writeComment:"Write a comment...",signInToComment:"Sign in to comment",signIn:"Sign In",justNow:"Just now",minutesAgo:"m ago",hoursAgo:"h ago",daysAgo:"d ago",noUsersFound:"No users found",anonymous:"Anonymous",checkOutDream:"Check out this dream",linkCopied:"Link copied to clipboard",deleteDream:"Delete your dream",deleteConfirm:"Are you sure you want to delete this dream? This will also delete all likes and comments.",dreamDeleted:"Dream deleted successfully",deleteFailed:"Failed to delete dream. You can only delete your own dreams.",commentAdded:"Comment added",commentFailed:"Failed to add comment",commentDeleted:"Comment deleted",commentDeleteFailed:"Failed to delete comment",deleteComment:"Delete comment",endOfFeed:"You've reached the end of the feed",loadingMore:"Loading more..."},profile:{title:"Profile",manageAccount:"Manage your account settings",userProfile:"User Profile",changeAvatar:"Change avatar",uploading:"Uploading...",publicDreams:"Public Dreams",likesReceived:"Likes Received",comments:"Comments",followers:"Followers",following:"Following",email:"Email",memberSince:"Member Since",editProfile:"Edit Profile",saveChanges:"Save Changes",cancel:"Cancel",follow:"Follow",followingButton:"Following",publicDreamsTitle:"Public Dreams",noPublicDreams:"No public dreams yet",profileSaved:"Profile saved successfully",profileSaveFailed:"Failed to save profile",avatarUploaded:"Avatar uploaded successfully",avatarUploadFailed:"Failed to upload avatar",followSuccess:"Now following this user",unfollowSuccess:"Unfollowed this user",followFailed:"Failed to update follow status",bioPlaceholder:"Write a bio...",message:"Message"},dashboard:{title:"Dashboard",subtitle:"Overview of your dream analysis journey",totalDreams:"Total Dreams",completedAnalyses:"Completed Analyses",pendingAnalyses:"Pending Analyses",analyzeNewDream:"Analyze New Dream",analyzeNewDreamDesc:"Start analyzing a new dream to discover its hidden meanings",viewLibrary:"View Library",viewLibraryDesc:"Browse your complete collection of analyzed dreams",recentDreams:"Recent Dreams",viewAll:"View All",noDreams:"No dreams yet",analyzeFirstDream:"Analyze Your First Dream"},contact:{title:"Contact Us",subtitle:"Have questions? We'd love to hear from you",emailSupport:"Email Support",liveChat:"Live Chat",available:"Available 24/7 for assistance",sendMessage:"Send us a Message",name:"Name",email:"Email",subject:"Subject",message:"Message",send:"Send Message",thankYou:"Thank you for your message! We'll get back to you soon.",namePlaceholder:"Your name",emailPlaceholder:"your@email.com",subjectPlaceholder:"What's this about?",messagePlaceholder:"Tell us more..."},auth:{welcomeBack:"Welcome Back",createAccount:"Create Account",continueExploring:"Continue exploring your dreams",startJourney:"Start your journey into the subconscious",signIn:"Sign In",signUp:"Sign Up",fullName:"Full Name",email:"Email",password:"Password",orContinueWith:"Or continue with",googleSignIn:"Sign in with Google",enterFullName:"Enter your full name",enterEmail:"your@email.com",enterPassword:"Enter your password",creatingAccount:"Creating account...",signingIn:"Signing in...",checkEmail:"Check your email",confirmationSent:"We sent you a confirmation link. Please check your email to verify your account.",validationRequired:"Please fill out this field",validationEmail:"Please enter a valid email address",emailAlreadyExists:"This email is already registered. Please sign in or use a different email.",invalidCredentials:"Invalid email or password. Please try again."},settings:{title:"Settings",blockedUsers:"Blocked Users",privacy:"Privacy",notifications:"Notifications",blockedUsersDesc:"Users you've blocked won't be able to send you messages or interact with your content.",noBlockedUsers:"No blocked users",unblock:"Unblock",unblockConfirm:"Are you sure you want to unblock",unblockSuccess:"has been unblocked",privacyDesc:"Control who can see your content and interact with you.",profileVisibility:"Profile Visibility",allowMessagesFrom:"Allow Messages From",public:"Public",private:"Private",everyone:"Everyone",followingOnly:"Following Only",notificationsDesc:"Choose what notifications you want to receive.",likesOnDreams:"Likes on Dreams",comments:"Comments",newFollowers:"New Followers",directMessages:"Direct Messages",favorites:"Favorites",favoritesDesc:"Your favorite friends. Their dreams will be shown with priority.",noFavorites:"No favorite friends yet",remove:"Remove"},messages:{title:"Messages",searchPlaceholder:"Search users...",noMessages:"No messages yet",searchToStart:"Search for users to start chatting",typePlaceholder:"Type a message...",loading:"Loading...",loadingUser:"Loading user...",searchResults:"Search Results",searching:"Searching..."},pricing:{title:"Simple, Transparent Pricing",subtitle:"Choose the perfect plan for your dream analysis journey",freeTrial:{title:"Free Trial",price:"Free",description:"Perfect for exploring what Submirra can do",feature1:"3 days of access",feature2:"3 dream analyses total",feature3:"",cta:"Start Free Trial",signUp:"Sign Up Free"},standard:{title:"Standard",price:"$15",period:"month",description:"Great for regular dream journaling and insights",feature1:"5 dream analyses per day",feature2:"1 visualization per analysis",feature3:"Save up to 10 analyses monthly",feature4:"Advanced analysis",feature5:"Storage refreshes each month",cta:"Get Standard"},premium:{badge:"Most Popular",title:"Premium",price:"$30",period:"month",description:"Unlock your subconscious completely with unlimited library and multiple visualizations",feature1:"10 dream analyses per day",feature2:"3 visualizations per analysis",feature3:"Unlimited library storage",feature4:"Priority analysis",feature5:"Never lose your dream history",cta:"Go Premium"},whySubmirra:{title:"Why Choose Submirra?",description:"Submirra uses cutting-edge analysis technology to decode your dreams, revealing hidden meanings about your subconscious mind, emotional state, and inner desires. Each analysis comes with unique surreal visualizations that capture the essence of your dream."}},trial:{activateTitle:"Activate Your 3-Day Free Trial",activateDesc:"Experience the full power of Submirra with unlimited access for 3 days",activateNow:"Activate Free Trial",activating:"Activating...",activated:"Trial Activated!",activatedDesc:"Your 3-day free trial has been successfully activated.",enjoy3Days:"Enjoy 3 days of unlimited dream analysis and insights!",alreadyUsed:"Trial Already Used",alreadyUsedDesc:"You have already used your free trial. Upgrade to a paid plan to continue enjoying Submirra.",viewPlans:"View Plans",whatsIncluded:"What's Included:",feature1:"3 days of full access to all features",feature2:"3 dream analyses with AI-powered insights",feature3:"Beautiful visualizations for your dreams",duration:"Duration",threeDays:"3 Days",analyses:"Analyses",threeAnalyses:"3 Dreams",features:"Features",fullAccess:"Full Access",startAnalyzing:"Start Analyzing Dreams",trialExpired:"Trial Expired",trialExpiredDesc:"Your 3-day free trial has expired. Upgrade to continue."}},tr:{nav:{home:"Ana Sayfa",about:"Hakknda",social:"Sosyal",analyze:"Analiz Et",library:"Ktphane",contact:"letiim",dashboard:"Kontrol Paneli",buy:"Satn Al",freeTrial:"3 Gnlk Deneme",signIn:"Giri Yap",signOut:"k Yap",messages:"Mesajlar"},home:{title:"Submirra",subtitle:"Bilinaltnzn Srlarn Kefedin",description:"Gelimi rya analizi gcn deneyimleyin. Submirra, sofistike bilinalt yorumlama ve etkileyici grsel retimi birletirerek ryalarnzn gizli anlamlarn anlamanza yardmc olur.",cta:"Ryan Analiz Et",getStarted:"Balayn",learnMore:"Daha Fazla Bilgi",feature1Title:"Derin Analiz",feature1Desc:"Gelimi AI destekli analiz teknikleri, sofistike bilinalt yorumlama yoluyla ryalarnzdaki gizli anlamlar ortaya karr. Sinir alarmz sembolik kalplar, duygusal tonlar ve psikolojik balantlar zer.",feature1Details:"AI Analiz  Semboller  Duygular  Kalplar",feature2Title:"Grsel retimi",feature2Desc:"Ryalarnz, zn ve duygusunu yakalayan muhteem srreal grselletirmelere dntrn. Gelimi AI'mz bilinalt vizyonlarnz hayata geiren kiiselletirilmi sanat eserleri yaratr.",feature2Details:"Srreal Sanat  Renk Haritas  Sembolik Grsel  HD kt",feature3Title:"Kiisel Ktphane",feature3Desc:"Tm analizleriniz ve grselletirmelerinizle kiisel rya gnlnz tek bir yerde oluturun. Kalplar takip edin, tekrarlayan temalar kefedin ve zaman iinde bilinalt evrimimizi kefedin.",feature3Details:"Rya Gnl  Kalp Takip  Tema Analiz  lerleme"},about:{title:"Submirra Hakknda",subtitle:"Bilin ve bilinalt arasnda kpr",missionTitle:"Misyonumuz",missionDesc:"Submirra, ryalarnzdaki gizli mesajlar anlamanza yardmc olmaya adanmtr. Gelimi analiz teknolojisi kullanarak, bilinalt zihniniz, duygusal durumunuz ve i arzularnz hakknda igrler ortaya karmak iin ryalarnz analiz ediyoruz.",howItWorksTitle:"Nasl alr",howItWorksDesc:"Platformumuz, gelimi analiz gcn sanatsal grselletirme ile birletirir:",step1:"Ryanz 5000 karaktere kadar paylan",step2:"Sistemimiz ryanz gelimi analiz yntemleriyle iler",step3:"Detayl bir bilinalt analizi aln",step4:"Ryanzn benzersiz srreal bir grselletirmesini elde edin",step5:"Zamanla kiisel rya ktphanenizi oluturun",privacyTitle:"Gizlilik ve Gvenlik",privacyDesc:"Ryalarnz son derece kiiseldir ve onlara byk bir saygyla yaklayoruz. Tm rya girileri ifrelenir ve gvenli bir ekilde saklanr. Yalnzca siz rya ktphanenize eriebilirsiniz ve verilerinizi asla nc taraflarla paylamayz. Bilinalt srlarnz bizimle gvendedir.",quote:'"Ryalar bilindna alan kraliyet yoludur" - Sigmund Freud'},analyze:{title:"Ryanz Analiz Edin",subtitle:"Ryanz detayl bir ekilde anlatn ve gizli anlamlarn kefedin",label:"Ryanz hakknda bize bilgi verin",placeholder:"Parlayan aalarla dolu bir ormanda yryordum...",characters:"karakter",submit:"Ryay Analiz Et",saving:"Kaydediliyor...",analysisTitle:"Analiz",visualizationTitle:"Rya Grselletirmesi",analyzeAnother:"Baka Bir Rya Analiz Et",confirmationMessage:"Ryanz kaydedildi ve ksa sre iinde analiz edilecek.",savedMessage:"Ryanz kaydedildi ve ksa sre iinde analiz edilecek.",trialBadge:"3 Gnlk cretsiz Deneme",privacyLabel:"Gizlilik",privacyPublic:"Herkese Ak",privacyPrivate:"zel",privacyPublicDesc:"Toplulukla payla",privacyPrivateDesc:"Sadece size zel"},library:{title:"Rya Ktphaneniz",subtitle:"Analiz edilmi ryalarnz ve grselletirmelerinizi kefedin",empty:"Ktphaneniz bo",analyzeFirst:"lk Ryanz Analiz Edin",yourDream:"Ryanz",analysis:"Analiz",pending:"Analiz Bekleniyor",processingMessage:"Analiz ileniyor",searchPlaceholder:"Ryalarnzda arayn...",noDreamsFound:"Aramanzla eleen rya bulunamad"},social:{title:"Sosyal Ak",subtitle:"Topluluktan herkese ak rya analizlerini kefedin",searchDreams:"Ryalar Ara",searchUsers:"Kullanclar Ara",searchDreamsPlaceholder:"Ryalar ara...",searchUsersPlaceholder:"sim veya kullanc adna gre kullanc ara...",all:"Tm",following:"Takip Edilenler",recent:"Yeni",popular:"Popler",trending:"Trend",pending:"Beklemede",noDreams:"Henz herkese ak rya yok",shareFirst:"lk Ryanz Paylan",likes:"beeni",like:"beeni",comments:"yorum",comment:"yorum",viewAll:"Tmn gr",noComments:"Henz yorum yok",writeComment:"Yorum yaz...",signInToComment:"Yorum yapmak iin giri yapn",signIn:"Giri Yap",justNow:"Az nce",minutesAgo:" dk nce",hoursAgo:" sa nce",daysAgo:" gn nce",noUsersFound:"Kullanc bulunamad",anonymous:"Anonim",checkOutDream:"Bu ryaya gz at",linkCopied:"Link panoya kopyaland",deleteDream:"Ryanz silin",deleteConfirm:"Bu ryay silmek istediinizden emin misiniz? Bu ilem tm beenileri ve yorumlar da silecektir.",dreamDeleted:"Rya baaryla silindi",deleteFailed:"Rya silinemedi. Sadece kendi ryalarnz silebilirsiniz.",commentAdded:"Yorum eklendi",commentFailed:"Yorum eklenemedi",commentDeleted:"Yorum silindi",commentDeleteFailed:"Yorum silinemedi",deleteComment:"Yorumu sil",endOfFeed:"Akn sonuna ulatnz",loadingMore:"Daha fazla ykleniyor..."},profile:{title:"Profil",manageAccount:"Hesap ayarlarnz ynetin",userProfile:"Kullanc Profili",changeAvatar:"Avatar deitir",uploading:"Ykleniyor...",publicDreams:"Herkese Ak Ryalar",likesReceived:"Alnan Beeniler",comments:"Yorumlar",followers:"Takipiler",following:"Takip Edilenler",email:"E-posta",memberSince:"yelik Tarihi",editProfile:"Profili Dzenle",saveChanges:"Deiiklikleri Kaydet",cancel:"ptal",follow:"Takip Et",followingButton:"Takip Ediliyor",publicDreamsTitle:"Herkese Ak Ryalar",noPublicDreams:"Henz herkese ak rya yok",profileSaved:"Profil baaryla kaydedildi",profileSaveFailed:"Profil kaydedilemedi",avatarUploaded:"Avatar baaryla yklendi",avatarUploadFailed:"Avatar yklenemedi",followSuccess:"Bu kullancy takip ediyorsunuz",unfollowSuccess:"Bu kullancy takipten ktnz",followFailed:"Takip durumu gncellenemedi",bioPlaceholder:"Bir biyografi yazn...",message:"Mesaj"},dashboard:{title:"Kontrol Paneli",subtitle:"Rya analizi yolculuunuzun genel bak",totalDreams:"Toplam Rya",completedAnalyses:"Tamamlanan Analizler",pendingAnalyses:"Bekleyen Analizler",analyzeNewDream:"Yeni Rya Analiz Et",analyzeNewDreamDesc:"Gizli anlamlarn kefetmek iin yeni bir rya analiz etmeye balayn",viewLibrary:"Ktphaneyi Grntle",viewLibraryDesc:"Analiz edilmi ryalarnzn tam koleksiyonunu gzden geirin",recentDreams:"Son Ryalar",viewAll:"Tmn Gr",noDreams:"Henz rya yok",analyzeFirstDream:"lk Ryanz Analiz Edin"},contact:{title:"letiim",subtitle:"Sorularnz m var? Sizden haber almak isteriz",emailSupport:"E-posta Destei",liveChat:"Canl Sohbet",available:"Yardm iin 7/24 ulalabilir",sendMessage:"Bize Mesaj Gnderin",name:"sim",email:"E-posta",subject:"Konu",message:"Mesaj",send:"Mesaj Gnder",thankYou:"Mesajnz iin teekkr ederiz! En ksa srede size geri dneceiz.",namePlaceholder:"sminiz",emailPlaceholder:"eposta@ornek.com",subjectPlaceholder:"Bu ne hakknda?",messagePlaceholder:"Bize daha fazla bilgi verin..."},auth:{welcomeBack:"Tekrar Ho Geldiniz",createAccount:"Hesap Olutur",continueExploring:"Ryalarnz kefetmeye devam edin",startJourney:"Bilinaltna yolculuunuza balayn",signIn:"Giri Yap",signUp:"Kaydol",fullName:"Ad Soyad",email:"E-posta",password:"ifre",orContinueWith:"Veya ununla devam et",googleSignIn:"Google ile giri yap",enterFullName:"Ad soyadnz girin",enterEmail:"eposta@ornek.com",enterPassword:"ifrenizi girin",creatingAccount:"Hesap oluturuluyor...",signingIn:"Giri yaplyor...",checkEmail:"E-postanz kontrol edin",confirmationSent:"Size bir onay linki gnderdik. Hesabnz dorulamak iin ltfen e-postanz kontrol edin.",validationRequired:"Ltfen bu alan doldurun",validationEmail:"Ltfen geerli bir e-posta adresi girin",emailAlreadyExists:"Bu e-posta adresi zaten kaytl. Ltfen giri yapn veya farkl bir e-posta kullann.",invalidCredentials:"Geersiz e-posta veya ifre. Ltfen tekrar deneyin."},settings:{title:"Ayarlar",blockedUsers:"Engellenen Kullanclar",privacy:"Gizlilik",notifications:"Bildirimler",blockedUsersDesc:"Engellediiniz kullanclar size mesaj gnderemez veya ieriinizle etkileime geemez.",noBlockedUsers:"Engellenen kullanc yok",unblock:"Engeli Kaldr",unblockConfirm:"Engelini kaldrmak istediinizden emin misiniz",unblockSuccess:"engelinden karld",privacyDesc:"eriinizi kimlerin grebileceini ve sizinle etkileime girebileceini kontrol edin.",profileVisibility:"Profil Grnrl",allowMessagesFrom:"Mesaj Gnderebilecekler",public:"Herkese Ak",private:"zel",everyone:"Herkes",followingOnly:"Sadece Takip Ettiklerim",notificationsDesc:"Almak istediiniz bildirimleri sein.",likesOnDreams:"Rya Beenileri",comments:"Yorumlar",newFollowers:"Yeni Takipiler",directMessages:"Dorudan Mesajlar",favorites:"Favoriler",favoritesDesc:"Favori arkadalarnz. Bu kullanclarn ryalar ncelikli olarak gsterilir.",noFavorites:"Henz favori arkadanz yok",remove:"kar"},messages:{title:"Mesajlar",searchPlaceholder:"Kullanc ara...",noMessages:"Henz mesaj yok",searchToStart:"Sohbet balatmak iin kullanc arayn",typePlaceholder:"Mesaj yazn...",loading:"Ykleniyor...",loadingUser:"Kullanc ykleniyor...",searchResults:"Arama Sonular",searching:"Aranyor..."},pricing:{title:"Basit ve effaf Fiyatlandrma",subtitle:"Rya analizi yolculuunuz iin mkemmel plan sein",freeTrial:{title:"cretsiz Deneme",price:"cretsiz",description:"Submirra'nn neler yapabileceini kefetmek iin mkemmel",feature1:"3 gn eriim",feature2:"Toplam 3 rya analizi",feature3:"",cta:"cretsiz Deneyin",signUp:"cretsiz Kaydol"},standard:{title:"Standart",price:"450",period:"ay",description:"Dzenli rya gnl ve igrler iin harika",feature1:"Gnde 5 rya analizi",feature2:"Analiz bana 1 grselletirme",feature3:"Aylk 10 analiz kaydetme",feature4:"Gelimi analiz",feature5:"Her ay yeni depolama alan",cta:"Standart Al"},premium:{badge:"En Popler",title:"Premium",price:"900",period:"ay",description:"Snrsz ktphane ve oklu grselletirmelerle bilinaltnzn kilidini tamamen an",feature1:"Gnde 10 rya analizi",feature2:"Analiz bana 3 grselletirme",feature3:"Snrsz ktphane depolama",feature4:"ncelikli analiz",feature5:"Rya gemiinizi asla kaybetmeyin",cta:"Premium Ol"},whySubmirra:{title:"Neden Submirra?",description:"Submirra, bilinalt zihniniz, duygusal durumunuz ve i arzularnz hakknda gizli anlamlar ortaya karmak iin son teknoloji analiz teknolojisini kullanr. Her analiz, ryanzn zn yakalayan benzersiz srreal grselletirmeler ile gelir."}},trial:{activateTitle:"3 Gnlk cretsiz Denemenizi Etkinletirin",activateDesc:"Submirra'nn tm gcn 3 gn boyunca snrsz eriimle deneyimleyin",activateNow:"cretsiz Denemeyi Balat",activating:"Etkinletiriliyor...",activated:"Deneme Etkinletirildi!",activatedDesc:"3 gnlk cretsiz denemeniz baaryla etkinletirildi.",enjoy3Days:"3 gn boyunca snrsz rya analizi ve igrlerin tadn karn!",alreadyUsed:"Deneme Zaten Kullanld",alreadyUsedDesc:"cretsiz denemenizi zaten kullandnz. Submirra'nn keyfini karmaya devam etmek iin cretli bir plana ykseltin.",viewPlans:"Planlar Grntle",whatsIncluded:"Neler Dahil:",feature1:"Tm zelliklere 3 gn tam eriim",feature2:"Yapay zeka destekli 3 rya analizi",feature3:"Ryalarnz iin gzel grselletirmeler",duration:"Sre",threeDays:"3 Gn",analyses:"Analizler",threeAnalyses:"3 Rya",features:"zellikler",fullAccess:"Tam Eriim",startAnalyzing:"Rya Analizine Bala",trialExpired:"Deneme Sresi Doldu",trialExpiredDesc:"3 gnlk cretsiz denemeniz sona erdi. Devam etmek iin ykseltin."}}},Pf=j.createContext(void 0);function Fv({children:e}){const[t,r]=j.useState("en");return a.jsx(Pf.Provider,{value:{language:t,setLanguage:r,t:Mv[t]},children:e})}function Ve(){const e=j.useContext(Pf);if(!e)throw new Error("useLanguage must be used within LanguageProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),M=(e,t)=>{const r=j.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...u},d)=>j.createElement("svg",{ref:d,...Bv,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:["lucide",`lucide-${qv(e)}`,o].join(" "),...u},[...t.map(([h,p])=>j.createElement(h,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=M("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=M("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=M("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=M("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=M("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=M("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=M("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=M("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=M("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=M("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=M("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=M("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=M("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=M("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=M("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=M("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=M("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=M("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=M("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=M("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=M("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=M("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=M("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=M("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=M("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=M("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=M("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=M("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=M("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=M("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=M("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=M("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=M("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=M("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=M("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=M("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=M("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=M("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=M("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=M("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=M("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=M("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=M("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=M("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=M("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=M("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=M("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=M("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),If=j.createContext(void 0);function py({children:e}){const[t,r]=j.useState([]),n=(o,c="info",u=4e3)=>{const d=Math.random().toString(36).substring(7),h={id:d,message:o,type:c,duration:u};r(p=>[...p,h]),u>0&&setTimeout(()=>{s(d)},u)},s=o=>{r(c=>c.filter(u=>u.id!==o))},i=o=>{switch(o){case"success":return a.jsx(Kv,{className:"text-green-400",size:20});case"error":return a.jsx(Hv,{className:"text-red-400",size:20});case"warning":return a.jsx(Wv,{className:"text-yellow-400",size:20});default:return a.jsx(ty,{className:"text-blue-400",size:20})}},l=o=>{switch(o){case"success":return"bg-green-500/10 border-green-500/30 text-green-400";case"error":return"bg-red-500/10 border-red-500/30 text-red-400";case"warning":return"bg-yellow-500/10 border-yellow-500/30 text-yellow-400";default:return"bg-blue-500/10 border-blue-500/30 text-blue-400"}};return a.jsxs(If.Provider,{value:{showToast:n},children:[e,a.jsx("div",{className:"fixed top-20 right-4 z-[100] flex flex-col gap-2 max-w-md w-full",children:t.map(o=>a.jsxs("div",{className:`${l(o.type)} border rounded-lg p-4 backdrop-blur-sm shadow-lg animate-slide-in-right flex items-start gap-3`,children:[i(o.type),a.jsx("p",{className:"flex-1 text-sm font-medium",children:o.message}),a.jsx("button",{onClick:()=>s(o.id),className:"text-slate-400 hover:text-slate-200 transition-colors",children:a.jsx($t,{size:16})})]},o.id))})]})}function Yr(){const e=j.useContext(If);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const hc=j.createContext(void 0);function my({children:e}){const[t,r]=j.useState("/");j.useEffect(()=>{const i=()=>{const o=window.location.pathname,c=o.split("/")[1];c===""||c===void 0?r("/"):o.startsWith("/profile/")?r("/profile"):r(`/${c}`),window.scrollTo(0,0)};i();const l=()=>{i()};return window.addEventListener("popstate",l),()=>{window.removeEventListener("popstate",l)}},[]);const n=i=>{if(i.startsWith("/profile/"))window.history.pushState({},"",i),r("/profile");else if(i.includes("?")){const l=i.split("?")[0];window.history.pushState({},"",i),r(l)}else window.history.pushState({},"",i),r(i);window.scrollTo(0,0)},s=i=>{const l=window.location.pathname;return i==="userId"&&l.startsWith("/profile/")&&l.split("/")[2]||null};return a.jsx(hc.Provider,{value:{currentPage:t,navigate:n,getUrlParam:s},children:e})}function ot(){const e=j.useContext(hc);if(!e)throw new Error("useNavigate must be used within RouterProvider");return e.navigate}function fc(){const e=j.useContext(hc);if(!e)throw new Error("useCurrentPage must be used within RouterProvider");return e.currentPage}function gy(){const e=ot();return a.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-1 hover:opacity-80 transition-opacity cursor-pointer",children:[a.jsx("div",{className:"relative w-10 h-10 overflow-visible flex items-center justify-center",children:a.jsx("img",{src:"/br.png",alt:"Submirra Logo",className:"w-16 h-16 object-contain scale-150"})}),a.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:"Submirra"})]})}function Hu(){const{language:e,setLanguage:t}=Ve();return a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-900/50 border border-purple-500/20",children:[a.jsx(Zv,{size:16,className:"text-slate-400"}),a.jsx("button",{onClick:()=>t("en"),className:`px-2 py-1 rounded text-xs font-medium transition-all duration-200 ${e==="en"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:"EN"}),a.jsx("button",{onClick:()=>t("tr"),className:`px-2 py-1 rounded text-xs font-medium transition-all duration-200 ${e==="tr"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:"TR"})]})}function vy(){const{user:e}=lt(),t=ot(),{showToast:r}=Yr(),[n,s]=j.useState([]),[i,l]=j.useState(0),[o,c]=j.useState(!1),[u,d]=j.useState(!1);j.useEffect(()=>{if(!e)return;h();const f=T.channel("notifications-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},()=>{h()}).subscribe();return()=>{T.removeChannel(f)}},[e]);const h=async()=>{if(e)try{d(!0);const{data:f,error:x}=await T.from("notifications").select(`
          *,
          actor_profile:actor_id (
            full_name,
            avatar_url,
            username
          )
        `).eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(x)throw x;const S=(f||[]).map(y=>({...y,actor_profile:y.actor_profile||{full_name:"Anonymous",avatar_url:null,username:null}}));s(S),l(S.filter(y=>!y.read_at).length)}catch(f){console.error("Error loading notifications:",f)}finally{d(!1)}},p=async f=>{if(e)try{const{error:x}=await T.from("notifications").update({read_at:new Date().toISOString()}).eq("id",f);if(x)throw x;s(S=>S.map(y=>y.id===f?{...y,read_at:new Date().toISOString()}:y)),l(S=>Math.max(0,S-1))}catch(x){console.error("Error marking notification as read:",x)}},v=async(f,x)=>{if(x.stopPropagation(),!!e)try{const{error:S}=await T.from("notifications").delete().eq("id",f);if(S)throw S;const y=n.find(b=>b.id===f);s(b=>b.filter(_=>_.id!==f)),y&&!y.read_at&&l(b=>Math.max(0,b-1))}catch(S){console.error("Error deleting notification:",S),r("Failed to delete notification","error")}},w=async()=>{if(e)try{const{error:f}=await T.from("notifications").update({read_at:new Date().toISOString()}).eq("user_id",e.id).is("read_at",null);if(f)throw f;s(x=>x.map(S=>({...S,read_at:S.read_at||new Date().toISOString()}))),l(0),r("All notifications marked as read","success")}catch(f){console.error("Error marking all as read:",f),r("Failed to mark all as read","error")}},N=f=>{p(f.id),c(!1),f.dream_id?t("/social"):f.type==="follow"&&t(`/profile/${f.actor_id}`)},z=f=>{switch(f){case"like":return a.jsx(wr,{className:"text-pink-400",size:18});case"comment":return a.jsx(br,{className:"text-purple-400",size:18});case"follow":return a.jsx(dc,{className:"text-cyan-400",size:18});default:return a.jsx(ji,{className:"text-slate-400",size:18})}},g=f=>{const x=f.actor_profile.full_name||f.actor_profile.username||"Someone";switch(f.type){case"like":return`${x} liked your dream`;case"comment":return`${x} commented on your dream`;case"follow":return`${x} started following you`;default:return"New notification"}},m=f=>{const x=new Date(f),S=new Date,y=S.getTime()-x.getTime(),b=Math.floor(y/6e4),_=Math.floor(b/60),L=Math.floor(_/24);return b<1?"Just now":b<60?`${b}m ago`:_<24?`${_}h ago`:L<7?`${L}d ago`:x.toLocaleDateString("en-US",{month:"short",day:"numeric",year:x.getFullYear()!==S.getFullYear()?"numeric":void 0})};return e?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>c(!o),className:"relative p-2 text-slate-400 hover:text-purple-400 transition-colors",children:[a.jsx(ji,{size:20}),i>0&&a.jsx("span",{className:"absolute top-0 right-0 w-5 h-5 bg-pink-500 rounded-full text-white text-xs flex items-center justify-center font-bold",children:i>9?"9+":i})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),a.jsxs("div",{className:"absolute right-0 top-12 w-96 max-h-[600px] bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),a.jsxs("div",{className:"flex gap-2",children:[i>0&&a.jsx("button",{onClick:w,className:"text-xs text-purple-400 hover:text-purple-300 transition-colors",children:"Mark all read"}),a.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx($t,{size:18})})]})]}),a.jsx("div",{className:"overflow-y-auto flex-1",children:u?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(je,{className:"animate-spin text-purple-400",size:24})}):n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ji,{className:"mx-auto mb-4 text-slate-600",size:48}),a.jsx("p",{className:"text-slate-400",children:"No notifications yet"})]}):a.jsx("div",{className:"divide-y divide-purple-500/10",children:n.map(f=>a.jsxs("div",{className:`relative group ${f.read_at?"":"bg-purple-500/5"}`,children:[a.jsx("button",{onClick:()=>N(f),className:"w-full p-4 text-left hover:bg-slate-950/50 transition-colors",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:z(f.type)}),a.jsxs("div",{className:"flex-1 min-w-0 pr-6",children:[a.jsx("p",{className:"text-white text-sm mb-1",children:g(f)}),a.jsx("p",{className:"text-slate-400 text-xs",children:m(f.created_at)})]}),!f.read_at&&a.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full flex-shrink-0 mt-2"})]})}),a.jsx("button",{onClick:x=>v(f.id,x),className:"absolute top-2 right-2 p-1.5 text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",title:"Delete notification",children:a.jsx($t,{size:14})})]},f.id))})})]})]})]}):null}function yy(){const{user:e}=lt(),{showToast:t}=Yr(),{t:r}=Ve(),[n,s]=j.useState(!1),[i,l]=j.useState("blocked"),[o,c]=j.useState([]),[u,d]=j.useState([]),[h,p]=j.useState(!1);j.useEffect(()=>{n&&e&&(v(),w())},[n,e]);const v=async()=>{if(e){p(!0);try{console.log("Loading blocked users for user:",e.id);const{data:g,error:m}=await T.from("user_blocks").select("id, blocked_id").eq("blocker_id",e.id);if(m)throw console.error("Error loading blocks:",m),m;if(console.log("Found blocks:",g),!g||g.length===0){c([]);return}const f=g.map(b=>b.blocked_id),{data:x,error:S}=await T.from("profiles").select("id, full_name, username, avatar_url").in("id",f);if(S)throw console.error("Error loading profiles:",S),S;console.log("Found profiles:",x);const y=g.map(b=>{const _=x==null?void 0:x.find(L=>L.id===b.blocked_id);return{id:b.id,blocked_id:b.blocked_id,blocked_user:_||{id:b.blocked_id,full_name:"Unknown User",username:null,avatar_url:null}}}).filter(b=>b.blocked_user);console.log("Final formatted data:",y),c(y)}catch(g){console.error("Error loading blocked users:",g),t("Failed to load blocked users","error")}finally{p(!1)}}},w=async()=>{if(e){p(!0);try{console.log("Loading favorite users for user:",e.id);const{data:g,error:m}=await T.from("user_favorites").select("id, favorite_user_id").eq("user_id",e.id);if(m)throw console.error("Error loading favorites:",m),m;if(console.log("Found favorites:",g),!g||g.length===0){d([]);return}const f=g.map(b=>b.favorite_user_id),{data:x,error:S}=await T.from("profiles").select("id, full_name, username, avatar_url").in("id",f);if(S)throw console.error("Error loading profiles:",S),S;console.log("Found profiles:",x);const y=g.map(b=>{const _=x==null?void 0:x.find(L=>L.id===b.favorite_user_id);return{id:b.id,favorite_user_id:b.favorite_user_id,favorite_user:_||{id:b.favorite_user_id,full_name:"Unknown User",username:null,avatar_url:null}}}).filter(b=>b.favorite_user);console.log("Final formatted favorites data:",y),d(y)}catch(g){console.error("Error loading favorite users:",g),t("Failed to load favorite users","error")}finally{p(!1)}}},N=async(g,m)=>{if(e&&confirm(`${r.settings.unblockConfirm} ${m}?`))try{const{error:f}=await T.from("user_blocks").delete().eq("id",g);if(f)throw f;c(x=>x.filter(S=>S.id!==g)),t(`${m} ${r.settings.unblockSuccess}`,"success")}catch(f){console.error("Error unblocking user:",f),t("Failed to unblock user","error")}},z=async(g,m)=>{if(e&&confirm(`${m} kullancsn favorilerden karmak istediinizden emin misiniz?`))try{const{error:f}=await T.from("user_favorites").delete().eq("id",g);if(f)throw f;d(x=>x.filter(S=>S.id!==g)),t(`${m} favorilerden karld`,"success")}catch(f){console.error("Error removing favorite:",f),t("Favori kaldrlamad","error")}};return e?a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>s(!n),className:"relative p-2 text-slate-400 hover:text-purple-400 transition-colors",title:r.settings.title,children:a.jsx(cy,{size:20})}),n&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),a.jsxs("div",{className:"absolute right-0 top-12 w-[600px] h-[calc(90vh-3rem)] bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"px-6 py-3 border-b border-purple-500/20 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:r.settings.title}),a.jsx("button",{onClick:()=>s(!1),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx($t,{size:18})})]}),a.jsxs("div",{className:"flex border-b border-purple-500/20",children:[a.jsxs("button",{onClick:()=>l("blocked"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${i==="blocked"?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-white"}`,children:[a.jsx(lo,{size:14,className:"inline mr-1.5"}),r.settings.blockedUsers]}),a.jsxs("button",{onClick:()=>l("favorites"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${i==="favorites"?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-white"}`,children:[a.jsx(oo,{size:14,className:"inline mr-1.5"}),r.settings.favorites]}),a.jsxs("button",{onClick:()=>l("privacy"),className:`flex-1 px-2 py-2 text-sm font-medium transition-colors ${i==="privacy"?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-white"}`,children:[a.jsx(ry,{size:14,className:"inline mr-1.5"}),r.settings.privacy]}),a.jsxs("button",{onClick:()=>l("notifications"),className:`flex-1 px-2 py-2 text-sm font-medium transition-colors ${i==="notifications"?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-white"}`,children:[a.jsx(ji,{size:14,className:"inline mr-1.5"}),r.settings.notifications]})]}),a.jsxs("div",{className:"flex-1 px-6 py-3 overflow-hidden",children:[i==="blocked"&&a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-400 text-xs mb-3",children:r.settings.blockedUsersDesc}),h?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(je,{className:"animate-spin text-purple-400",size:24})}):o.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(lo,{className:"mx-auto mb-3 text-slate-600",size:40}),a.jsx("p",{className:"text-slate-400",children:r.settings.noBlockedUsers})]}):a.jsx("div",{className:"space-y-2 max-h-[calc(90vh-20rem)] overflow-y-auto",children:o.map(g=>a.jsxs("div",{className:"flex items-center gap-3 p-2.5 bg-slate-950/30 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:g.blocked_user.avatar_url?a.jsx("img",{src:g.blocked_user.avatar_url,alt:"",className:"w-full h-full object-cover"}):a.jsx(_e,{size:20,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white font-medium text-sm",children:g.blocked_user.full_name}),g.blocked_user.username&&a.jsxs("p",{className:"text-slate-400 text-xs",children:["@",g.blocked_user.username]})]}),a.jsx("button",{onClick:()=>N(g.id,g.blocked_user.full_name),className:"px-3 py-1.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white text-sm transition-colors",children:r.settings.unblock})]},g.id))})]}),i==="favorites"&&a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-400 text-xs mb-3",children:r.settings.favoritesDesc}),h?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(je,{className:"animate-spin text-purple-400",size:24})}):u.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(oo,{className:"mx-auto mb-3 text-slate-600",size:40}),a.jsx("p",{className:"text-slate-400",children:r.settings.noFavorites})]}):a.jsx("div",{className:"space-y-2 max-h-[calc(90vh-20rem)] overflow-y-auto",children:u.map(g=>a.jsxs("div",{className:"flex items-center gap-3 p-2.5 bg-slate-950/30 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center overflow-hidden",children:g.favorite_user.avatar_url?a.jsx("img",{src:g.favorite_user.avatar_url,alt:"",className:"w-full h-full object-cover"}):a.jsx(_e,{size:20,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white font-medium text-sm",children:g.favorite_user.full_name}),g.favorite_user.username&&a.jsxs("p",{className:"text-slate-400 text-xs",children:["@",g.favorite_user.username]})]}),a.jsx("button",{onClick:()=>z(g.id,g.favorite_user.full_name),className:"px-3 py-1.5 rounded-lg bg-red-600 hover:bg-red-500 text-white text-sm transition-colors",children:r.settings.remove})]},g.id))})]}),i==="privacy"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-slate-400 text-xs mb-3",children:r.settings.privacyDesc}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"p-2.5 bg-slate-950/30 rounded-lg",children:a.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[a.jsx("span",{className:"text-white text-sm",children:r.settings.profileVisibility}),a.jsxs("select",{className:"bg-slate-800 border border-purple-500/30 rounded px-3 py-1.5 text-white text-sm",children:[a.jsx("option",{children:r.settings.public}),a.jsx("option",{children:r.settings.private})]})]})}),a.jsx("div",{className:"p-2.5 bg-slate-950/30 rounded-lg",children:a.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[a.jsx("span",{className:"text-white text-sm",children:r.settings.allowMessagesFrom}),a.jsxs("select",{className:"bg-slate-800 border border-purple-500/30 rounded px-3 py-1.5 text-white text-sm",children:[a.jsx("option",{children:r.settings.everyone}),a.jsx("option",{children:r.settings.followingOnly})]})]})})]})]}),i==="notifications"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-slate-400 text-xs mb-3",children:r.settings.notificationsDesc}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-slate-950/30 rounded-lg cursor-pointer",children:[a.jsx("span",{className:"text-white text-sm",children:r.settings.likesOnDreams}),a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),a.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-slate-950/30 rounded-lg cursor-pointer",children:[a.jsx("span",{className:"text-white text-sm",children:r.settings.comments}),a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),a.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-slate-950/30 rounded-lg cursor-pointer",children:[a.jsx("span",{className:"text-white text-sm",children:r.settings.newFollowers}),a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),a.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-slate-950/30 rounded-lg cursor-pointer",children:[a.jsx("span",{className:"text-white text-sm",children:r.settings.directMessages}),a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})]})]})]})]})]})]}):null}function xy(){const e=ot(),t=fc(),{user:r,signOut:n}=lt(),{t:s}=Ve(),[i,l]=j.useState(!1),[o,c]=j.useState(null),u=[{label:s.nav.home,path:"/"},{label:s.nav.about,path:"/about"},{label:s.nav.social,path:"/social"},{label:s.nav.analyze,path:"/analyze"},{label:s.nav.library,path:"/library"}],d=r?[{label:s.nav.dashboard,path:"/dashboard"},{label:s.nav.contact,path:"/contact"}]:[{label:s.nav.contact,path:"/contact"}],h=p=>{e(p),l(!1)};return j.useEffect(()=>{r?(async()=>{try{const{data:v,error:w}=await T.from("profiles").select("avatar_url, full_name").eq("id",r.id).single();if(w){console.error("Error loading user profile:",w);return}c(v)}catch(v){console.error("Error loading user profile:",v)}})():c(null)},[r]),a.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-slate-950/90 backdrop-blur-xl border-b border-pink-500/20 shadow-lg shadow-pink-500/5",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("div",{className:"flex items-center flex-shrink-0",children:a.jsx(gy,{})}),a.jsxs("div",{className:"hidden lg:flex items-center gap-4 flex-shrink-0 whitespace-nowrap ml-12",children:[u.map(p=>a.jsxs("button",{onClick:()=>e(p.path),className:`text-sm font-medium transition-all duration-300 hover:text-pink-400 relative group ${t===p.path?"text-pink-400 drop-shadow-[0_0_8px_rgba(236,72,153,0.6)]":"text-slate-300"}`,children:[p.label,a.jsx("span",{className:`absolute bottom-0 left-0 w-0 h-0.5 bg-pink-400 transition-all duration-300 group-hover:w-full ${t===p.path?"w-full":""}`})]},p.path)),d.map(p=>a.jsxs("button",{onClick:()=>e(p.path),className:`text-sm font-medium transition-all duration-300 hover:text-pink-400 relative group ${t===p.path?"text-pink-400 drop-shadow-[0_0_8px_rgba(236,72,153,0.6)]":"text-slate-300"}`,children:[p.label,a.jsx("span",{className:`absolute bottom-0 left-0 w-0 h-0.5 bg-pink-400 transition-all duration-300 group-hover:w-full ${t===p.path?"w-full":""}`})]},p.path)),a.jsx("button",{onClick:()=>e("/pricing"),className:`px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-lg hover:shadow-pink-500/30 hover:scale-105 ${t==="/pricing"?"ring-2 ring-pink-400":""}`,children:s.nav.buy}),a.jsx(Hu,{}),r?a.jsxs(a.Fragment,{children:[a.jsx(yy,{}),a.jsx(vy,{}),a.jsx("button",{onClick:()=>e("/messages"),className:"relative p-2 text-slate-400 hover:text-purple-400 transition-colors",title:s.nav.messages,children:a.jsx(iy,{size:20})}),a.jsx("button",{onClick:()=>e("/profile"),className:"flex items-center gap-2 p-1 rounded-full bg-slate-800/50 hover:bg-slate-700/50 transition-all duration-200 group",title:(o==null?void 0:o.full_name)||"Profile",children:a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden group-hover:border-pink-500/50 transition-all",children:o!=null&&o.avatar_url?a.jsx("img",{src:o.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):a.jsx(_e,{className:"text-pink-400",size:16})})}),a.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 transition-all duration-200",children:[a.jsx(qu,{size:16}),s.nav.signOut]})]}):a.jsx("button",{onClick:()=>e("/signin"),className:`px-6 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 hover:shadow-lg hover:shadow-pink-500/30 ${t==="/signin"?"ring-2 ring-pink-400":""}`,children:s.nav.signIn})]}),a.jsxs("div",{className:"flex lg:hidden items-center gap-3",children:[a.jsx(Hu,{}),a.jsx("button",{onClick:()=>l(!i),className:"text-slate-300 hover:text-pink-400 transition-colors p-2","aria-label":"Toggle menu",children:i?a.jsx($t,{size:24}):a.jsx(sy,{size:24})})]})]}),i&&a.jsx("div",{className:"lg:hidden mt-4 pb-4 border-t border-pink-500/20 pt-4",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[u.map(p=>a.jsx("button",{onClick:()=>h(p.path),className:`text-left px-4 py-2 rounded-lg font-medium transition-all duration-200 ${t===p.path?"bg-pink-500/10 text-pink-400":"text-slate-300 hover:bg-slate-800/50 hover:text-pink-400"}`,children:p.label},p.path)),d.map(p=>a.jsx("button",{onClick:()=>h(p.path),className:`text-left px-4 py-2 rounded-lg font-medium transition-all duration-200 ${t===p.path?"bg-pink-500/10 text-pink-400":"text-slate-300 hover:bg-slate-800/50 hover:text-pink-400"}`,children:p.label},p.path)),a.jsx("button",{onClick:()=>{e("/pricing"),l(!1)},className:`text-left px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 ${t==="/pricing"?"ring-2 ring-pink-400":""}`,children:s.nav.buy}),r?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{e("/profile"),l(!1)},className:"flex items-center gap-3 px-4 py-2 rounded-lg bg-slate-800/50 text-slate-300 hover:bg-slate-800/70 hover:text-pink-400 transition-all duration-200",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden",children:o!=null&&o.avatar_url?a.jsx("img",{src:o.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):a.jsx(_e,{className:"text-pink-400",size:12})}),(o==null?void 0:o.full_name)||"Profile"]}),a.jsxs("button",{onClick:()=>{n(),l(!1)},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 transition-all duration-200",children:[a.jsx(qu,{size:16}),s.nav.signOut]})]}):a.jsx("button",{onClick:()=>{e("/signin"),l(!1)},className:`text-left px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 ${t==="/signin"?"ring-2 ring-pink-400":""}`,children:s.nav.signIn})]})})]})})}function wy(){const e=j.useRef(null);return j.useEffect(()=>{const t=e.current;if(!t)return;const r=t.getContext("2d");if(!r)return;let n,s=[];const i=()=>{t.width=window.innerWidth,t.height=window.innerHeight,l()},l=()=>{s=[];const d=Math.floor(t.width*t.height/3e3);for(let h=0;h<d;h++)s.push({x:Math.random()*t.width,y:Math.random()*t.height,z:Math.random()*3,size:Math.random()*1.5+.5,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3})},o=()=>{s.forEach(d=>{d.x+=d.vx,d.y+=d.vy,d.x<0&&(d.x=t.width),d.x>t.width&&(d.x=0),d.y<0&&(d.y=t.height),d.y>t.height&&(d.y=0)})},c=()=>{r.clearRect(0,0,t.width,t.height),s.forEach(d=>{const h=.3+d.z/3*.7;r.fillStyle=`rgba(255, 255, 255, ${h})`,r.beginPath(),r.arc(d.x,d.y,d.size,0,Math.PI*2),r.fill(),Math.random()>.998&&(r.shadowBlur=10,r.shadowColor=d.z>2?"#ec4899":d.z>1?"#a855f7":"#06b6d4",r.fill(),r.shadowBlur=0)})},u=()=>{o(),c(),n=requestAnimationFrame(u)};return i(),u(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i),cancelAnimationFrame(n)}},[]),a.jsx("canvas",{ref:e,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:.4}})}function Wu(){const e=ot(),{user:t}=lt(),{t:r}=Ve();return a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-pink-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-20 left-1/3 w-80 h-80 bg-cyan-500/5 rounded-full blur-3xl"})]}),a.jsx("div",{className:"relative pt-24 md:pt-32 pb-16 md:pb-20 px-4 md:px-6 z-10",children:a.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[a.jsxs("div",{className:"mb-6 md:mb-8 inline-block animate-fade-in",children:[a.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:r.home.title}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-slate-300 font-light tracking-wide px-2",children:r.home.subtitle})]}),a.jsx("p",{className:"text-base md:text-lg text-slate-400 max-w-3xl mx-auto mb-8 md:mb-12 leading-relaxed px-4",children:r.home.description}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[a.jsxs("button",{onClick:()=>e(t?"/analyze":"/signin"),className:"group px-8 md:px-10 py-4 md:py-5 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold text-base md:text-lg hover:from-pink-500 hover:to-purple-500 transition-all duration-300 flex items-center gap-2",children:[t?r.home.cta:r.home.getStarted,a.jsx(Af,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx("button",{onClick:()=>e("/about"),className:"px-8 md:px-10 py-4 md:py-5 rounded-lg bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 text-slate-300 font-semibold text-base md:text-lg hover:border-purple-500/50 hover:text-white transition-all duration-300",children:r.home.learnMore})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 mt-12 md:mt-24 max-w-5xl mx-auto",children:[a.jsxs("div",{className:"group bg-slate-900/70 backdrop-blur-sm border-2 border-pink-500/30 rounded-2xl p-6 hover:border-pink-500/60 hover:shadow-xl hover:shadow-pink-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-pink-500/30 to-pink-600/20 flex items-center justify-center border-2 border-pink-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-pink-500/40 group-hover:border-pink-400/60",children:a.jsx(Df,{className:"w-8 h-8 text-pink-400 group-hover:text-pink-300 transition-colors"})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-pink-100 transition-colors",children:r.home.feature1Title}),a.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-4 group-hover:text-slate-200 transition-colors",children:r.home.feature1Desc}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:r.home.feature1Details.split("  ").map((n,s)=>a.jsx("div",{className:"px-3 py-2 bg-pink-500/20 text-pink-300 text-xs font-medium rounded-lg border border-pink-500/30 group-hover:bg-pink-500/30 group-hover:border-pink-400/50 transition-all text-center",children:n},s))}),a.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[a.jsx($f,{className:"w-4 h-4 text-pink-400"}),a.jsx(Yv,{className:"w-4 h-4 text-pink-400"}),a.jsx(Zi,{className:"w-4 h-4 text-pink-400"})]})]})]}),a.jsxs("div",{className:"group bg-slate-900/70 backdrop-blur-sm border-2 border-purple-500/30 rounded-2xl p-6 hover:border-purple-500/60 hover:shadow-xl hover:shadow-purple-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-500/30 to-purple-600/20 flex items-center justify-center border-2 border-purple-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-purple-500/40 group-hover:border-purple-400/60",children:a.jsx(Bu,{className:"w-8 h-8 text-purple-400 group-hover:text-purple-300 transition-colors"})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-purple-100 transition-colors",children:r.home.feature2Title}),a.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-4 group-hover:text-slate-200 transition-colors",children:r.home.feature2Desc}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:r.home.feature2Details.split("  ").map((n,s)=>a.jsx("div",{className:"px-3 py-2 bg-purple-500/20 text-purple-300 text-xs font-medium rounded-lg border border-purple-500/30 group-hover:bg-purple-500/30 group-hover:border-purple-400/50 transition-all text-center",children:n},s))}),a.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[a.jsx(ay,{className:"w-4 h-4 text-purple-400"}),a.jsx(Jt,{className:"w-4 h-4 text-purple-400"}),a.jsx(Bu,{className:"w-4 h-4 text-purple-400"})]})]})]}),a.jsxs("div",{className:"group bg-slate-900/70 backdrop-blur-sm border-2 border-cyan-500/30 rounded-2xl p-6 hover:border-cyan-500/60 hover:shadow-xl hover:shadow-cyan-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-cyan-500/30 to-cyan-600/20 flex items-center justify-center border-2 border-cyan-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-cyan-500/40 group-hover:border-cyan-400/60",children:a.jsx(Vr,{className:"w-8 h-8 text-cyan-400 group-hover:text-cyan-300 transition-colors"})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-cyan-100 transition-colors",children:r.home.feature3Title}),a.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-4 group-hover:text-slate-200 transition-colors",children:r.home.feature3Desc}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:r.home.feature3Details.split("  ").map((n,s)=>a.jsx("div",{className:"px-3 py-2 bg-cyan-500/20 text-cyan-300 text-xs font-medium rounded-lg border border-cyan-500/30 group-hover:bg-cyan-500/30 group-hover:border-cyan-400/50 transition-all text-center",children:n},s))}),a.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[a.jsx(Qv,{className:"w-4 h-4 text-cyan-400"}),a.jsx(Zi,{className:"w-4 h-4 text-cyan-400"}),a.jsx(Vr,{className:"w-4 h-4 text-cyan-400"})]})]})]})]})]})})]})}function by(){const{t:e}=Ve();return a.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-40 left-20 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-pink-500/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[a.jsxs("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.about.title}),a.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:e.about.subtitle})]}),a.jsxs("div",{className:"space-y-6 md:space-y-12",children:[a.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-2xl p-5 md:p-8 hover:border-pink-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-pink-500/10 hover:-translate-y-1 animate-fade-in-delay",children:a.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[a.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-pink-500/20 to-pink-600/20 flex items-center justify-center border border-pink-500/30 flex-shrink-0",children:a.jsx(Df,{className:"text-pink-400",size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.missionTitle}),a.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed",children:e.about.missionDesc})]})]})}),a.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-8 hover:border-purple-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-purple-500/10 hover:-translate-y-1 animate-fade-in-delay-2",children:a.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[a.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-purple-500/20 to-purple-600/20 flex items-center justify-center border border-purple-500/30 flex-shrink-0",children:a.jsx(Jt,{className:"text-purple-400",size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.howItWorksTitle}),a.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed mb-3 md:mb-4",children:e.about.howItWorksDesc}),a.jsxs("ul",{className:"space-y-2 text-sm md:text-base text-slate-300",children:[a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),a.jsx("span",{children:e.about.step1})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),a.jsx("span",{children:e.about.step2})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),a.jsx("span",{children:e.about.step3})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),a.jsx("span",{children:e.about.step4})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-purple-400 flex-shrink-0",children:""}),a.jsx("span",{children:e.about.step5})]})]})]})]})}),a.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-8 hover:border-cyan-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-cyan-500/10 hover:-translate-y-1 animate-fade-in-delay-3",children:a.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[a.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-cyan-500/20 to-cyan-600/20 flex items-center justify-center border border-cyan-500/30 flex-shrink-0",children:a.jsx(lo,{className:"text-cyan-400",size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.privacyTitle}),a.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed",children:e.about.privacyDesc})]})]})}),a.jsx("div",{className:"text-center pt-6 md:pt-8",children:a.jsx("p",{className:"text-sm md:text-base text-slate-400 italic px-4",children:e.about.quote})})]})]})]})}class Bs{constructor(t=0,r="Network Error"){this.status=t,this.text=r}}const ky=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},Pe={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:ky()},pc=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},_y=(e,t="https://api.emailjs.com")=>{if(!e)return;const r=pc(e);Pe.publicKey=r.publicKey,Pe.blockHeadless=r.blockHeadless,Pe.storageProvider=r.storageProvider,Pe.blockList=r.blockList,Pe.limitRate=r.limitRate,Pe.origin=r.origin||t},Uf=async(e,t,r={})=>{const n=await fetch(Pe.origin+e,{method:"POST",headers:r,body:t}),s=await n.text(),i=new Bs(n.status,s);if(n.ok)return i;throw i},Mf=(e,t,r)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},jy=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Ff=e=>e.webdriver||!e.languages||e.languages.length===0,Bf=()=>new Bs(451,"Unavailable For Headless Browser"),Ny=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},Sy=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},Ey=(e,t)=>e instanceof FormData?e.get(t):e[t],qf=(e,t)=>{if(Sy(e))return!1;Ny(e.list,e.watchVariable);const r=Ey(t,e.watchVariable);return typeof r!="string"?!1:e.list.includes(r)},Hf=()=>new Bs(403,"Forbidden"),Cy=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},zy=async(e,t,r)=>{const n=Number(await r.get(e)||0);return t-Date.now()+n},Wf=async(e,t,r)=>{if(!t.throttle||!r)return!1;Cy(t.throttle,t.id);const n=t.id||e;return await zy(n,t.throttle,r)>0?!0:(await r.set(n,Date.now().toString()),!1)},Vf=()=>new Bs(429,"Too Many Requests"),Ty=async(e,t,r,n)=>{const s=pc(n),i=s.publicKey||Pe.publicKey,l=s.blockHeadless||Pe.blockHeadless,o=s.storageProvider||Pe.storageProvider,c={...Pe.blockList,...s.blockList},u={...Pe.limitRate,...s.limitRate};return l&&Ff(navigator)?Promise.reject(Bf()):(Mf(i,e,t),jy(r),r&&qf(c,r)?Promise.reject(Hf()):await Wf(location.pathname,u,o)?Promise.reject(Vf()):Uf("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"}))},Py=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Ay=e=>typeof e=="string"?document.querySelector(e):e,Dy=async(e,t,r,n)=>{const s=pc(n),i=s.publicKey||Pe.publicKey,l=s.blockHeadless||Pe.blockHeadless,o=Pe.storageProvider||s.storageProvider,c={...Pe.blockList,...s.blockList},u={...Pe.limitRate,...s.limitRate};if(l&&Ff(navigator))return Promise.reject(Bf());const d=Ay(r);Mf(i,e,t),Py(d);const h=new FormData(d);return qf(c,h)?Promise.reject(Hf()):await Wf(location.pathname,u,o)?Promise.reject(Vf()):(h.append("lib_version","4.4.1"),h.append("service_id",e),h.append("template_id",t),h.append("user_id",i),Uf("/api/v1.0/email/send-form",h))},Oy={init:_y,send:Ty,sendForm:Dy,EmailJSResponseStatus:Bs};function Ry(){const{t:e}=Ve(),{showToast:t}=Yr(),[r,n]=j.useState({name:"",email:"",subject:"",message:""}),[s,i]=j.useState(!1),[l,o]=j.useState(!1),c=async u=>{u.preventDefault(),o(!0);try{const d={from_name:r.name,from_email:r.email,subject:r.subject,message:r.message,to_email:"submirra.ai@gmail.com",reply_to:r.email},h="service_6btsv5d",p="template_contact",v="AdvA9XekMYHYYOhcF";try{console.log(" EmailJS Gnderiliyor...",{serviceId:h,templateId:p,publicKey:v,templateParams:d});const w=await Oy.send(h,p,d,v);console.log(" EmailJS Baarl:",w),i(!0),n({name:"",email:"",subject:"",message:""}),t("Mesajnz baaryla gnderildi! En ksa srede size dn yapacaz.","success"),setTimeout(()=>i(!1),5e3)}catch(w){console.error(" EmailJS Hatas:",w),w instanceof Error?(console.error("Hata mesaj:",w.message),t(`Email hatas: ${w.message}`,"error")):(console.error("Bilinmeyen hata:",w),t("Email gnderilirken bilinmeyen bir hata olutu.","error")),console.log(" Contact Form Mesaj (EmailJS hatas nedeniyle console'a kaydedildi):",{sim:r.name,Email:r.email,Konu:r.subject,Mesaj:r.message,Tarih:new Date().toLocaleString("tr-TR"),Hata:w})}}catch(d){console.error("Form gnderme hatas:",d),t("Mesaj gnderilirken bir hata olutu. Ltfen tekrar deneyin.","error")}finally{o(!1)}};return a.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-cyan-500/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[a.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.contact.title}),a.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:e.contact.subtitle})]}),a.jsx("div",{className:"flex justify-center mb-8 md:mb-12 animate-fade-in-delay",children:a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-2xl p-6 md:p-8 hover:border-pink-500/40 transition-all duration-500 md:hover:-translate-y-2 hover:shadow-xl hover:shadow-pink-500/10 max-w-md w-full",children:[a.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 rounded-full bg-gradient-to-br from-pink-500/20 to-pink-600/20 flex items-center justify-center border border-pink-500/30 mb-3 md:mb-4 mx-auto",children:a.jsx(Of,{className:"text-pink-400",size:24})}),a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3 text-center",children:e.contact.emailSupport}),a.jsx("p",{className:"text-slate-300 text-center text-base md:text-lg break-all",children:"submirra.ai@gmail.com"})]})}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-8 hover:border-cyan-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-cyan-500/10 animate-fade-in-delay-2",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-5 md:mb-6",children:e.contact.sendMessage}),s&&a.jsx("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg text-green-400",children:e.contact.thankYou}),a.jsxs("form",{onSubmit:c,className:"space-y-5 md:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:e.contact.name}),a.jsx("input",{type:"text",value:r.name,onChange:u=>n({...r,name:u.target.value}),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:e.contact.namePlaceholder,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:e.contact.email}),a.jsx("input",{type:"email",value:r.email,onChange:u=>n({...r,email:u.target.value}),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:e.contact.emailPlaceholder,required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:e.contact.subject}),a.jsx("input",{type:"text",value:r.subject,onChange:u=>n({...r,subject:u.target.value}),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:e.contact.subjectPlaceholder,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:e.contact.message}),a.jsx("textarea",{value:r.message,onChange:u=>n({...r,message:u.target.value}),className:"w-full h-32 px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none text-sm md:text-base",placeholder:e.contact.messagePlaceholder,required:!0})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full px-5 md:px-6 py-3 md:py-4 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/30 flex items-center justify-center gap-2 text-sm md:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Gnderiliyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(uc,{size:18}),e.contact.send]})})]})]})]})]})}function Ly(){const{user:e}=lt(),t=ot(),{t:r}=Ve(),{showToast:n}=Yr(),[s,i]=j.useState(""),[l,o]=j.useState(!1),[c,u]=j.useState(null),[d,h]=j.useState(null),[p,v]=j.useState(null),[w,N]=j.useState(!1);j.useEffect(()=>{e||t("/signin")},[e,t]);async function z(x,S){try{const b=await(await fetch("https://borablt.app.n8n.cloud/webhook/dream-webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:S,dream_text:x})})).json();return console.log("N8N response:",b),b}catch(y){throw console.error("N8N webhook error:",y),y}}const g=async x=>{var S;if(x.preventDefault(),!(!s.trim()||!e)){o(!0),v(null);try{const y={user_id:e.id,dream_text:s,status:"pending",is_public:w},{data:b,error:_}=await T.from("dreams").insert(y).select().single();if(_)if((S=_.message)!=null&&S.includes("is_public")||_.code==="42703"||_.code==="PGRST116"){console.warn("is_public column not found, saving without it. Please run migration.");const{data:L,error:R}=await T.from("dreams").insert({user_id:e.id,dream_text:s,status:"pending"}).select().single();if(R)throw R}else throw _;try{await z(s,e.id)}catch(L){console.error("Failed to send to N8N:",L)}u(r.analyze.savedMessage),h("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiMwMDAwMDAiLz48L3N2Zz4="),i(""),n("Dream saved successfully! Analysis will be ready soon.","success")}catch(y){const b=y instanceof Error?y.message:"Failed to save dream";v(b),n(b,"error")}finally{o(!1)}}},m=s.length,f=5e3;return e?a.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-cyan-500/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative max-w-6xl mx-auto z-10",children:[a.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:r.analyze.title}),a.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:r.analyze.subtitle})]}),c?a.jsxs("div",{className:"max-w-6xl mx-auto animate-fade-in",children:[a.jsx("div",{className:"mb-6 flex justify-end",children:a.jsx("button",{onClick:()=>{u(null),h(null)},className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 hover:bg-gradient-to-r hover:from-pink-600/30 hover:to-purple-600/30 transition-all duration-200 text-sm md:text-base",children:r.analyze.analyzeAnother})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-8 hover:border-purple-500/30 transition-all duration-300 shadow-xl shadow-purple-500/5",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-3 md:mb-4",children:r.analyze.analysisTitle}),a.jsx("div",{className:"bg-slate-950/30 rounded-lg p-4",children:a.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed whitespace-pre-wrap",children:c})})]}),d&&a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-8 hover:border-cyan-500/30 transition-all duration-300 shadow-xl shadow-cyan-500/5",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-3 md:mb-4",children:r.analyze.visualizationTitle}),a.jsx("div",{className:"w-full aspect-video bg-black rounded-xl shadow-2xl shadow-cyan-500/20 flex items-center justify-center overflow-hidden group",children:a.jsx("img",{src:d,alt:"Dream visualization",className:"w-full h-full object-cover rounded-xl group-hover:scale-105 transition-transform duration-500"})})]})]})]}):a.jsx("form",{onSubmit:g,className:"max-w-4xl mx-auto animate-fade-in-delay",children:a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-2xl p-5 md:p-8 relative hover:border-pink-500/30 transition-all duration-300 shadow-xl shadow-pink-500/5",children:[a.jsx("div",{className:"absolute -top-3 right-4 md:right-6",children:a.jsx("button",{onClick:()=>t("/pricing"),className:"px-2 md:px-3 py-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs font-semibold rounded-full shadow-lg animate-pulse hover:from-purple-500 hover:to-pink-500 transition-all duration-300 hover:scale-105 cursor-pointer",title:"Satn Al sayfasna git",children:r.analyze.trialBadge})}),a.jsxs("div",{className:"mb-5 md:mb-6",children:[a.jsx("label",{className:"block text-white font-semibold mb-2 md:mb-3 text-sm md:text-base",children:r.analyze.privacyLabel}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5 md:mb-6",children:[a.jsxs("button",{type:"button",onClick:()=>N(!0),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left ${w?"border-pink-500 bg-pink-500/10":"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${w?"border-pink-400 bg-pink-400":"border-slate-400"}`,children:w&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),a.jsx("span",{className:`font-semibold ${w?"text-pink-400":"text-slate-300"}`,children:r.analyze.privacyPublic})]}),a.jsx("p",{className:"text-xs text-slate-400",children:r.analyze.privacyPublicDesc})]}),a.jsxs("button",{type:"button",onClick:()=>N(!1),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left ${w?"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50":"border-pink-500 bg-pink-500/10"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${w?"border-slate-400":"border-pink-400 bg-pink-400"}`,children:!w&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),a.jsx("span",{className:`font-semibold ${w?"text-slate-300":"text-pink-400"}`,children:r.analyze.privacyPrivate})]}),a.jsx("p",{className:"text-xs text-slate-400",children:r.analyze.privacyPrivateDesc})]})]})]}),a.jsxs("div",{className:"mb-5 md:mb-6",children:[a.jsx("label",{className:"block text-white font-semibold mb-2 md:mb-3 text-sm md:text-base",children:r.analyze.label}),a.jsx("textarea",{value:s,onChange:x=>i(x.target.value.slice(0,f)),placeholder:r.analyze.placeholder,className:"w-full h-48 md:h-64 px-3 md:px-4 py-2 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none text-sm md:text-base",maxLength:f,required:!0}),a.jsx("div",{className:"flex justify-between items-center mt-2",children:a.jsxs("span",{className:`text-xs md:text-sm ${m>f*.9?"text-pink-400":"text-slate-500"}`,children:[m," / ",f," ",r.analyze.characters]})})]}),p&&a.jsx("div",{className:"mb-5 md:mb-6 p-3 md:p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm md:text-base",children:p}),a.jsx("button",{type:"submit",disabled:l||!s.trim(),className:"w-full px-5 md:px-6 py-3 md:py-4 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:l?a.jsxs(a.Fragment,{children:[a.jsx(je,{className:"animate-spin",size:18}),r.analyze.saving]}):a.jsxs(a.Fragment,{children:[a.jsx(Jt,{size:18}),r.analyze.submit]})})]})})]})]}):null}function $y(){const{user:e}=lt(),t=ot(),{t:r,language:n}=Ve(),{showToast:s}=Yr(),[i,l]=j.useState([]),[o,c]=j.useState(!0),[u,d]=j.useState(null),[h,p]=j.useState(""),[v,w]=j.useState("all"),[N,z]=j.useState(new Set);j.useEffect(()=>{if(!e){t("/signin");return}const y=localStorage.getItem(`favorites_${e.id}`);y&&z(new Set(JSON.parse(y))),g();const b=T.channel("dreams-changes").on("postgres_changes",{event:"*",schema:"public",table:"dreams",filter:`user_id=eq.${e.id}`},_=>{console.log("Dream change received:",_),g()}).subscribe();return()=>{T.removeChannel(b)}},[e,t]);const g=async()=>{if(e)try{const{data:y,error:b}=await T.from("dreams").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(b)throw b;const _=localStorage.getItem(`favorites_${e.id}`),L=_?new Set(JSON.parse(_)):N,R=(y||[]).map(re=>({...re,is_favorite:L.has(re.id)}));l(R),z(L)}catch(y){console.error("Error loading dreams:",y)}finally{c(!1)}},m=y=>{const b=new Date(y),_=n==="tr"?"tr-TR":"en-US";return b.toLocaleDateString(_,{year:"numeric",month:"long",day:"numeric"})},f=async(y,b)=>{if(b.stopPropagation(),!e){s("You must be logged in to delete dreams","error");return}if(confirm("Are you sure you want to delete this dream? This will also delete all likes and comments."))try{try{await T.from("dream_likes").delete().eq("dream_id",y)}catch(R){console.log("Error deleting likes:",R)}try{await T.from("dream_comments").delete().eq("dream_id",y)}catch(R){console.log("Error deleting comments:",R)}const{error:_}=await T.from("dreams").delete().eq("id",y).eq("user_id",e.id);if(_)throw console.error("Delete error:",_),_;l(R=>R.filter(re=>re.id!==y)),(u==null?void 0:u.id)===y&&d(null);const L=new Set(N);L.delete(y),z(L),localStorage.setItem(`favorites_${e.id}`,JSON.stringify(Array.from(L))),s("Dream deleted successfully","success"),setTimeout(async()=>{await g()},100)}catch(_){console.error("Error deleting dream:",_);const L=(_==null?void 0:_.message)||"Failed to delete dream. You can only delete your own dreams.";s(L,"error")}},x=(y,b)=>{b.stopPropagation();const _=new Set(N);_.has(y)?(_.delete(y),s("Removed from favorites","info")):(_.add(y),s("Added to favorites","success")),z(_),e&&localStorage.setItem(`favorites_${e.id}`,JSON.stringify(Array.from(_))),l(L=>L.map(R=>R.id===y?{...R,is_favorite:_.has(y)}:R))},S=i.filter(y=>{const b=h===""||y.dream_text.toLowerCase().includes(h.toLowerCase())||y.analysis_text&&y.analysis_text.toLowerCase().includes(h.toLowerCase()),_=v==="all"||v==="completed"&&y.status==="completed"||v==="pending"&&y.status==="pending"||v==="favorites"&&y.is_favorite;return b&&_});return e?o?a.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:a.jsx(je,{className:"animate-spin text-purple-400",size:48})}):a.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 left-10 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-40 right-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[a.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",children:r.library.title}),a.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.library.subtitle}),a.jsxs("div",{className:"max-w-2xl mx-auto mb-8 space-y-4 animate-fade-in-delay",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),a.jsx("input",{type:"text",value:h,onChange:y=>p(y.target.value),placeholder:r.library.searchPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all shadow-lg"})]}),a.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[a.jsx("button",{onClick:()=>w("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${v==="all"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:"All"}),a.jsxs("button",{onClick:()=>w("favorites"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-1 ${v==="favorites"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:[a.jsx(wr,{size:14,className:v==="favorites"?"fill-current":""}),"Favorites"]}),a.jsx("button",{onClick:()=>w("completed"),className:`px-4 py-2 rounded-lg font-medium transition-all ${v==="completed"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:"Completed"}),a.jsx("button",{onClick:()=>w("pending"),className:`px-4 py-2 rounded-lg font-medium transition-all ${v==="pending"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:"Pending"})]})]})]}),i.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx(Vr,{className:"mx-auto mb-4 text-slate-600",size:64}),a.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.library.empty}),a.jsx("button",{onClick:()=>t("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:r.library.analyzeFirst})]}):S.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx(Xi,{className:"mx-auto mb-4 text-slate-600",size:64}),a.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.library.noDreamsFound})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(y=>a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-xl p-6 hover:border-purple-500/40 transition-all duration-300 relative group overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/0 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:[a.jsx("button",{onClick:b=>x(y.id,b),className:`p-2 rounded-lg border transition-all duration-300 hover:scale-110 ${y.is_favorite?"bg-pink-500/20 border-pink-500/50 text-pink-400":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-pink-500/50 hover:text-pink-400"}`,title:y.is_favorite?"Remove from favorites":"Add to favorites",children:a.jsx(wr,{size:16,className:y.is_favorite?"fill-current":""})}),a.jsx("button",{onClick:b=>f(y.id,b),className:"p-3 bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 rounded-lg text-red-400 transition-all duration-300 hover:scale-110 hover:shadow-lg hover:shadow-red-500/30",title:"Delete dream",children:a.jsx(co,{size:20})})]}),a.jsxs("div",{onClick:()=>d(y),className:"cursor-pointer relative z-10",children:[y.image_url&&a.jsx("div",{className:"overflow-hidden rounded-lg mb-4",children:a.jsx("img",{src:y.image_url,alt:"Dream visualization",className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"})}),a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-2",children:[a.jsx(Ji,{size:14}),m(y.created_at)]}),a.jsx("p",{className:"text-slate-300 line-clamp-3 group-hover:text-slate-200 transition-colors",children:y.dream_text}),y.status==="pending"&&a.jsx("span",{className:"inline-block mt-3 px-3 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full animate-pulse",children:r.library.pending})]})]},y.id))})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",onClick:()=>d(null),children:a.jsx("div",{className:"bg-slate-900 border border-purple-500/30 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:y=>y.stopPropagation(),children:a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-2",children:[a.jsx(Ji,{size:14}),m(u.created_at)]}),a.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Dream Entry"})]}),a.jsx("button",{onClick:()=>d(null),className:"text-slate-400 hover:text-white transition-colors",children:""})]}),u.image_url&&a.jsx("img",{src:u.image_url,alt:"Dream visualization",className:"w-full h-auto rounded-xl mb-6 shadow-2xl"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:r.library.yourDream}),a.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:u.dream_text})]}),u.analysis_text&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-pink-400 mb-2",children:r.library.analysis}),a.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:u.analysis_text})]}),u.status==="pending"&&a.jsx("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-yellow-400",children:r.library.processingMessage})]})})})]}):null}function Iy(){const[e,t]=j.useState(!1),[r,n]=j.useState(""),[s,i]=j.useState(""),[l,o]=j.useState(""),[c,u]=j.useState(""),[d,h]=j.useState(null),[p,v]=j.useState(!1),w=j.useRef(null),N=j.useRef(null),z=j.useRef(null),g=j.useRef(null),{signIn:m,signUp:f,user:x}=lt(),S=ot(),{t:y}=Ve();if(j.useEffect(()=>{w.current&&(w.current.oninvalid=_=>{_.preventDefault();const L=_.target;L.validity.valueMissing?L.setCustomValidity(y.auth.validationRequired):L.validity.typeMismatch&&L.setCustomValidity(y.auth.validationEmail)},w.current.oninput=_=>{_.target.setCustomValidity("")}),N.current&&(N.current.oninvalid=_=>{_.preventDefault(),_.target.setCustomValidity(y.auth.validationRequired)},N.current.oninput=_=>{_.target.setCustomValidity("")}),z.current&&(z.current.oninvalid=_=>{_.preventDefault(),_.target.setCustomValidity(y.auth.validationRequired)},z.current.oninput=_=>{_.target.setCustomValidity("")})},[y,e]),j.useEffect(()=>{x&&S("/")},[x,S]),x)return null;const b=async _=>{_.preventDefault(),h(null),v(!0);try{if(e){if(!l.trim())throw new Error("Please enter your full name");if(!c.trim())throw new Error("Please enter a username");if(c.length<3)throw new Error("Username must be at least 3 characters");const{error:L}=await f(r,s,l,c);if(L){console.error("SignUp UI Error:",L);const R=L.message.toLowerCase();R.includes("already registered")||R.includes("already exists")||R.includes("duplicate")?h(y.auth.emailAlreadyExists):R.includes("configuration")?h("Supabase yaplandrmas eksik. .env dosyasn kontrol edin."):h(L.message),v(!1);return}S("/analyze")}else{const{error:L}=await m(r,s);if(L){const R=L.message.toLowerCase();R.includes("invalid")||R.includes("credentials")?h(y.auth.invalidCredentials):h(L.message),v(!1);return}S("/analyze")}}catch(L){h(L instanceof Error?L.message:"An error occurred")}finally{v(!1)}};return a.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6 flex items-center",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative max-w-md mx-auto w-full z-10",children:[a.jsxs("div",{className:"text-center mb-6 md:mb-8 animate-fade-in",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e?y.auth.createAccount:y.auth.welcomeBack}),a.jsx("p",{className:"text-slate-400 text-sm md:text-base px-2",children:e?y.auth.startJourney:y.auth.continueExploring})]}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-8 hover:border-purple-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/10 animate-fade-in-delay",children:[a.jsxs("div",{className:"flex gap-2 mb-6 md:mb-8",children:[a.jsx("button",{onClick:()=>{t(!1),h(null)},className:`flex-1 py-2.5 md:py-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base ${e?"bg-slate-800/50 text-slate-400 hover:text-slate-300":"bg-gradient-to-r from-pink-600 to-purple-600 text-white"}`,children:y.auth.signIn}),a.jsx("button",{onClick:()=>{t(!0),h(null)},className:`flex-1 py-2.5 md:py-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base ${e?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:y.auth.signUp})]}),d&&a.jsx("div",{className:"mb-5 md:mb-6 p-3 md:p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-xs md:text-sm",children:d}),a.jsxs("form",{onSubmit:b,className:"space-y-5 md:space-y-6",children:[e&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:y.auth.fullName}),a.jsx("input",{ref:z,type:"text",value:l,onChange:_=>o(_.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:y.auth.enterFullName,required:e})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:"Username"}),a.jsx("input",{ref:g,type:"text",value:c,onChange:_=>u(_.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:"username",required:e,minLength:3,maxLength:20}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Only lowercase letters, numbers, and underscores"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:y.auth.email}),a.jsx("input",{ref:w,type:"email",value:r,onChange:_=>n(_.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:y.auth.enterEmail,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:y.auth.password}),a.jsx("input",{ref:N,type:"password",value:s,onChange:_=>i(_.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:y.auth.enterPassword,required:!0,minLength:6})]}),a.jsx("button",{type:"submit",disabled:p,className:"w-full px-5 md:px-6 py-3 md:py-4 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:p?a.jsxs(a.Fragment,{children:[a.jsx(je,{className:"animate-spin",size:18}),e?y.auth.creatingAccount:y.auth.signingIn]}):a.jsxs(a.Fragment,{children:[e?a.jsx(dc,{size:18}):a.jsx(ny,{size:18}),e?y.auth.signUp:y.auth.signIn]})})]})]})]})]})}function Uy(){const{user:e}=lt(),t=ot(),{t:r}=Ve(),n=()=>{if(!e){t("/signin");return}alert("Payment integration coming soon! This will redirect to Stripe checkout.")};return a.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),a.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[a.jsxs("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:r.pricing.title}),a.jsx("p",{className:"text-slate-400 text-base md:text-lg max-w-2xl mx-auto px-2",children:r.pricing.subtitle})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-6 hover:border-purple-500/40 transition-all duration-500 hover:shadow-xl hover:shadow-purple-500/10 hover:-translate-y-1 animate-fade-in-delay",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Jt,{className:"text-purple-400",size:18}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.freeTrial.title})]}),a.jsx("div",{className:"mb-3 md:mb-4",children:a.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.freeTrial.price})}),a.jsx("p",{className:"text-slate-400 text-sm mb-6",children:r.pricing.freeTrial.description}),a.jsxs("ul",{className:"space-y-2 mb-6",children:[a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-purple-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.freeTrial.feature1})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-purple-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.freeTrial.feature2})]}),r.pricing.freeTrial.feature3&&a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-purple-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.freeTrial.feature3})]})]}),a.jsx("button",{onClick:()=>t(e?"/activate-trial":"/signin"),className:"w-full px-4 py-2.5 rounded-lg bg-slate-800 text-white text-sm font-semibold hover:bg-slate-700 transition-all duration-200",children:e?r.pricing.freeTrial.cta:r.pricing.freeTrial.signUp})]}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-6 hover:border-cyan-500/40 transition-all duration-500 hover:shadow-xl hover:shadow-cyan-500/10 md:hover:-translate-y-2 animate-fade-in-delay-2",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Se,{className:"text-cyan-400",size:18}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.standard.title})]}),a.jsxs("div",{className:"mb-3 md:mb-4",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.standard.price}),a.jsxs("span",{className:"text-slate-400 text-sm",children:["/",r.pricing.standard.period]})]}),a.jsx("p",{className:"text-slate-300 text-sm mb-6",children:r.pricing.standard.description}),a.jsxs("ul",{className:"space-y-2 mb-6",children:[a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.standard.feature1})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.standard.feature2})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.standard.feature3})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.standard.feature4})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.standard.feature5})]})]}),a.jsx("button",{onClick:n,className:"w-full px-4 py-2.5 rounded-lg bg-gradient-to-r from-cyan-600 to-blue-600 text-white text-sm font-semibold hover:from-cyan-500 hover:to-blue-500 transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/30",children:r.pricing.standard.cta})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-500/10 to-purple-500/10 backdrop-blur-sm border-2 border-pink-500/40 rounded-2xl p-5 md:p-6 hover:border-pink-500/60 transition-all duration-500 hover:shadow-2xl hover:shadow-pink-500/20 relative md:hover:-translate-y-3 animate-fade-in-delay-3",children:[a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:a.jsx("span",{className:"px-2 md:px-3 py-1 bg-gradient-to-r from-pink-600 to-purple-600 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:r.pricing.premium.badge})}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx($f,{className:"text-pink-400",size:18}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.premium.title})]}),a.jsxs("div",{className:"mb-3 md:mb-4",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.premium.price}),a.jsxs("span",{className:"text-slate-400 text-sm",children:["/",r.pricing.premium.period]})]}),a.jsx("p",{className:"text-slate-300 text-sm mb-6 font-medium",children:r.pricing.premium.description}),a.jsxs("ul",{className:"space-y-2 mb-6",children:[a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{className:"font-medium",children:r.pricing.premium.feature1})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{className:"font-medium",children:r.pricing.premium.feature2})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{className:"font-medium",children:r.pricing.premium.feature3})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.premium.feature4})]}),a.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[a.jsx(Se,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),a.jsx("span",{children:r.pricing.premium.feature5})]})]}),a.jsx("button",{onClick:n,className:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-2xl hover:shadow-pink-500/40 hover:scale-105",children:r.pricing.premium.cta})]})]}),a.jsxs("div",{className:"mt-16 text-center max-w-3xl mx-auto bg-slate-900/30 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-8 hover:border-cyan-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-cyan-500/10 animate-fade-in",children:[a.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:r.pricing.whySubmirra.title}),a.jsx("p",{className:"text-slate-300 leading-relaxed",children:r.pricing.whySubmirra.description})]})]})]})}function Vu(){const{user:e}=lt(),t=ot(),r=fc(),{t:n,language:s}=Ve(),{showToast:i}=Yr(),[l,o]=j.useState(null),[c,u]=j.useState(null),[d,h]=j.useState(!0),[p,v]=j.useState(!1),[w,N]=j.useState(""),[z,g]=j.useState(""),[m,f]=j.useState(!1),[x,S]=j.useState(null),[y,b]=j.useState(!1),[_,L]=j.useState(!0),[R,re]=j.useState([]),[Ke,Ue]=j.useState(!1),[yt,ct]=j.useState(!1),[It,Oe]=j.useState(!1),[D,I]=j.useState([]),[F,Y]=j.useState([]),[C,O]=j.useState(!1),[q,J]=j.useState(!1),[ae,ee]=j.useState(!1),[me,ut]=j.useState(!1),[qs,Ut]=j.useState(!1),Zt=j.useRef(null);j.useEffect(()=>{const k=window.location.pathname;let A=null;if(k.startsWith("/profile/")&&(A=k.split("/")[2]||null),A)u(A),L(e?A===e.id:!1),Hs(A),ba(A),In(A),e&&(Un(A),E(A),Q(A));else{if(!e){t("/signin");return}u(e.id),L(!0),$n(),xt()}},[e,t,r,window.location.pathname]);const $n=async()=>{if(e)try{const{data:k,error:A}=await T.from("profiles").select("*").eq("id",e.id).single();if(A)throw A;o({full_name:k.full_name||"",email:k.email||e.email||"",created_at:k.created_at||e.created_at||"",avatar_url:k.avatar_url||null,bio:k.bio||null,username:k.username||null}),N(k.full_name||""),g(k.bio||"")}catch(k){console.error("Error loading profile:",k),i("Failed to load profile","error")}finally{h(!1)}},Hs=async k=>{try{h(!0);const{data:A,error:V}=await T.from("profiles").select("*").eq("id",k).single();if(V)throw V;o({full_name:A.full_name||"",email:"",created_at:A.created_at||"",avatar_url:A.avatar_url||null,bio:A.bio||null,username:A.username||null})}catch(A){console.error("Error loading other user profile:",A),i("Failed to load profile","error")}finally{h(!1)}},ba=async k=>{try{const{data:A,error:V}=await T.from("user_stats").select("*").eq("user_id",k).single();if(!V&&A)S({public_dreams_count:A.public_dreams_count||0,total_likes_received:A.total_likes_received||0,total_comments_received:A.total_comments_received||0,followers_count:A.followers_count||0,following_count:A.following_count||0});else{const[Z,B,xe]=await Promise.all([T.from("dreams").select("id",{count:"exact",head:!0}).eq("user_id",k).eq("is_public",!0),T.from("follows").select("id",{count:"exact",head:!0}).eq("following_id",k),T.from("follows").select("id",{count:"exact",head:!0}).eq("follower_id",k)]);S({public_dreams_count:Z.count||0,total_likes_received:0,total_comments_received:0,followers_count:B.count||0,following_count:xe.count||0})}}catch(A){console.error("Error loading stats:",A)}},In=async k=>{try{Ue(!0);const{data:A,error:V}=await T.from("dreams").select("*").eq("user_id",k).eq("is_public",!0).in("status",["completed","pending"]).order("created_at",{ascending:!1}).limit(12);if(V)throw V;const Z=(A||[]).map(de=>de.id);let B=[],xe=[];if(Z.length>0){try{const{data:de}=await T.from("dream_likes").select("dream_id").in("dream_id",Z);B=de||[]}catch(de){console.log("Error loading likes:",de)}try{const{data:de}=await T.from("dream_comments").select("dream_id").in("dream_id",Z);xe=de||[]}catch(de){console.log("Error loading comments:",de)}}const ue=new Map,Tt=new Map;B.forEach(de=>{ue.set(de.dream_id,(ue.get(de.dream_id)||0)+1)}),xe.forEach(de=>{Tt.set(de.dream_id,(Tt.get(de.dream_id)||0)+1)});const Cr=(A||[]).map(de=>({...de,likes_count:ue.get(de.id)||0,comments_count:Tt.get(de.id)||0}));re(Cr)}catch(A){console.error("Error loading public dreams:",A)}finally{Ue(!1)}},Un=async k=>{if(e)try{const{data:A,error:V}=await T.from("follows").select("id").eq("follower_id",e.id).eq("following_id",k).single();b(!!A&&!V)}catch{b(!1)}},E=async k=>{if(e)try{const{data:A,error:V}=await T.from("user_blocks").select("id").eq("blocker_id",e.id).eq("blocked_id",k).single();V&&V.code!=="PGRST116"&&console.error("Error checking block status:",V),J(!!A);const{data:Z,error:B}=await T.from("user_blocks").select("id").eq("blocker_id",k).eq("blocked_id",e.id).single();B&&B.code!=="PGRST116"&&console.error("Error checking blocked by status:",B),ee(!!Z)}catch(A){console.error("Error checking block status:",A)}},Q=async k=>{if(e)try{const{data:A,error:V}=await T.from("user_favorites").select("id").eq("user_id",e.id).eq("favorite_user_id",k).single();V&&V.code!=="PGRST116"&&console.error("Error checking favorite status:",V),ut(!!A)}catch(A){console.error("Error checking favorite status:",A)}},U=async()=>{if(!(!e||!c)&&confirm("Bu kullancy engellemek istediinizden emin misiniz?"))try{const{error:k}=await T.from("user_blocks").insert({blocker_id:e.id,blocked_id:c});if(k)throw k;J(!0),Ut(!1),i("Kullanc engellendi","success")}catch(k){console.error("Error blocking user:",k),i("Kullanc engellenemedi","error")}},ne=async()=>{if(!(!e||!c))try{const{error:k}=await T.from("user_blocks").delete().eq("blocker_id",e.id).eq("blocked_id",c);if(k)throw k;J(!1),Ut(!1),i("Kullancnn engeli kaldrld","success")}catch(k){console.error("Error unblocking user:",k),i("Engel kaldrlamad","error")}},W=async()=>{if(!e||!c){console.log("Missing user or profileUserId:",{user:!!e,profileUserId:c});return}console.log("Toggling favorite for:",c,"Current status:",me);try{if(me){console.log("Removing from favorites...");const{error:k}=await T.from("user_favorites").delete().eq("user_id",e.id).eq("favorite_user_id",c);if(k)throw console.error("Error removing favorite:",k),k;ut(!1),i("Favori arkadalardan karld","success"),console.log("Successfully removed from favorites")}else{console.log("Adding to favorites...");const{data:k,error:A}=await T.from("user_favorites").insert({user_id:e.id,favorite_user_id:c}).select();if(A)throw console.error("Error adding favorite:",A),A;console.log("Successfully added to favorites:",k),ut(!0),i("Favori arkadalara eklendi","success")}Ut(!1)}catch(k){console.error("Error toggling favorite:",k),i(`lem baarsz: ${k.message}`,"error")}},Me=async()=>{if(!e||!c)return;const k=prompt("ikayet sebebinizi yazn (istee bal):");if(k!==null&&confirm("Bu kullancy ikayet etmek istediinizden emin misiniz?"))try{console.log("Reporting user:",c);const{data:A}=await T.from("user_reports").select("id").eq("reporter_id",e.id).eq("reported_user_id",c).single();if(A){i("Bu kullancy zaten ikayet etmisiniz","error"),Ut(!1);return}const{error:V}=await T.from("user_reports").insert({reporter_id:e.id,reported_user_id:c,reason:k||null});if(V)throw V;const{data:Z,error:B}=await T.from("user_reports").select("id").eq("reported_user_id",c);if(B)throw B;const xe=(Z==null?void 0:Z.length)||0;if(console.log("Total reports for user:",xe),xe>=10){const{error:ue}=await T.from("profiles").update({is_suspended:!0,suspended_at:new Date().toISOString(),suspension_reason:"ok sayda ikayet nedeniyle otomatik askya alnd"}).eq("id",c);ue?console.error("Error suspending user:",ue):console.log("User suspended due to reports")}Ut(!1),i("ikayet gnderildi","success")}catch(A){console.error("Error reporting user:",A),i("ikayet gnderilemedi","error")}},xt=async()=>{if(e)try{const{data:k,error:A}=await T.from("user_stats").select("*").eq("user_id",e.id).single();if(!A&&k)S({public_dreams_count:k.public_dreams_count||0,total_likes_received:k.total_likes_received||0,total_comments_received:k.total_comments_received||0,followers_count:k.followers_count||0,following_count:k.following_count||0});else{const[V,Z,B,xe,ue]=await Promise.all([T.from("dreams").select("id",{count:"exact",head:!0}).eq("user_id",e.id).eq("is_public",!0),T.from("dream_likes").select("dream_id").eq("dreams.user_id",e.id),T.from("dream_comments").select("dream_id").eq("dreams.user_id",e.id),T.from("follows").select("id",{count:"exact",head:!0}).eq("following_id",e.id),T.from("follows").select("id",{count:"exact",head:!0}).eq("follower_id",e.id)]);S({public_dreams_count:V.count||0,total_likes_received:0,total_comments_received:0,followers_count:xe.count||0,following_count:ue.count||0})}}catch(k){console.error("Error loading stats:",k)}},ze=async()=>{if(!e){i("You must be logged in to save","error");return}if(!w.trim()){i("Name cannot be empty","error");return}try{const k={full_name:w.trim(),updated_at:new Date().toISOString()};z!==void 0&&(k.bio=z.trim()||null);const{error:A}=await T.from("profiles").update(k).eq("id",e.id);if(A)throw console.error("Update error:",A),A;o(V=>V?{...V,full_name:w.trim(),bio:z.trim()||null}:null),v(!1),i(n.profile.profileSaved,"success")}catch(k){console.error("Error updating profile:",k),i(n.profile.profileSaveFailed,"error")}},er=()=>{N((l==null?void 0:l.full_name)||""),g((l==null?void 0:l.bio)||""),v(!1)},tr=async()=>{if(c){O(!0);try{const{data:k,error:A}=await T.from("follows").select(`
          follower_id,
          follower:follower_id (
            id,
            full_name,
            username,
            avatar_url
          )
        `).eq("following_id",c);if(A)throw A;const V=(k||[]).map(Z=>Z.follower).filter(Boolean);I(V),ct(!0)}catch(k){console.error("Error loading followers:",k)}finally{O(!1)}}},Mn=async()=>{if(c){O(!0);try{const{data:k,error:A}=await T.from("follows").select(`
          following_id,
          following:following_id (
            id,
            full_name,
            username,
            avatar_url
          )
        `).eq("follower_id",c);if(A)throw A;const V=(k||[]).map(Z=>Z.following).filter(Boolean);Y(V),Oe(!0)}catch(k){console.error("Error loading following:",k)}finally{O(!1)}}},Fn=async()=>{if(!e){t("/signin");return}if(c)try{if(y){const{error:k}=await T.from("follows").delete().eq("follower_id",e.id).eq("following_id",c);if(k)throw k;b(!1),x&&S({...x,followers_count:Math.max(0,x.followers_count-1)}),i(n.profile.unfollowSuccess,"info")}else{const{error:k}=await T.from("follows").insert({follower_id:e.id,following_id:c});if(k)throw k;b(!0),x&&S({...x,followers_count:x.followers_count+1}),i(n.profile.followSuccess,"success")}}catch(k){console.error("Error toggling follow:",k),i(n.profile.followFailed,"error")}},Bn=async k=>{var V,Z,B,xe;const A=(V=k.target.files)==null?void 0:V[0];if(!(!A||!e)){if(!A.type.startsWith("image/")){i("Please select an image file","error");return}if(A.size>5*1024*1024){i("Image size must be less than 5MB","error");return}try{if(f(!0),console.log("Skipping bucket check, proceeding with upload..."),l!=null&&l.avatar_url)try{let Ge="";if(l.avatar_url.includes("/avatars/")){const wt=l.avatar_url.split("/avatars/");Ge=wt[wt.length-1].split("?")[0]}else{const wt=l.avatar_url.split("/");Ge=wt[wt.length-1].split("?")[0]}if(Ge&&Ge.includes(".")){console.log("Attempting to delete old avatar:",Ge);const{error:wt}=await T.storage.from("avatars").remove([Ge]);wt?console.log("Could not delete old avatar (may not exist):",wt):console.log("Old avatar deleted successfully")}}catch(Ge){console.log("Could not delete old avatar:",Ge)}const ue=((Z=A.name.split(".").pop())==null?void 0:Z.toLowerCase())||"jpg",Tt=`${e.id}-${Date.now()}.${ue}`,Cr=Tt;console.log("Uploading avatar:",{fileName:Tt,fileSize:A.size,fileType:A.type});const{data:de,error:zr}=await T.storage.from("avatars").upload(Cr,A,{cacheControl:"3600",upsert:!0,contentType:A.type});if(zr)throw console.error("Upload error:",zr),(B=zr.message)!=null&&B.includes("new row violates row-level security")?new Error("Permission denied. Please check RLS policies for avatars bucket. Make sure you ran the storage migration."):(xe=zr.message)!=null&&xe.includes("Bucket not found")?new Error('Avatars bucket not found. Please create "avatars" bucket in Supabase Storage and make it public.'):new Error(zr.message||"Failed to upload avatar. Error: "+JSON.stringify(zr));console.log("Upload successful:",de);const{data:{publicUrl:qn}}=T.storage.from("avatars").getPublicUrl(Cr);if(console.log("Public URL:",qn),!qn)throw new Error("Failed to get public URL for avatar");const{error:ka}=await T.from("profiles").update({avatar_url:qn}).eq("id",e.id);if(ka)throw console.error("Update error details:",ka),new Error(ka.message||"Failed to update profile with new avatar");if(console.log("Profile updated successfully"),_){const{data:Ge,error:wt}=await T.from("profiles").select("*").eq("id",e.id).single();wt&&console.error("Error fetching updated profile:",wt),o(Ge||(mc=>mc?{...mc,avatar_url:qn}:null))}else o(Ge=>Ge?{...Ge,avatar_url:qn}:null);i(n.profile.avatarUploaded,"success")}catch(ue){console.error("Error uploading avatar:",ue);const Tt=(ue==null?void 0:ue.message)||n.profile.avatarUploadFailed;i(Tt,"error"),console.error("Full error details:",{message:ue==null?void 0:ue.message,error:ue,user:e==null?void 0:e.id,file:A==null?void 0:A.name})}finally{f(!1),Zt.current&&(Zt.current.value="")}}};if(!(!_&&!e)){if(_&&!e)return null}return d?a.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-400"})}):q&&!_?a.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),a.jsx("div",{className:"relative max-w-4xl mx-auto z-10",children:a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-500/20 border border-red-500/30 flex items-center justify-center",children:a.jsx(_e,{className:"text-red-400",size:40})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Engellediiniz Kullanc"}),a.jsx("p",{className:"text-slate-400 mb-6",children:"Bu kullancy engellemisiniz. Profilini grntleyemezsiniz."}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsx("button",{onClick:()=>t("/social"),className:"px-6 py-3 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition-colors",children:"Geri Dn"}),a.jsx("button",{onClick:async()=>{if(!(!e||!c))try{const{error:k}=await T.from("user_blocks").delete().eq("blocker_id",e.id).eq("blocked_id",c);if(k)throw k;J(!1),i("Kullancnn engeli kaldrld","success"),window.location.reload()}catch(k){console.error("Error unblocking user:",k),i("Engel kaldrlamad","error")}},className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-500 hover:to-purple-500 transition-all",children:"Engeli Kaldr"})]})]})})]}):a.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",children:n.profile.title}),a.jsx("p",{className:"text-slate-400 text-lg",children:_?n.profile.manageAccount:n.profile.userProfile})]}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-8 relative",children:[!_&&e&&a.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[a.jsx("button",{onClick:()=>Ut(!qs),className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-800/80 text-slate-400 hover:text-white hover:bg-slate-700 transition-all duration-200",children:a.jsx(Rf,{size:16})}),qs&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Ut(!1)}),a.jsxs("div",{className:"absolute right-0 top-10 w-48 bg-slate-900 border border-purple-500/30 rounded-lg shadow-2xl z-50 overflow-hidden",children:[a.jsx("button",{onClick:W,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-white text-sm",children:me?a.jsxs(a.Fragment,{children:[a.jsx(dy,{size:16,className:"text-yellow-400"}),a.jsx("span",{children:"Favorilerden kar"})]}):a.jsxs(a.Fragment,{children:[a.jsx(oo,{size:16,className:"text-yellow-400"}),a.jsx("span",{children:"Favorilere Ekle"})]})}),q?a.jsxs("button",{onClick:ne,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-green-400 text-sm",children:[a.jsx(ao,{size:16}),a.jsx("span",{children:"Engeli Kaldr"})]}):a.jsxs("button",{onClick:U,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-red-400 text-sm",children:[a.jsx(ao,{size:16}),a.jsx("span",{children:"Kullancy Engelle"})]}),a.jsxs("button",{onClick:Me,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-orange-400 text-sm border-t border-slate-700/50",children:[a.jsx(Xv,{size:16}),a.jsx("span",{children:"ikayet Et"})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-6 pb-6 border-b border-purple-500/20",children:[a.jsxs("div",{className:"relative group",children:[_?a.jsxs("button",{onClick:()=>{var k;return(k=Zt.current)==null?void 0:k.click()},disabled:m,className:"relative w-32 h-32 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-pink-500/40 flex items-center justify-center overflow-hidden cursor-pointer disabled:cursor-not-allowed transition-all hover:border-pink-500/60 hover:scale-105 shadow-lg",children:[l!=null&&l.avatar_url?a.jsx("img",{src:l.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):a.jsx(_e,{className:"text-pink-400",size:40}),a.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-full flex items-center justify-center",children:m?a.jsx(je,{className:"animate-spin text-white",size:24}):a.jsx(hy,{className:"text-white",size:24})})]}):a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-pink-500/40 flex items-center justify-center overflow-hidden shadow-lg",children:l!=null&&l.avatar_url?a.jsx("img",{src:l.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):a.jsx(_e,{className:"text-pink-400",size:40})}),_&&a.jsx("input",{ref:Zt,type:"file",accept:"image/*",onChange:Bn,className:"hidden"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"text-2xl font-semibold text-white",children:p?a.jsx("input",{type:"text",value:w,onChange:k=>N(k.target.value),className:"bg-slate-950/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500/60",autoFocus:!0}):(l==null?void 0:l.full_name)||(l==null?void 0:l.username)||"User"}),(l==null?void 0:l.username)&&a.jsxs("span",{className:"text-slate-500 text-sm",children:["@",l.username]})]}),p?a.jsx("textarea",{value:z,onChange:k=>g(k.target.value),placeholder:n.profile.bioPlaceholder,className:"w-full mt-2 bg-slate-950/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 resize-none",rows:3}):(l==null?void 0:l.bio)&&a.jsx("p",{className:"text-slate-300 mb-2",children:l.bio}),_&&a.jsx("button",{onClick:()=>{var k;return(k=Zt.current)==null?void 0:k.click()},disabled:m,className:"mt-2 text-sm text-purple-400 hover:text-purple-300 transition-colors disabled:opacity-50",children:m?n.profile.uploading:n.profile.changeAvatar})]})]}),x&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6 pb-6 border-b border-purple-500/20",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:a.jsx(Vr,{className:"text-purple-400",size:18})}),a.jsx("p",{className:"text-2xl font-bold text-white",children:x.public_dreams_count}),a.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.publicDreams})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:a.jsx(wr,{className:"text-pink-400",size:18})}),a.jsx("p",{className:"text-2xl font-bold text-white",children:x.total_likes_received}),a.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.likesReceived})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:a.jsx(br,{className:"text-cyan-400",size:18})}),a.jsx("p",{className:"text-2xl font-bold text-white",children:x.total_comments_received}),a.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.comments})]}),a.jsxs("button",{onClick:tr,className:"text-center hover:bg-slate-950/30 rounded-lg p-2 transition-colors",children:[a.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:a.jsx(Lf,{className:"text-purple-400",size:18})}),a.jsx("p",{className:"text-2xl font-bold text-white",children:x.followers_count}),a.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.followers})]}),a.jsxs("button",{onClick:Mn,className:"text-center hover:bg-slate-950/30 rounded-lg p-2 transition-colors",children:[a.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:a.jsx(_e,{className:"text-pink-400",size:18})}),a.jsx("p",{className:"text-2xl font-bold text-white",children:x.following_count}),a.jsx("p",{className:"text-slate-400 text-xs",children:n.profile.following})]})]}),_&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/30 rounded-lg",children:[a.jsx(Of,{className:"text-purple-400",size:20}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-sm",children:n.profile.email}),a.jsx("p",{className:"text-white",children:l==null?void 0:l.email})]})]}),a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/30 rounded-lg",children:[a.jsx(Ji,{className:"text-pink-400",size:20}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-sm",children:n.profile.memberSince}),a.jsx("p",{className:"text-white",children:l!=null&&l.created_at?new Date(l.created_at).toLocaleDateString(s==="tr"?"tr-TR":"en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]}),a.jsx("div",{className:"flex gap-4 pt-6 border-t border-purple-500/20",children:p?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:ze,className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:[a.jsx(oy,{size:18}),n.profile.saveChanges]}),a.jsxs("button",{onClick:er,className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-slate-800 text-slate-300 font-semibold hover:bg-slate-700 transition-all duration-300",children:[a.jsx($t,{size:18}),n.profile.cancel]})]}):a.jsx(a.Fragment,{children:_?a.jsxs("button",{onClick:()=>{N((l==null?void 0:l.full_name)||""),g((l==null?void 0:l.bio)||""),v(!0)},className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 transition-all duration-300",children:[a.jsx(ly,{size:18}),n.profile.editProfile]}):a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:Fn,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${y?"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700":"bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-500 hover:to-purple-500"}`,children:y?a.jsxs(a.Fragment,{children:[a.jsx(fy,{size:18}),n.profile.followingButton]}):a.jsxs(a.Fragment,{children:[a.jsx(dc,{size:18}),n.profile.follow]})}),a.jsxs("button",{onClick:()=>t(`/messages?user=${c}`),className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-slate-800 text-white hover:bg-slate-700 border border-slate-700 transition-all duration-300",children:[a.jsx(br,{size:18}),n.profile.message]})]})})})]})]}),!_&&a.jsxs("div",{className:"mt-12",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 pb-4 border-b border-purple-500/20",children:[a.jsx(ey,{className:"text-purple-400",size:20}),a.jsx("h2",{className:"text-2xl font-semibold text-white",children:n.profile.publicDreamsTitle})]}),Ke?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(je,{className:"animate-spin text-purple-400",size:32})}):R.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Vr,{className:"mx-auto mb-4 text-slate-600",size:48}),a.jsx("p",{className:"text-slate-400",children:n.profile.noPublicDreams})]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:R.map(k=>a.jsxs("div",{onClick:()=>t("/social"),className:"group relative aspect-square bg-slate-900/50 border border-purple-500/20 rounded-xl overflow-hidden cursor-pointer hover:border-purple-500/40 transition-all",children:[k.image_url?a.jsx("img",{src:k.image_url,alt:"Dream",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:a.jsx(Jt,{className:"text-purple-400/50",size:32})}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:a.jsxs("div",{className:"flex items-center gap-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{size:20}),a.jsx("span",{className:"font-semibold",children:k.likes_count})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(br,{size:20}),a.jsx("span",{className:"font-semibold",children:k.comments_count})]})]})}),k.status==="pending"&&a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("span",{className:"px-2 py-1 bg-yellow-500/90 text-yellow-900 text-xs font-semibold rounded backdrop-blur-sm",children:n.social.pending})})]},k.id))})]})]}),yt&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>ct(!1)}),a.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 max-h-[70vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:n.profile.followers}),a.jsx("button",{onClick:()=>ct(!1),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx($t,{size:20})})]}),a.jsx("div",{className:"overflow-y-auto flex-1 p-4",children:C?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(je,{className:"animate-spin text-purple-400",size:32})}):D.length===0?a.jsx("p",{className:"text-slate-400 text-center py-8",children:"No followers yet"}):a.jsx("div",{className:"space-y-3",children:D.map(k=>a.jsxs("button",{onClick:()=>{ct(!1),t(`/profile/${k.id}`)},className:"w-full flex items-center gap-3 p-3 hover:bg-slate-950/50 rounded-lg transition-colors",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:k.avatar_url?a.jsx("img",{src:k.avatar_url,alt:"",className:"w-full h-full object-cover"}):a.jsx(_e,{size:24,className:"text-white"})}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("p",{className:"text-white font-medium",children:k.full_name}),k.username&&a.jsxs("p",{className:"text-slate-400 text-sm",children:["@",k.username]})]})]},k.id))})})]})]}),It&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>Oe(!1)}),a.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 max-h-[70vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:n.profile.following}),a.jsx("button",{onClick:()=>Oe(!1),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx($t,{size:20})})]}),a.jsx("div",{className:"overflow-y-auto flex-1 p-4",children:C?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(je,{className:"animate-spin text-purple-400",size:32})}):F.length===0?a.jsx("p",{className:"text-slate-400 text-center py-8",children:"Not following anyone yet"}):a.jsx("div",{className:"space-y-3",children:F.map(k=>a.jsxs("button",{onClick:()=>{Oe(!1),t(`/profile/${k.id}`)},className:"w-full flex items-center gap-3 p-3 hover:bg-slate-950/50 rounded-lg transition-colors",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:k.avatar_url?a.jsx("img",{src:k.avatar_url,alt:"",className:"w-full h-full object-cover"}):a.jsx(_e,{size:24,className:"text-white"})}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("p",{className:"text-white font-medium",children:k.full_name}),k.username&&a.jsxs("p",{className:"text-slate-400 text-sm",children:["@",k.username]})]})]},k.id))})})]})]})]})}function My(){const{user:e}=lt(),t=ot(),{t:r,language:n}=Ve(),[s,i]=j.useState([]),[l,o]=j.useState(!0),[c,u]=j.useState({total:0,completed:0,pending:0});j.useEffect(()=>{if(!e){t("/signin");return}d()},[e,t]);const d=async()=>{if(e)try{const{data:p,error:v}=await T.from("dreams").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);if(v)throw v;const w=p||[];i(w);const N=w.filter(m=>m.status==="completed").length,z=w.filter(m=>m.status==="pending").length,{count:g}=await T.from("dreams").select("*",{count:"exact",head:!0}).eq("user_id",e.id);u({total:g||0,completed:N,pending:z})}catch(p){console.error("Error loading dreams:",p)}finally{o(!1)}},h=p=>{const v=new Date(p),w=n==="tr"?"tr-TR":"en-US";return v.toLocaleDateString(w,{year:"numeric",month:"long",day:"numeric"})};return e?l?a.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-400"})}):a.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:r.dashboard.title}),a.jsx("p",{className:"text-slate-400 text-lg",children:r.dashboard.subtitle})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-xl p-6 hover:border-purple-500/30 transition-all",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center",children:a.jsx(Vr,{className:"text-purple-400",size:24})})}),a.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:c.total}),a.jsx("p",{className:"text-slate-400 text-sm",children:r.dashboard.totalDreams})]}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-xl p-6 hover:border-pink-500/30 transition-all",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:"w-12 h-12 rounded-lg bg-pink-500/20 flex items-center justify-center",children:a.jsx(Jt,{className:"text-pink-400",size:24})})}),a.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:c.completed}),a.jsx("p",{className:"text-slate-400 text-sm",children:r.dashboard.completedAnalyses})]}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-xl p-6 hover:border-cyan-500/30 transition-all",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:"w-12 h-12 rounded-lg bg-cyan-500/20 flex items-center justify-center",children:a.jsx(Zi,{className:"text-cyan-400",size:24})})}),a.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:c.pending}),a.jsx("p",{className:"text-slate-400 text-sm",children:r.dashboard.pendingAnalyses})]})]}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-semibold text-white",children:r.dashboard.recentDreams}),a.jsx("button",{onClick:()=>t("/library"),className:"text-purple-400 hover:text-purple-300 text-sm font-medium transition-colors",children:r.dashboard.viewAll})]}),s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Vr,{className:"mx-auto mb-4 text-slate-600",size:48}),a.jsx("p",{className:"text-slate-400 mb-4",children:r.dashboard.noDreams}),a.jsx("button",{onClick:()=>t("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all",children:r.dashboard.analyzeFirstDream})]}):a.jsx("div",{className:"space-y-4",children:s.map(p=>a.jsx("div",{onClick:()=>t("/library"),className:"bg-slate-950/30 rounded-lg p-4 hover:bg-slate-950/50 transition-all cursor-pointer border border-transparent hover:border-purple-500/20",children:a.jsxs("div",{className:"flex items-start gap-4",children:[p.image_url&&a.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:a.jsx("img",{src:p.image_url,alt:"Dream visualization",className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-xs mb-2",children:[a.jsx(Ji,{size:12}),h(p.created_at)]}),a.jsx("p",{className:"text-slate-300 text-sm line-clamp-2 mb-2",children:p.dream_text}),p.status==="pending"&&a.jsx("span",{className:"inline-block px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:r.social.pending})]})]})},p.id))})]})]})]}):null}function Fy(){const{user:e}=lt(),t=ot(),{t:r,language:n}=Ve(),{showToast:s}=Yr(),[i,l]=j.useState([]),[o,c]=j.useState(!0),[u,d]=j.useState(null),[h,p]=j.useState([]),[v,w]=j.useState(""),[N,z]=j.useState(!1),[g,m]=j.useState(!1),[f,x]=j.useState("recent"),[S,y]=j.useState("all"),[b,_]=j.useState(""),[L,R]=j.useState(0),[re,Ke]=j.useState(!0),[Ue,yt]=j.useState(!1),[ct,It]=j.useState(new Set),[Oe,D]=j.useState(!1),[I,F]=j.useState([]),[Y,C]=j.useState(!1),[O,q]=j.useState(""),J=j.useRef(null),ae=j.useRef(null);j.useEffect(()=>{me(),e&&ee()},[e,f,S]),j.useEffect(()=>(J.current&&J.current.disconnect(),J.current=new IntersectionObserver(E=>{E[0].isIntersecting&&re&&!Ue&&!o&&ut()},{threshold:.1}),ae.current&&J.current.observe(ae.current),()=>{J.current&&J.current.disconnect()}),[re,Ue,o,i]);const ee=async()=>{if(e)try{const{data:E,error:Q}=await T.from("follows").select("following_id").eq("follower_id",e.id);if(Q)throw Q;It(new Set((E||[]).map(U=>U.following_id)))}catch(E){console.error("Error loading following users:",E)}},me=async(E=!0)=>{var Q,U,ne;try{E?(c(!0),R(0),l([])):yt(!0);const W=E?0:L+1,Me=10,xt=W*Me;let ze=T.from("dreams").select(`
          *,
          profiles:user_id (
            full_name,
            avatar_url,
            username
          )
        `).eq("is_public",!0).in("status",["completed","pending"]);if(S==="following"&&e){const k=Array.from(ct);if(k.length===0){l([]),Ke(!1),c(!1),yt(!1);return}ze=ze.in("user_id",k)}b.trim()&&(ze=ze.or(`dream_text.ilike.%${b}%,analysis_text.ilike.%${b}%`)),f==="recent"?ze=ze.order("created_at",{ascending:!1}):f==="popular"?ze=ze.order("created_at",{ascending:!1}):f==="trending"&&(ze=ze.order("created_at",{ascending:!1})),ze=ze.range(xt,xt+Me-1);let{data:er,error:tr}=await ze;if(tr)if((Q=tr.message)!=null&&Q.includes("is_public")||tr.code==="42703"||tr.code==="PGRST116"){console.warn("is_public column not found. Please run migration to enable public dreams feature.");let k=T.from("dreams").select(`
              *,
              profiles:user_id (
                full_name,
                avatar_url,
                username
              )
            `).in("status",["completed","pending"]);if(S==="following"&&e){const Z=Array.from(ct);if(Z.length===0){l([]),Ke(!1),c(!1),yt(!1);return}k=k.in("user_id",Z)}b.trim()&&(k=k.or(`dream_text.ilike.%${b}%,analysis_text.ilike.%${b}%`)),f==="recent"?k=k.order("created_at",{ascending:!1}):f==="popular"?k=k.order("created_at",{ascending:!1}):f==="trending"&&(k=k.order("created_at",{ascending:!1})),k=k.range(xt,xt+Me-1);const{data:A,error:V}=await k;if(V)throw console.error("Error loading dreams:",V),V;er=A,er&&(er=er.filter(Z=>Z.is_public===!0||Z.is_public===void 0))}else throw console.error("Error loading dreams:",tr),tr;const Mn=(er||[]).map(k=>k.id);let Fn=null,Bn=null;if(Mn.length>0){try{const{data:B}=await T.from("dream_likes").select("dream_id, user_id").in("dream_id",Mn);Fn=B}catch{Fn=[]}try{const{data:B}=await T.from("dream_comments").select("dream_id").in("dream_id",Mn);Bn=B}catch{Bn=[]}const k=new Map,A=new Map,V=new Set;(Fn||[]).forEach(B=>{k.set(B.dream_id,(k.get(B.dream_id)||0)+1),e&&B.user_id===e.id&&V.add(B.dream_id)}),(Bn||[]).forEach(B=>{A.set(B.dream_id,(A.get(B.dream_id)||0)+1)});const Z=(er||[]).map(B=>({...B,likes_count:k.get(B.id)||0,comments_count:A.get(B.id)||0,is_liked:V.has(B.id),profiles:B.profiles||{full_name:"Anonymous",avatar_url:null,username:null}}));f==="popular"?Z.sort((B,xe)=>{const ue=B.likes_count*2+B.comments_count;return xe.likes_count*2+xe.comments_count-ue}):f==="trending"&&Z.sort((B,xe)=>{const ue=new Date(B.created_at).getTime(),Tt=new Date(xe.created_at).getTime(),Cr=(Date.now()-ue)/(1e3*60*60*24),de=(B.likes_count*2+B.comments_count)/(Cr+1);return(xe.likes_count*2+xe.comments_count)/(Cr+1)-de}),l(E?Z:B=>[...B,...Z]),Ke(Z.length===Me),R(W)}else E&&l([]),Ke(!1)}catch(W){console.error("Error loading public dreams:",W),(U=W==null?void 0:W.message)!=null&&U.includes("is_public")||(W==null?void 0:W.code)==="42703"||(W==null?void 0:W.code)==="PGRST116"?s("Please run the database migration to enable social features","error"):(ne=W==null?void 0:W.message)!=null&&ne.includes("permission")||(W==null?void 0:W.code)==="42501"?s("Permission denied. Please check your database permissions.","error"):s("Failed to load dreams. Please try again later.","error")}finally{c(!1),yt(!1)}},ut=()=>{!Ue&&re&&me(!1)},qs=async E=>{if(!E.trim()||E.length<2){F([]);return}try{C(!0);let Q=[];if(e){const{data:Me}=await T.from("user_blocks").select("blocked_id").eq("blocker_id",e.id);Q=(Me||[]).map(xt=>xt.blocked_id)}const{data:U,error:ne}=await T.from("profiles").select("id, full_name, username, avatar_url, bio").or(`full_name.ilike.%${E}%,username.ilike.%${E}%`).limit(10);if(ne)throw ne;const W=(U||[]).filter(Me=>Me.id!==(e==null?void 0:e.id)&&!Q.includes(Me.id));F(W)}catch(Q){console.error("Error searching users:",Q)}finally{C(!1)}};j.useEffect(()=>{const E=setTimeout(()=>{Oe&&qs(O)},300);return()=>clearTimeout(E)},[O,Oe]);const Ut=async E=>{if(!e){t("/signin");return}try{const Q=i.find(U=>U.id===E);if(!Q)return;if(Q.is_liked){const{error:U}=await T.from("dream_likes").delete().eq("dream_id",E).eq("user_id",e.id);if(U)throw U;l(ne=>ne.map(W=>W.id===E?{...W,is_liked:!1,likes_count:W.likes_count-1}:W))}else{const{error:U}=await T.from("dream_likes").insert({dream_id:E,user_id:e.id});if(U)throw U;l(ne=>ne.map(W=>W.id===E?{...W,is_liked:!0,likes_count:W.likes_count+1}:W))}}catch(Q){console.error("Error toggling like:",Q),s("Failed to update like","error")}},Zt=async(E,Q)=>{if(Q.stopPropagation(),!e){t("/signin");return}if(confirm(r.social.deleteConfirm))try{try{await T.from("dream_likes").delete().eq("dream_id",E)}catch(ne){console.log("Error deleting likes:",ne)}try{await T.from("dream_comments").delete().eq("dream_id",E)}catch(ne){console.log("Error deleting comments:",ne)}const{error:U}=await T.from("dreams").delete().eq("id",E).eq("user_id",e.id);if(U)throw U;l(ne=>ne.filter(W=>W.id!==E)),(u==null?void 0:u.id)===E&&d(null),s(r.social.dreamDeleted,"success")}catch(U){console.error("Error deleting dream:",U),s(r.social.deleteFailed,"error")}},$n=async E=>{try{z(!0);const{data:Q,error:U}=await T.from("dream_comments").select(`
          *,
          profiles:user_id (
            full_name,
            avatar_url
          )
        `).eq("dream_id",E).order("created_at",{ascending:!0});if(U)throw U;p((Q||[]).map(ne=>({...ne,profiles:ne.profiles||{full_name:"Anonymous",avatar_url:null}})))}catch(Q){console.error("Error loading comments:",Q),s("Failed to load comments","error")}finally{z(!1)}},Hs=async()=>{if(!e){t("/signin");return}if(!(!u||!v.trim()))try{m(!0);const{error:E}=await T.from("dream_comments").insert({dream_id:u.id,user_id:e.id,comment_text:v.trim()});if(E)throw E;await $n(u.id),l(Q=>Q.map(U=>U.id===u.id?{...U,comments_count:U.comments_count+1}:U)),w(""),s(r.social.commentAdded,"success")}catch(E){console.error("Error adding comment:",E),s(r.social.commentFailed,"error")}finally{m(!1)}},ba=async E=>{if(!(!e||!u))try{const{error:Q}=await T.from("dream_comments").delete().eq("id",E).eq("user_id",e.id);if(Q)throw Q;await $n(u.id),u&&(d({...u,comments_count:Math.max(0,u.comments_count-1)}),l(U=>U.map(ne=>ne.id===u.id?{...ne,comments_count:Math.max(0,ne.comments_count-1)}:ne))),s(r.social.commentDeleted,"success")}catch(Q){console.error("Error deleting comment:",Q),s(r.social.commentDeleteFailed,"error")}},In=E=>{const Q=new Date(E),U=new Date,ne=U.getTime()-Q.getTime(),W=Math.floor(ne/6e4),Me=Math.floor(W/60),xt=Math.floor(Me/24);if(W<1)return r.social.justNow;if(W<60)return`${W}${r.social.minutesAgo}`;if(Me<24)return`${Me}${r.social.hoursAgo}`;if(xt<7)return`${xt}${r.social.daysAgo}`;const ze=n==="tr"?"tr-TR":"en-US";return Q.toLocaleDateString(ze,{month:"long",day:"numeric",year:Q.getFullYear()!==U.getFullYear()?"numeric":void 0})},Un=E=>{d(E),p([]),w(""),$n(E.id)};return o?a.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:a.jsx(je,{className:"animate-spin text-purple-400",size:48})}):a.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[a.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",fontFeatureSettings:'"kern" 1',WebkitTextStroke:"0.5px rgba(236, 72, 153, 0.3)"},children:r.social.title}),a.jsx("p",{className:"text-slate-400 text-lg",children:r.social.subtitle})]}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2 border-b border-purple-500/20",children:[a.jsx("button",{onClick:()=>D(!1),className:`px-4 py-2 text-sm font-medium transition-colors ${Oe?"text-slate-400 hover:text-slate-300":"text-purple-400 border-b-2 border-purple-400"}`,children:r.social.searchDreams}),a.jsx("button",{onClick:()=>D(!0),className:`px-4 py-2 text-sm font-medium transition-colors ${Oe?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-slate-300"}`,children:r.social.searchUsers})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),Oe?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",value:O,onChange:E=>q(E.target.value),placeholder:r.social.searchUsersPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),O&&a.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-slate-900 border border-purple-500/30 rounded-lg shadow-2xl max-h-96 overflow-y-auto z-50",children:Y?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(je,{className:"animate-spin text-purple-400",size:24})}):I.length===0?a.jsx("div",{className:"text-center py-8 text-slate-400",children:a.jsx("p",{children:r.social.noUsersFound})}):a.jsx("div",{className:"divide-y divide-purple-500/10",children:I.map(E=>a.jsxs("button",{onClick:()=>{t(`/profile/${E.id}`),D(!1),q("")},className:"w-full p-4 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0",children:E.avatar_url?a.jsx("img",{src:E.avatar_url,alt:E.full_name,className:"w-full h-full object-cover"}):a.jsx(_e,{className:"text-pink-400",size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-white font-semibold truncate",children:E.full_name||E.username||r.social.anonymous}),E.username&&a.jsxs("p",{className:"text-slate-400 text-sm truncate",children:["@",E.username]}),E.bio&&a.jsx("p",{className:"text-slate-500 text-xs truncate mt-1",children:E.bio})]})]},E.id))})})]}):a.jsx("input",{type:"text",value:b,onChange:E=>{_(E.target.value),setTimeout(()=>me(!0),500)},placeholder:r.social.searchDreamsPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg p-2",children:[a.jsx(Jv,{size:18,className:"text-slate-400"}),a.jsx("button",{onClick:()=>{y("all"),me(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all ${S==="all"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:r.social.all}),e&&a.jsxs("button",{onClick:()=>{y("following"),me(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${S==="following"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[a.jsx(Lf,{size:14}),r.social.following]})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg p-2",children:[a.jsxs("button",{onClick:()=>{x("recent"),me(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${f==="recent"?"bg-pink-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[a.jsx(Gv,{size:14}),r.social.recent]}),a.jsxs("button",{onClick:()=>{x("popular"),me(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${f==="popular"?"bg-pink-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[a.jsx(wr,{size:14}),r.social.popular]}),a.jsxs("button",{onClick:()=>{x("trending"),me(!0)},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${f==="trending"?"bg-pink-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[a.jsx(Zi,{size:14}),r.social.trending]})]})]})]}),i.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx(_e,{className:"mx-auto mb-4 text-slate-600",size:64}),a.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.social.noDreams}),a.jsx("button",{onClick:()=>t("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:r.social.shareFirst})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:i.map((E,Q)=>a.jsxs("div",{ref:Q===i.length-1?ae:null,className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl overflow-hidden hover:border-purple-500/40 transition-all duration-300 group cursor-pointer",onClick:()=>Un(E),children:[a.jsxs("div",{className:"relative aspect-square bg-slate-950 overflow-hidden",children:[E.image_url?a.jsx("img",{src:E.image_url,alt:"Dream visualization",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:a.jsx(Jt,{className:"text-purple-400/50",size:48})}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:a.jsxs("div",{className:"flex items-center gap-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{size:24,className:E.is_liked?"fill-current text-pink-400":""}),a.jsx("span",{className:"font-semibold",children:E.likes_count})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(br,{size:24}),a.jsx("span",{className:"font-semibold",children:E.comments_count})]})]})}),E.status==="pending"&&a.jsx("div",{className:"absolute top-3 left-3",children:a.jsx("span",{className:"px-3 py-1 bg-yellow-500/90 text-yellow-900 text-xs font-semibold rounded-full backdrop-blur-sm",children:r.social.pending})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:U=>{U.stopPropagation(),t(`/profile/${E.user_id}`)},className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-white/30 flex items-center justify-center overflow-hidden hover:scale-110 transition-transform",children:E.profiles.avatar_url?a.jsx("img",{src:E.profiles.avatar_url,alt:E.profiles.full_name,className:"w-full h-full object-cover"}):a.jsx(_e,{className:"text-pink-400",size:16})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("button",{onClick:U=>{U.stopPropagation(),t(`/profile/${E.user_id}`)},className:"text-white font-semibold text-sm hover:text-purple-300 transition-colors truncate",children:E.profiles.full_name||E.profiles.username||r.social.anonymous}),a.jsx("p",{className:"text-white/70 text-xs",children:In(E.created_at)})]})]})})]}),a.jsxs("div",{className:"p-4 bg-slate-900/50",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:U=>{U.stopPropagation(),Ut(E.id)},className:`transition-all hover:scale-110 ${E.is_liked?"text-pink-400":"text-slate-400 hover:text-pink-400"}`,children:a.jsx(wr,{size:24,className:E.is_liked?"fill-current":""})}),a.jsx("button",{onClick:U=>{U.stopPropagation(),Un(E)},className:"text-slate-400 hover:text-purple-400 transition-all hover:scale-110",children:a.jsx(br,{size:24})}),a.jsx("button",{onClick:U=>{U.stopPropagation(),navigator.share?navigator.share({title:r.social.checkOutDream,text:E.dream_text.substring(0,100),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),s(r.social.linkCopied,"success"))},className:"text-slate-400 hover:text-cyan-400 transition-all hover:scale-110",children:a.jsx(uy,{size:24})}),e&&E.user_id===e.id&&a.jsx("button",{onClick:U=>{U.stopPropagation(),Zt(E.id,U)},className:"text-slate-400 hover:text-red-400 transition-all hover:scale-110 ml-auto",title:r.social.deleteDream,children:a.jsx(co,{size:20})})]})}),a.jsx("div",{className:"mb-2",children:E.likes_count>0&&a.jsxs("p",{className:"text-white font-semibold text-sm",children:[E.likes_count," ",E.likes_count===1?r.social.like:r.social.likes]})}),a.jsxs("div",{className:"mb-2",children:[a.jsx("button",{onClick:U=>{U.stopPropagation(),t(`/profile/${E.user_id}`)},className:"text-white font-semibold text-sm hover:text-purple-300 transition-colors mr-2",children:E.profiles.full_name||E.profiles.username||r.social.anonymous}),a.jsx("span",{className:"text-white/80 text-sm line-clamp-2",children:E.dream_text})]}),E.comments_count>0&&a.jsxs("button",{onClick:U=>{U.stopPropagation(),Un(E)},className:"text-white/70 hover:text-white text-sm transition-colors",children:[r.social.viewAll," ",E.comments_count," ",E.comments_count===1?r.social.comment:r.social.comments]})]})]},E.id))}),Ue&&a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(je,{className:"animate-spin text-purple-400",size:32})}),!re&&i.length>0&&a.jsx("div",{className:"text-center py-8 text-slate-400",children:a.jsx("p",{children:r.social.endOfFeed})})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 md:p-6",onClick:()=>d(null),children:a.jsx("div",{className:"bg-slate-900 border border-purple-500/30 rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:E=>E.stopPropagation(),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-6 border-b border-purple-500/20",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden",children:u.profiles.avatar_url?a.jsx("img",{src:u.profiles.avatar_url,alt:u.profiles.full_name,className:"w-full h-full object-cover"}):a.jsx(_e,{className:"text-pink-400",size:24})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white font-semibold",children:u.profiles.full_name||r.social.anonymous}),a.jsx("p",{className:"text-slate-400 text-sm",children:In(u.created_at)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[e&&u.user_id===e.id&&a.jsx("button",{onClick:E=>{E.stopPropagation(),Zt(u.id,E)},className:"p-2 text-slate-400 hover:text-red-400 transition-colors",title:r.social.deleteDream,children:a.jsx(co,{size:20})}),a.jsx("button",{onClick:()=>d(null),className:"text-slate-400 hover:text-white transition-colors text-2xl",children:""})]})]}),u.image_url&&a.jsx("div",{className:"mb-6 rounded-xl overflow-hidden",children:a.jsx("img",{src:u.image_url,alt:"Dream visualization",className:"w-full h-auto object-cover"})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:r.library.yourDream}),a.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:u.dream_text})]}),u.analysis_text&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-pink-400 mb-2",children:r.library.analysis}),a.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:u.analysis_text})]}),a.jsxs("div",{className:"border-t border-purple-500/20 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:r.social.comments}),e?a.jsxs("div",{className:"mb-6 flex gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0",children:a.jsx(_e,{className:"text-pink-400",size:16})}),a.jsxs("div",{className:"flex-1 flex gap-2",children:[a.jsx("input",{type:"text",value:v,onChange:E=>w(E.target.value),onKeyPress:E=>E.key==="Enter"&&!E.shiftKey&&Hs(),placeholder:r.social.writeComment,className:"flex-1 px-4 py-2 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),a.jsx("button",{onClick:Hs,disabled:!v.trim()||g,className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-lg hover:from-pink-500 hover:to-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:g?a.jsx(je,{className:"animate-spin",size:18}):a.jsx(uc,{size:18})})]})]}):a.jsxs("div",{className:"mb-6 p-4 bg-slate-950/30 rounded-lg text-center",children:[a.jsx("p",{className:"text-slate-400 mb-2",children:r.social.signInToComment}),a.jsx("button",{onClick:()=>{d(null),t("/signin")},className:"text-purple-400 hover:text-purple-300",children:r.social.signIn})]}),N?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(je,{className:"animate-spin text-purple-400",size:24})}):h.length===0?a.jsx("p",{className:"text-slate-400 text-center py-8",children:r.social.noComments}):a.jsx("div",{className:"space-y-4",children:h.map(E=>a.jsxs("div",{className:"flex gap-3 group",children:[a.jsx("button",{onClick:()=>t(`/profile/${E.user_id}`),className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0 hover:border-purple-400/50 transition-colors",children:E.profiles.avatar_url?a.jsx("img",{src:E.profiles.avatar_url,alt:E.profiles.full_name,className:"w-full h-full object-cover"}):a.jsx(_e,{className:"text-pink-400",size:16})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("button",{onClick:()=>t(`/profile/${E.user_id}`),className:"text-white font-semibold text-sm hover:text-purple-400 transition-colors",children:E.profiles.full_name||r.social.anonymous}),a.jsx("p",{className:"text-slate-500 text-xs",children:In(E.created_at)}),e&&E.user_id===e.id&&a.jsx("button",{onClick:()=>ba(E.id),className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity p-1 text-slate-500 hover:text-red-400",title:r.social.deleteComment,children:a.jsx($t,{size:14})})]}),a.jsx("p",{className:"text-slate-300 text-sm",children:E.comment_text})]})]},E.id))})]})]})})})]})}function By(){const{user:e}=lt(),t=ot(),{t:r}=Ve(),[n,s]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState(!1);j.useEffect(()=>{if(!e){t("/signin");return}u()},[e,t]);const u=async()=>{if(e)try{const{data:h,error:p}=await T.from("profiles").select("trial_used, trial_start, trial_end").eq("id",e.id).single();if(p)throw p;h!=null&&h.trial_used&&c(!0)}catch(h){console.error("Error checking trial status:",h)}},d=async()=>{if(!(!e||o)){s(!0);try{const h=new Date,p=new Date(h.getTime()+3*24*60*60*1e3),{error:v}=await T.from("profiles").update({trial_used:!0,trial_start:h.toISOString(),trial_end:p.toISOString()}).eq("id",e.id);if(v)throw v;l(!0)}catch(h){console.error("Error activating trial:",h)}finally{s(!1)}}};return e?a.jsxs("div",{className:"min-h-screen relative pt-24 pb-16 px-4 md:px-6",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),a.jsx("div",{className:"relative max-w-2xl mx-auto z-10",children:o?a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-yellow-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500/20 flex items-center justify-center mx-auto mb-6",children:a.jsx(Jt,{className:"text-yellow-400",size:32})}),a.jsx("h1",{className:"text-3xl font-bold mb-4 text-white",children:r.trial.alreadyUsed}),a.jsx("p",{className:"text-slate-400 mb-8",children:r.trial.alreadyUsedDesc}),a.jsx("button",{onClick:()=>t("/pricing"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:r.trial.viewPlans})]}):i?a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-green-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-6",children:a.jsx(Se,{className:"text-green-400",size:32})}),a.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent",children:r.trial.activated}),a.jsx("p",{className:"text-slate-300 text-lg mb-2",children:r.trial.activatedDesc}),a.jsx("p",{className:"text-slate-400 mb-8",children:r.trial.enjoy3Days}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-1",children:r.trial.duration}),a.jsx("p",{className:"text-white font-semibold",children:r.trial.threeDays})]}),a.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-1",children:r.trial.analyses}),a.jsx("p",{className:"text-white font-semibold",children:r.trial.threeAnalyses})]}),a.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-1",children:r.trial.features}),a.jsx("p",{className:"text-white font-semibold",children:r.trial.fullAccess})]})]}),a.jsxs("button",{onClick:()=>t("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 inline-flex items-center gap-2",children:[r.trial.startAnalyzing,a.jsx(Af,{size:20})]})]}):a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center mx-auto mb-6",children:a.jsx(Jt,{className:"text-purple-400",size:32})}),a.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:r.trial.activateTitle}),a.jsx("p",{className:"text-slate-300 text-lg mb-8",children:r.trial.activateDesc}),a.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-6 mb-8 text-left",children:[a.jsx("h3",{className:"text-white font-semibold mb-4",children:r.trial.whatsIncluded}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(Se,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),a.jsx("span",{className:"text-slate-300",children:r.trial.feature1})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(Se,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),a.jsx("span",{className:"text-slate-300",children:r.trial.feature2})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(Se,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),a.jsx("span",{className:"text-slate-300",children:r.trial.feature3})]})]})]}),a.jsx("button",{onClick:d,disabled:n,className:"w-full px-6 py-4 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:n?r.trial.activating:r.trial.activateNow})]})})]}):null}function qy(){const{user:e}=lt(),t=ot(),{t:r}=Ve(),[n,s]=j.useState([]),[i,l]=j.useState(null),[o,c]=j.useState([]),[u,d]=j.useState(""),[h,p]=j.useState(!0),[v,w]=j.useState(!1),[N,z]=j.useState(""),[g,m]=j.useState([]),[f,x]=j.useState(!1),[S,y]=j.useState(!1),b=j.useRef(null);j.useEffect(()=>{if(!e){t("/signin");return}R();const C=T.channel("messages-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},O=>{console.log("New message received:",O),R(),i&&re(i)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`sender_id=eq.${e.id}`},O=>{console.log("Message sent:",O),R(),i&&re(i)}).subscribe();return()=>{T.removeChannel(C)}},[e,t]),j.useEffect(()=>{e&&!h&&(async()=>{if(!e)return;const q=new URLSearchParams(window.location.search).get("user");if(q&&q!==e.id){console.log("URL parameter detected, starting conversation with:",q),l(q),console.log("Loading profile for URL parameter user...");const J=await L(q);J&&F(J);const ae=window.location.pathname;window.history.replaceState({},"",ae)}})()},[e,h]),j.useEffect(()=>{i&&re(i)},[i]),j.useEffect(()=>{i&&!h&&(n.find(O=>O.user_id===i)||(console.log("Selected user not found in conversations, loading profile for:",i),L(i)))},[i,n,h]),j.useEffect(()=>{_()},[o]),j.useEffect(()=>{const C=setTimeout(()=>{N.trim()?It():m([])},300);return()=>clearTimeout(C)},[N]);const _=()=>{var C;(C=b.current)==null||C.scrollIntoView({behavior:"smooth"})},L=async C=>{if(!C)return null;try{console.log("Loading user profile for:",C);const{data:O,error:q}=await T.from("profiles").select("id, full_name, username, avatar_url").eq("id",C).single();if(q)return console.error("Error loading user profile:",q),null;if(O)return console.log("Loaded user profile:",O),F(O),s(J=>J.find(me=>me.user_id===O.id)?(console.log("User already exists in conversations"),J):(console.log("Adding user to conversations list"),[{user_id:O.id,full_name:O.full_name,username:O.username,avatar_url:O.avatar_url,last_message:null,last_message_at:new Date().toISOString(),unread_count:0},...J])),O}catch(O){console.error("Error loading user profile:",O)}return null},R=async()=>{if(e)try{const{data:C}=await T.from("user_blocks").select("blocker_id, blocked_id").or(`blocker_id.eq.${e.id},blocked_id.eq.${e.id}`),O=new Set;C==null||C.forEach(ee=>{ee.blocker_id===e.id?O.add(ee.blocked_id):O.add(ee.blocker_id)});const{data:q,error:J}=await T.from("messages").select("sender_id, receiver_id, message_text, created_at").or(`sender_id.eq.${e.id},receiver_id.eq.${e.id}`).order("created_at",{ascending:!1});if(J)throw J;const ae=new Map;for(const ee of q||[]){const me=ee.sender_id===e.id?ee.receiver_id:ee.sender_id;if(!O.has(me)&&!ae.has(me)){const{data:ut}=await T.from("profiles").select("id, full_name, username, avatar_url").eq("id",me).single();ut&&ae.set(me,{user_id:me,full_name:ut.full_name,username:ut.username,avatar_url:ut.avatar_url,last_message:ee.message_text,last_message_at:ee.created_at,unread_count:0})}}for(const[ee,me]of ae){const{count:ut}=await T.from("messages").select("*",{count:"exact",head:!0}).eq("sender_id",ee).eq("receiver_id",e.id).is("read_at",null);me.unread_count=ut||0}s(Array.from(ae.values()))}catch(C){console.error("Error loading conversations:",C)}finally{p(!1)}},re=async C=>{if(e)try{const{data:O,error:q}=await T.from("messages").select("*").or(`and(sender_id.eq.${e.id},receiver_id.eq.${C}),and(sender_id.eq.${C},receiver_id.eq.${e.id})`).order("created_at",{ascending:!0});if(q)throw q;c(O||[]),await T.from("messages").update({read_at:new Date().toISOString()}).eq("sender_id",C).eq("receiver_id",e.id).is("read_at",null),R()}catch(O){console.error("Error loading messages:",O)}},Ke=async()=>{if(!(!e||!i)&&confirm("Are you sure you want to delete this conversation? This cannot be undone."))try{const{error:C}=await T.from("messages").delete().or(`and(sender_id.eq.${e.id},receiver_id.eq.${i}),and(sender_id.eq.${i},receiver_id.eq.${e.id})`);if(C)throw C;l(null),c([]),R(),y(!1)}catch(C){console.error("Error deleting conversation:",C)}},Ue=async C=>{if(e)try{const{error:O}=await T.from("messages").delete().or(`and(sender_id.eq.${e.id},receiver_id.eq.${C}),and(sender_id.eq.${C},receiver_id.eq.${e.id})`);if(O)throw O;i===C&&(l(null),c([])),R()}catch(O){console.error("Error deleting conversation:",O)}},yt=async()=>{if(!(!e||!i)&&confirm("Are you sure you want to block this user? You will no longer see their messages."))try{console.log("Blocking user:",i);const{data:C,error:O}=await T.from("user_blocks").insert({blocker_id:e.id,blocked_id:i}).select();if(O)throw console.error("Block error:",O),O;console.log("Block successful:",C),await Ke(),console.log("User blocked successfully")}catch(C){console.error("Error blocking user:",C),alert("Failed to block user. Please try again.")}},ct=async()=>{if(!e||!i||!u.trim())return;w(!0);const C=u.trim();d("");try{const{data:O,error:q}=await T.from("user_blocks").select("id").eq("blocker_id",i).eq("blocked_id",e.id).single();if(q&&q.code!=="PGRST116"&&console.error("Error checking block status:",q),O){d(C),console.log("Cannot send message: user is blocked");return}const{data:J,error:ae}=await T.from("messages").insert({sender_id:e.id,receiver_id:i,message_text:C}).select();if(ae){console.error("Error sending message:",ae),d(C);return}console.log("Message sent successfully:",J),J&&J[0]&&c(ee=>[...ee,J[0]]),re(i),R()}catch(O){console.error("Error sending message:",O),d(C)}finally{w(!1)}},It=async()=>{if(N.trim()){x(!0);try{const{data:C}=await T.from("user_blocks").select("blocker_id, blocked_id").or(`blocker_id.eq.${e==null?void 0:e.id},blocked_id.eq.${e==null?void 0:e.id}`),O=new Set;C==null||C.forEach(ee=>{ee.blocker_id===(e==null?void 0:e.id)?O.add(ee.blocked_id):O.add(ee.blocker_id)});const{data:q,error:J}=await T.from("profiles").select("id, full_name, username, avatar_url").or(`full_name.ilike.%${N}%,username.ilike.%${N}%`).neq("id",(e==null?void 0:e.id)||"").limit(10);if(J)throw J;const ae=(q||[]).filter(ee=>!O.has(ee.id));m(ae)}catch(C){console.error("Error searching users:",C)}finally{x(!1)}}},Oe=async C=>{if(console.log("Starting conversation with:",C),l(C),n.find(q=>q.user_id===C))console.log("User already in conversations"),F(null);else{console.log("User not in conversations, fetching profile...");const q=await L(C);q&&F(q)}z(""),m([])},D=C=>new Date(C).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),[I,F]=j.useState(null),Y=up.useMemo(()=>{if(!i)return null;const C=n.find(q=>q.user_id===i);if(C)return console.log("Found user in conversations:",C),C;if(I&&I.id===i)return console.log("Found user in URL profile:",I),{user_id:I.id,full_name:I.full_name,username:I.username,avatar_url:I.avatar_url,last_message:null,last_message_at:null,unread_count:0};const O=g.find(q=>q.id===i);return O?(console.log("Found user in search results:",O),{user_id:O.id,full_name:O.full_name,username:O.username,avatar_url:O.avatar_url,last_message:null,last_message_at:null,unread_count:0}):h?{user_id:i,full_name:r.messages.loading,username:null,avatar_url:null,last_message:null,last_message_at:null,unread_count:0}:(console.log("User not found, but not loading!",{selectedConversation:i,conversationsCount:n.length,searchResultsCount:g.length,urlUserProfile:I,loading:h}),null)},[i,n,g,I,h]);return e?a.jsxs("div",{className:"min-h-screen relative pt-24 pb-16",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 md:px-6 z-10",children:a.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl overflow-hidden",style:{height:"calc(100vh - 200px)"},children:a.jsxs("div",{className:"flex h-full",children:[a.jsxs("div",{className:`w-full md:w-1/3 border-r border-purple-500/20 flex flex-col ${i?"hidden md:flex":"flex"}`,children:[a.jsxs("div",{className:"p-4 border-b border-purple-500/20",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:r.messages.title}),a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),a.jsx("input",{type:"text",value:N,onChange:C=>z(C.target.value),placeholder:r.messages.searchPlaceholder,className:"w-full pl-10 pr-4 py-2 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"})]}),g.length>0&&N.length>0&&a.jsxs("div",{className:"mt-2 max-h-60 overflow-y-auto space-y-1 border-b border-purple-500/20 pb-2",children:[a.jsx("div",{className:"text-xs text-slate-400 px-3 py-1 font-medium",children:r.messages.searchResults}),g.map(C=>a.jsxs("button",{onClick:()=>Oe(C.id),className:"w-full flex items-center gap-3 p-3 hover:bg-slate-800/50 rounded-lg transition-colors",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center flex-shrink-0 overflow-hidden",children:C.avatar_url?a.jsx("img",{src:C.avatar_url,alt:"",className:"w-full h-full object-cover"}):a.jsx(_e,{size:20,className:"text-white"})}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("p",{className:"text-white font-medium",children:C.full_name}),C.username&&a.jsxs("p",{className:"text-slate-400 text-sm",children:["@",C.username]})]})]},C.id))]}),f&&N.length>0&&a.jsxs("div",{className:"mt-2 flex items-center justify-center p-4",children:[a.jsx(je,{className:"animate-spin text-purple-400",size:20}),a.jsx("span",{className:"ml-2 text-slate-400",children:r.messages.searching})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:h?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(je,{className:"animate-spin text-purple-400",size:32})}):n.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 p-6",children:[a.jsx(br,{size:48,className:"mb-4"}),a.jsx("p",{children:r.messages.noMessages}),a.jsx("p",{className:"text-sm mt-2",children:r.messages.searchToStart})]}):n.map(C=>a.jsxs("div",{className:`w-full flex items-center gap-3 p-4 border-b border-purple-500/10 hover:bg-slate-800/50 transition-colors group ${i===C.user_id?"bg-slate-800/50":""}`,children:[a.jsxs("button",{onClick:()=>l(C.user_id),className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsxs("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center flex-shrink-0 overflow-hidden relative",children:[C.avatar_url?a.jsx("img",{src:C.avatar_url,alt:"",className:"w-full h-full object-cover"}):a.jsx(_e,{size:24,className:"text-white"}),C.unread_count>0&&a.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full flex items-center justify-center text-xs font-bold text-white",children:C.unread_count})]}),a.jsxs("div",{className:"flex-1 text-left min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-white font-medium truncate",children:C.full_name}),C.last_message_at&&a.jsx("span",{className:"text-xs text-slate-400",children:D(C.last_message_at)})]}),C.last_message&&a.jsx("p",{className:"text-slate-400 text-sm truncate",children:C.last_message})]})]}),a.jsx("button",{onClick:O=>{O.stopPropagation(),confirm(`Delete conversation with ${C.full_name}?`)&&Ue(C.user_id)},className:"flex-shrink-0 p-1.5 text-slate-400 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",title:"Delete conversation",children:a.jsx($t,{size:18})})]},C.user_id))})]}),a.jsx("div",{className:`flex-1 flex flex-col ${i?"flex":"hidden md:flex"}`,children:i?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center gap-3",children:[a.jsx("button",{onClick:()=>l(null),className:"md:hidden text-slate-400 hover:text-white",children:a.jsx(Vv,{size:24})}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:Y!=null&&Y.avatar_url?a.jsx("img",{src:Y.avatar_url,alt:"",className:"w-full h-full object-cover"}):a.jsx(_e,{size:20,className:"text-white"})}),a.jsx("div",{className:"flex-1",children:Y?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-white font-medium",children:Y.full_name}),Y.username&&a.jsxs("p",{className:"text-slate-400 text-sm",children:["@",Y.username]})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(je,{className:"animate-spin text-purple-400",size:16}),a.jsx("p",{className:"text-slate-400",children:r.messages.loadingUser})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>y(!S),className:"p-2 text-slate-400 hover:text-white transition-colors",children:a.jsx(Rf,{size:20})}),S&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>y(!1)}),a.jsx("div",{className:"absolute right-0 top-12 w-48 bg-slate-900 border border-purple-500/30 rounded-lg shadow-2xl z-50 overflow-hidden",children:a.jsxs("button",{onClick:yt,className:"w-full px-4 py-3 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-3 text-red-400 hover:text-red-300",children:[a.jsx(ao,{size:18}),a.jsx("span",{children:"Block User"})]})})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.map(C=>{const O=C.sender_id===e.id;return a.jsx("div",{className:`flex ${O?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[70%] rounded-lg px-4 py-2 ${O?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800 text-white"}`,children:[a.jsx("p",{className:"break-words",children:C.message_text}),a.jsx("p",{className:`text-xs mt-1 ${O?"text-white/70":"text-slate-400"}`,children:D(C.created_at)})]})},C.id)}),a.jsx("div",{ref:b})]}),a.jsx("div",{className:"p-4 border-t border-purple-500/20",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),onKeyPress:C=>C.key==="Enter"&&!v&&ct(),placeholder:r.messages.typePlaceholder,className:"flex-1 px-4 py-2 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60",disabled:v}),a.jsx("button",{onClick:ct,disabled:v||!u.trim(),className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-lg hover:from-pink-500 hover:to-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:v?a.jsx(je,{className:"animate-spin",size:20}):a.jsx(uc,{size:20})})]})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(br,{size:64,className:"mx-auto mb-4"}),a.jsx("p",{children:"Select a conversation to start messaging"})]})})})]})})})]}):null}function Hy(){const e=fc(),t=()=>{if(window.location.pathname.startsWith("/profile/"))return a.jsx(Vu,{});switch(e){case"/":return a.jsx(Wu,{});case"/about":return a.jsx(by,{});case"/contact":return a.jsx(Ry,{});case"/analyze":return a.jsx(Ly,{});case"/library":return a.jsx($y,{});case"/pricing":return a.jsx(Uy,{});case"/profile":return a.jsx(Vu,{});case"/dashboard":return a.jsx(My,{});case"/social":return a.jsx(Fy,{});case"/activate-trial":return a.jsx(By,{});case"/messages":return a.jsx(qy,{});case"/signin":case"/signup":return a.jsx(Iy,{});default:return a.jsx(Wu,{})}};return a.jsxs("div",{className:"min-h-screen bg-slate-950",children:[a.jsx(wy,{}),a.jsx(xy,{}),t()]})}function Wy(){return a.jsx(Fv,{children:a.jsx(Uv,{children:a.jsx(py,{children:a.jsx(my,{children:a.jsx(Hy,{})})})})})}af(document.getElementById("root")).render(a.jsx(j.StrictMode,{children:a.jsx(Wy,{})}));
